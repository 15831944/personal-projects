
AVRASM ver. 2.1.2  main.asm Mon Oct 16 18:23:38 2006

main.asm(933): Including file 'main.vec'
main.asm(934): Including file 'main.inc'
main.inc(2): warning: Register r4 already defined by the .DEF directive
main.asm(934): 'main.inc' included form here
main.inc(3): warning: Register r6 already defined by the .DEF directive
main.asm(934): 'main.inc' included form here
main.inc(4): warning: Register r8 already defined by the .DEF directive
main.asm(934): 'main.inc' included form here
main.inc(5): warning: Register r9 already defined by the .DEF directive
main.asm(934): 'main.inc' included form here
main.inc(6): warning: Register r11 already defined by the .DEF directive
main.asm(934): 'main.inc' included form here
main.inc(19): warning: Register r13 already defined by the .DEF directive
main.asm(934): 'main.inc' included form here
main.inc(20): warning: Register r14 already defined by the .DEF directive
main.asm(934): 'main.inc' included form here
                 
                 
                 ;(C) Copyright 1998-2005 Pavel Haiduc, HP InfoTech s.r.l.
                 ;http://www.hpinfotech.com
                 
                 ;Chip type              : ATmega162
                 ;Program type           : Application
                 ;Clock frequency        : 16.000000 MHz
                 ;Memory model           : Small
                 ;Optimize for           : Speed
                 ;(s)printf features     : int, width
                 ;(s)scanf features      : int, width
                 ;External SRAM size     : 0
                 ;Data Stack size        : 100 byte(s)
                 ;Heap size              : 0 byte(s)
                 ;Promote char to int    : No
                 ;char is unsigned       : Yes
                 ;8 bit enums            : Yes
                 ;Word align FLASH struct: No
                 ;Enhanced core instructions    : On
                 ;Automatic register allocation : On
                 
                 	#pragma AVRPART ADMIN PART_NAME ATmega162
                 	#pragma AVRPART MEMORY PROG_FLASH 16384
                 	#pragma AVRPART MEMORY EEPROM 512
                 	#pragma AVRPART MEMORY INT_SRAM SIZE 1024
                 	#pragma AVRPART MEMORY INT_SRAM START_ADDR 0x100
                 
                 	.EQU UDRE=0x5
                 	.EQU RXC=0x7
                 	.EQU USR=0xB
                 	.EQU UDR=0xC
                 	.EQU SPSR=0xE
                 	.EQU SPDR=0xF
                 	.EQU EERE=0x0
                 	.EQU EEWE=0x1
                 	.EQU EEMWE=0x2
                 	.EQU EECR=0x1C
                 	.EQU EEDR=0x1D
                 	.EQU EEARL=0x1E
                 	.EQU EEARH=0x1F
                 	.EQU WDTCR=0x21
                 	.EQU MCUCSR=0x34
                 	.EQU MCUCR=0x35
                 	.EQU EMCUCR=0x36
                 	.EQU GICR=0x3B
                 	.EQU SPL=0x3D
                 	.EQU SPH=0x3E
                 	.EQU SREG=0x3F
                 
                 	.DEF R0X0=R0
                 	.DEF R0X1=R1
                 	.DEF R0X2=R2
                 	.DEF R0X3=R3
                 	.DEF R0X4=R4
                 	.DEF R0X5=R5
                 	.DEF R0X6=R6
                 	.DEF R0X7=R7
                 	.DEF R0X8=R8
                 	.DEF R0X9=R9
                 	.DEF R0XA=R10
                 	.DEF R0XB=R11
                 	.DEF R0XC=R12
                 	.DEF R0XD=R13
                 	.DEF R0XE=R14
                 	.DEF R0XF=R15
                 	.DEF R0X10=R16
                 	.DEF R0X11=R17
                 	.DEF R0X12=R18
                 	.DEF R0X13=R19
                 	.DEF R0X14=R20
                 	.DEF R0X15=R21
                 	.DEF R0X16=R22
                 	.DEF R0X17=R23
                 	.DEF R0X18=R24
                 	.DEF R0X19=R25
                 	.DEF R0X1A=R26
                 	.DEF R0X1B=R27
                 	.DEF R0X1C=R28
                 	.DEF R0X1D=R29
                 	.DEF R0X1E=R30
                 	.DEF R0X1F=R31
                 
                 	.EQU __se_bit=0x20
                 
                 	.MACRO __CPD1N
                 	CPI  R30,LOW(@0)
                 	LDI  R26,HIGH(@0)
                 	CPC  R31,R26
                 	LDI  R26,BYTE3(@0)
                 	CPC  R22,R26
                 	LDI  R26,BYTE4(@0)
                 	CPC  R23,R26
                 	.ENDM
                 
                 	.MACRO __CPD2N
                 	CPI  R26,LOW(@0)
                 	LDI  R30,HIGH(@0)
                 	CPC  R27,R30
                 	LDI  R30,BYTE3(@0)
                 	CPC  R24,R30
                 	LDI  R30,BYTE4(@0)
                 	CPC  R25,R30
                 	.ENDM
                 
                 	.MACRO __CPWRR
                 	CP   R@0,R@2
                 	CPC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __CPWRN
                 	CPI  R@0,LOW(@2)
                 	LDI  R30,HIGH(@2)
                 	CPC  R@1,R30
                 	.ENDM
                 
                 	.MACRO __ADDB1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	.ENDM
                 	.MACRO __ADDB2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	.ENDM
                 	.MACRO __ADDW1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	SBCI R31,HIGH(-@0-(@1))
                 	.ENDM
                 	.MACRO __ADDW2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	SBCI R27,HIGH(-@0-(@1))
                 	.ENDM
                 	.MACRO __ADDW1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	.ENDM
                 	.MACRO __ADDD1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	SBCI R22,BYTE3(-2*@0-(@1))
                 	.ENDM
                 	.MACRO __ADDD1N
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	SBCI R22,BYTE3(-@0)
                 	SBCI R23,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __ADDD2N
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	SBCI R24,BYTE3(-@0)
                 	SBCI R25,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __SUBD1N
                 	SUBI R30,LOW(@0)
                 	SBCI R31,HIGH(@0)
                 	SBCI R22,BYTE3(@0)
                 	SBCI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __SUBD2N
                 	SUBI R26,LOW(@0)
                 	SBCI R27,HIGH(@0)
                 	SBCI R24,BYTE3(@0)
                 	SBCI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDD1N
                 	ANDI R30,LOW(@0)
                 	ANDI R31,HIGH(@0)
                 	ANDI R22,BYTE3(@0)
                 	ANDI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORD1N
                 	ORI  R30,LOW(@0)
                 	ORI  R31,HIGH(@0)
                 	ORI  R22,BYTE3(@0)
                 	ORI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __DELAY_USB
                 	LDI  R24,LOW(@0)
                 __DELAY_USB_LOOP:
                 	DEC  R24
                 	BRNE __DELAY_USB_LOOP
                 	.ENDM
                 
                 	.MACRO __DELAY_USW
                 	LDI  R24,LOW(@0)
                 	LDI  R25,HIGH(@0)
                 __DELAY_USW_LOOP:
                 	SBIW R24,1
                 	BRNE __DELAY_USW_LOOP
                 	.ENDM
                 
                 	.MACRO __CLRD1S
                 	LDI  R30,0
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R30
                 	STD  Y+@0+2,R30
                 	STD  Y+@0+3,R30
                 	.ENDM
                 
                 	.MACRO __GETD1S
                 	LDD  R30,Y+@0
                 	LDD  R31,Y+@0+1
                 	LDD  R22,Y+@0+2
                 	LDD  R23,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __PUTD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R31
                 	STD  Y+@0+2,R22
                 	STD  Y+@0+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTD2S
                 	STD  Y+@0,R26
                 	STD  Y+@0+1,R27
                 	STD  Y+@0+2,R24
                 	STD  Y+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __POINTB1MN
                 	LDI  R30,LOW(@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTW1MN
                 	LDI  R30,LOW(@0+@1)
                 	LDI  R31,HIGH(@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTW1FN
                 	LDI  R30,LOW(2*@0+@1)
                 	LDI  R31,HIGH(2*@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTD1FN
                 	LDI  R30,LOW(2*@0+@1)
                 	LDI  R31,HIGH(2*@0+@1)
                 	LDI  R22,BYTE3(2*@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTB2MN
                 	LDI  R26,LOW(@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTW2MN
                 	LDI  R26,LOW(@0+@1)
                 	LDI  R27,HIGH(@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTBRM
                 	LDI  R@0,LOW(@1)
                 	.ENDM
                 
                 	.MACRO __POINTWRM
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __POINTBRMN
                 	LDI  R@0,LOW(@1+@2)
                 	.ENDM
                 
                 	.MACRO __POINTWRMN
                 	LDI  R@0,LOW(@2+@3)
                 	LDI  R@1,HIGH(@2+@3)
                 	.ENDM
                 
                 	.MACRO __POINTWRFN
                 	LDI  R@0,LOW(@2*2+@3)
                 	LDI  R@1,HIGH(@2*2+@3)
                 	.ENDM
                 
                 	.MACRO __GETD1N
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETD2N
                 	LDI  R26,LOW(@0)
                 	LDI  R27,HIGH(@0)
                 	LDI  R24,BYTE3(@0)
                 	LDI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETD2S
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	LDD  R24,Y+@0+2
                 	LDD  R25,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __GETB1MN
                 	LDS  R30,@0+@1
                 	.ENDM
                 
                 	.MACRO __GETB1HMN
                 	LDS  R31,@0+@1
                 	.ENDM
                 
                 	.MACRO __GETW1MN
                 	LDS  R30,@0+@1
                 	LDS  R31,@0+@1+1
                 	.ENDM
                 
                 	.MACRO __GETD1MN
                 	LDS  R30,@0+@1
                 	LDS  R31,@0+@1+1
                 	LDS  R22,@0+@1+2
                 	LDS  R23,@0+@1+3
                 	.ENDM
                 
                 	.MACRO __GETBRMN
                 	LDS  R@0,@1+@2
                 	.ENDM
                 
                 	.MACRO __GETWRMN
                 	LDS  R@0,@2+@3
                 	LDS  R@1,@2+@3+1
                 	.ENDM
                 
                 	.MACRO __GETWRZ
                 	LDD  R@0,Z+@2
                 	LDD  R@1,Z+@2+1
                 	.ENDM
                 
                 	.MACRO __GETD2Z
                 	LDD  R26,Z+@0
                 	LDD  R27,Z+@0+1
                 	LDD  R24,Z+@0+2
                 	LDD  R25,Z+@0+3
                 	.ENDM
                 
                 	.MACRO __GETB2MN
                 	LDS  R26,@0+@1
                 	.ENDM
                 
                 	.MACRO __GETW2MN
                 	LDS  R26,@0+@1
                 	LDS  R27,@0+@1+1
                 	.ENDM
                 
                 	.MACRO __GETD2MN
                 	LDS  R26,@0+@1
                 	LDS  R27,@0+@1+1
                 	LDS  R24,@0+@1+2
                 	LDS  R25,@0+@1+3
                 	.ENDM
                 
                 	.MACRO __PUTB1MN
                 	STS  @0+@1,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1MN
                 	STS  @0+@1,R30
                 	STS  @0+@1+1,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1MN
                 	STS  @0+@1,R30
                 	STS  @0+@1+1,R31
                 	STS  @0+@1+2,R22
                 	STS  @0+@1+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTDZ2
                 	STD  Z+@0,R26
                 	STD  Z+@0+1,R27
                 	STD  Z+@0+2,R24
                 	STD  Z+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __PUTBMRN
                 	STS  @0+@1,R@2
                 	.ENDM
                 
                 	.MACRO __PUTWMRN
                 	STS  @0+@1,R@2
                 	STS  @0+@1+1,R@3
                 	.ENDM
                 
                 	.MACRO __PUTBZR
                 	STD  Z+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWZR
                 	STD  Z+@2,R@0
                 	STD  Z+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __GETW1R
                 	MOV  R30,R@0
                 	MOV  R31,R@1
                 	.ENDM
                 
                 	.MACRO __GETW2R
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	.ENDM
                 
                 	.MACRO __GETWRN
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __PUTW1R
                 	MOV  R@0,R30
                 	MOV  R@1,R31
                 	.ENDM
                 
                 	.MACRO __PUTW2R
                 	MOV  R@0,R26
                 	MOV  R@1,R27
                 	.ENDM
                 
                 	.MACRO __ADDWRN
                 	SUBI R@0,LOW(-@2)
                 	SBCI R@1,HIGH(-@2)
                 	.ENDM
                 
                 	.MACRO __ADDWRR
                 	ADD  R@0,R@2
                 	ADC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __SUBWRN
                 	SUBI R@0,LOW(@2)
                 	SBCI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __SUBWRR
                 	SUB  R@0,R@2
                 	SBC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ANDWRN
                 	ANDI R@0,LOW(@2)
                 	ANDI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ANDWRR
                 	AND  R@0,R@2
                 	AND  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ORWRN
                 	ORI  R@0,LOW(@2)
                 	ORI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ORWRR
                 	OR   R@0,R@2
                 	OR   R@1,R@3
                 	.ENDM
                 
                 	.MACRO __EORWRR
                 	EOR  R@0,R@2
                 	EOR  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __GETWRS
                 	LDD  R@0,Y+@2
                 	LDD  R@1,Y+@2+1
                 	.ENDM
                 
                 	.MACRO __PUTWSR
                 	STD  Y+@2,R@0
                 	STD  Y+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __MOVEWRR
                 	MOV  R@0,R@2
                 	MOV  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __INWR
                 	IN   R@0,@2
                 	IN   R@1,@2+1
                 	.ENDM
                 
                 	.MACRO __OUTWR
                 	OUT  @2+1,R@1
                 	OUT  @2,R@0
                 	.ENDM
                 
                 	.MACRO __CALL1MN
                 	LDS  R30,@0+@1
                 	LDS  R31,@0+@1+1
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL1FN
                 	LDI  R30,LOW(2*@0+@1)
                 	LDI  R31,HIGH(2*@0+@1)
                 	CALL __GETW1PF
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL2EN
                 	LDI  R26,LOW(@0+@1)
                 	LDI  R27,HIGH(@0+@1)
                 	CALL __EEPROMRDW
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __GETW1STACK
                 	IN   R26,SPL
                 	IN   R27,SPH
                 	ADIW R26,@0+1
                 	LD   R30,X+
                 	LD   R31,X
                 	.ENDM
                 
                 	.MACRO __NBST
                 	BST  R@0,@1
                 	IN   R30,SREG
                 	LDI  R31,0x40
                 	EOR  R30,R31
                 	OUT  SREG,R30
                 	.ENDM
                 
                 
                 	.MACRO __PUTB1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	CALL __PUTDP1
                 	.ENDM
                 
                 
                 	.MACRO __GETB1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R30,Z
                 	.ENDM
                 
                 	.MACRO __GETB1HSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	.ENDM
                 
                 	.MACRO __GETW1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R31,Z
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __GETD1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R1,Z+
                 	LD   R22,Z+
                 	LD   R23,Z
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __GETB2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R26,X
                 	.ENDM
                 
                 	.MACRO __GETW2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	.ENDM
                 
                 	.MACRO __GETD2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R1,X+
                 	LD   R24,X+
                 	LD   R25,X
                 	MOVW R26,R0
                 	.ENDM
                 
                 	.MACRO __GETBRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	LD   R@0,Z
                 	.ENDM
                 
                 	.MACRO __GETWRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	LD   R@0,Z+
                 	LD   R@1,Z
                 	.ENDM
                 
                 	.MACRO __LSLW8SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	CLR  R30
                 	.ENDM
                 
                 	.MACRO __PUTB1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __CLRW1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	CLR  R0
                 	ST   Z+,R0
                 	ST   Z,R0
                 	.ENDM
                 
                 	.MACRO __CLRD1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	CLR  R0
                 	ST   Z+,R0
                 	ST   Z+,R0
                 	ST   Z+,R0
                 	ST   Z,R0
                 	.ENDM
                 
                 	.MACRO __PUTB2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z,R26
                 	.ENDM
                 
                 	.MACRO __PUTW2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z,R27
                 	.ENDM
                 
                 	.MACRO __PUTD2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z+,R27
                 	ST   Z+,R24
                 	ST   Z,R25
                 	.ENDM
                 
                 	.MACRO __PUTBSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z,R@1
                 	.ENDM
                 
                 	.MACRO __PUTWSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	ST   Z+,R@0
                 	ST   Z,R@1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __MULBRR
                 	MULS R@0,R@1
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRRU
                 	MUL  R@0,R@1
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.CSEG
                 	.ORG 0
                 
                 	.INCLUDE "main.vec"
                 
                 ;INTERRUPT VECTORS
000000 940c 0058 	JMP  __RESET
000002 940c 0000 	JMP  0x00
000004 940c 0000 	JMP  0x00
000006 940c 0000 	JMP  0x00
000008 940c 0000 	JMP  0x00
00000a 940c 0000 	JMP  0x00
00000c 940c 0000 	JMP  0x00
00000e 940c 0000 	JMP  0x00
000010 940c 0000 	JMP  0x00
000012 940c 0000 	JMP  0x00
000014 940c 0000 	JMP  0x00
000016 940c 0000 	JMP  0x00
000018 940c 0000 	JMP  0x00
00001a 940c 0000 	JMP  0x00
00001c 940c 0000 	JMP  0x00
00001e 940c 0000 	JMP  0x00
000020 940c 0000 	JMP  0x00
000022 940c 008a 	JMP  _timer0_ovf_isr
000024 940c 0000 	JMP  0x00
000026 940c 0ab6 	JMP  _usart_rx_isr
000028 940c 0000 	JMP  0x00
00002a 940c 0000 	JMP  0x00
00002c 940c 0000 	JMP  0x00
00002e 940c 0000 	JMP  0x00
000030 940c 0000 	JMP  0x00
000032 940c 0000 	JMP  0x00
000034 940c 0000 	JMP  0x00
000036 940c 0000 	JMP  0x00
                 
                 	.INCLUDE "main.inc"
                 
                 	.DEF _count_row=R4
                 	.DEF _count_col=R6
                 	.DEF _rx_message=R8
                 	.DEF _rx_wparam=R9
                 	.DEF _rx_lparam=R11
                 _0x5A:
000038 0000      	.DB  0x0,0x0
                 _0x6E:
main.inc(10): warning: .cseg .db misalignment - padding zero byte
main.asm(934): 'main.inc' included form here
000039 00a0      	.DB  0xA0
                 _0x80:
00003a 0000      	.DB  0x0,0x0
00003b 0000      	.DB  0x0,0x0
00003c 0000      	.DB  0x0,0x0
00003d 0000      	.DB  0x0,0x0
00003e 0000      	.DB  0x0,0x0
00003f 0000      	.DB  0x0,0x0
main.inc(18): warning: .cseg .db misalignment - padding zero byte
main.asm(934): 'main.inc' included form here
000040 0000      	.DB  0x0
                 	.DEF _rx_wr_index=R13
                 	.DEF _rx_counter=R14
                 _0:
000041 3d2d
000042 3320
000043 4769
000044 4f52      	.DB  0x2D,0x3D,0x20,0x33,0x69,0x47,0x52,0x4F
000045 5055
000046 3a20
000047 203a
000048 5448      	.DB  0x55,0x50,0x20,0x3A,0x3A,0x20,0x48,0x54
000049 5054
00004a 2f3a
00004b 572f
00004c 5757      	.DB  0x54,0x50,0x3A,0x2F,0x2F,0x57,0x57,0x57
00004d 332e
00004e 4849
00004f 5455
000050 4e2e      	.DB  0x2E,0x33,0x49,0x48,0x55,0x54,0x2E,0x4E
000051 5445
000052 3d20
000053 002d      	.DB  0x45,0x54,0x20,0x3D,0x2D,0x0
                 
                 __GLOBAL_INI_TBL:
000054 0026      	.DW  0x26
000055 0384      	.DW  _szText_G1
000056 0082      	.DW  _0*2
                 
000057 0000      	.DW  0
                 _0xE8:
                 
                 __RESET:
000058 94f8      	CLI
000059 27ee      	CLR  R30
00005a bbec      	OUT  EECR,R30
                 
                 ;INTERRUPT VECTORS ARE PLACED
                 ;AT THE START OF FLASH
00005b e0f1      	LDI  R31,1
00005c bffb      	OUT  GICR,R31
00005d bfeb      	OUT  GICR,R30
00005e bfe5      	OUT  MCUCR,R30
00005f bfe6      	OUT  EMCUCR,R30
                 
                 ;DISABLE WATCHDOG
000060 e1f8      	LDI  R31,0x18
000061 bdf1      	OUT  WDTCR,R31
000062 bde1      	OUT  WDTCR,R30
                 
                 ;CLEAR R2-R14
000063 e08d      	LDI  R24,13
000064 e0a2      	LDI  R26,2
000065 27bb      	CLR  R27
                 __CLEAR_REG:
000066 93ed      	ST   X+,R30
000067 958a      	DEC  R24
000068 f7e9      	BRNE __CLEAR_REG
                 
                 ;CLEAR SRAM
000069 e080      	LDI  R24,LOW(0x400)
00006a e094      	LDI  R25,HIGH(0x400)
00006b e0a0      	LDI  R26,LOW(0x100)
00006c e0b1      	LDI  R27,HIGH(0x100)
                 __CLEAR_SRAM:
00006d 93ed      	ST   X+,R30
00006e 9701      	SBIW R24,1
00006f f7e9      	BRNE __CLEAR_SRAM
                 
                 ;GLOBAL VARIABLES INITIALIZATION
000070 eae8      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
000071 e0f0      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
                 __GLOBAL_INI_NEXT:
000072 9185      	LPM  R24,Z+
000073 9195      	LPM  R25,Z+
000074 9700      	SBIW R24,0
000075 f061      	BREQ __GLOBAL_INI_END
000076 91a5      	LPM  R26,Z+
000077 91b5      	LPM  R27,Z+
000078 9005      	LPM  R0,Z+
000079 9015      	LPM  R1,Z+
00007a 01bf      	MOVW R22,R30
00007b 01f0      	MOVW R30,R0
                 __GLOBAL_INI_LOOP:
00007c 9005      	LPM  R0,Z+
00007d 920d      	ST   X+,R0
00007e 9701      	SBIW R24,1
00007f f7e1      	BRNE __GLOBAL_INI_LOOP
000080 01fb      	MOVW R30,R22
000081 cff0      	RJMP __GLOBAL_INI_NEXT
                 __GLOBAL_INI_END:
                 
                 ;STACK POINTER INITIALIZATION
000082 efef      	LDI  R30,LOW(0x4FF)
000083 bfed      	OUT  SPL,R30
000084 e0e4      	LDI  R30,HIGH(0x4FF)
000085 bfee      	OUT  SPH,R30
                 
                 ;DATA STACK POINTER INITIALIZATION
000086 e6c4      	LDI  R28,LOW(0x164)
000087 e0d1      	LDI  R29,HIGH(0x164)
                 
000088 940c 0a9a 	JMP  _main
                 
                 	.ESEG
                 	.ORG 0
                 
                 	.DSEG
                 	.ORG 0x164
                 ;       1 /*****************************************************
                 ;       2 This program was produced by the
                 ;       3 CodeWizardAVR V1.24.6 Professional
                 ;       4 Automatic Program Generator
                 ;       5 © Copyright 1998-2005 Pavel Haiduc, HP InfoTech s.r.l.
                 ;       6 http://www.hpinfotech.com
                 ;       7 e-mail:office@hpinfotech.com
                 ;       8 
                 ;       9 Project : 
                 ;      10 Version : 
                 ;      11 Date    : 11/10/2005
                 ;      12 Author  : CUONGDD                            
                 ;      13 Company : 3iGROUP                           
                 ;      14 Comments: 
                 ;      15 
                 ;      16 
                 ;      17 Chip type           : ATmega16/162/8515
                 ;      18 Program type        : Application
                 ;      19 Clock frequency     : 8.000000 MHz
                 ;      20 Memory model        : Small
                 ;      21 External SRAM size  : 0
                 ;      22 Data Stack size     : 256
                 ;      23 *****************************************************/
                 ;      24 
                 ;      25 #include "define.h"      
                 ;      26 
                 ;      27 // DS1307 Real Time Clock functions
                 ;      28 #include <ds1307.h>
                 ;      29                                       
                 ;      30 // Declare your global variables here     
                 ;      31 static PBYTE start_mem;
                 _start_mem_G1:
000164           	.BYTE 0x2
                 ;      32 static PBYTE end_mem;        
                 _end_mem_G1:
000166           	.BYTE 0x2
                 ;      33 static PBYTE buffer; 
                 _buffer_G1:
000168           	.BYTE 0x2
                 ;      34 static PBYTE bkgnd_mem;     
                 _bkgnd_mem_G1:
00016a           	.BYTE 0x2
                 ;      35 static PBYTE org_mem;
                 _org_mem_G1:
00016c           	.BYTE 0x2
                 ;      36 
                 ;      37 bit is_show_bkgnd        = 0;
                 ;      38 bit is_flipping_bk       = 0;
                 ;      39 
                 ;      40 register UINT count_row  = 0;
                 ;      41 register UINT count_col  = 0;     
                 ;      42 static BYTE frm_delay    = 0;
                 _frm_delay_G1:
00016e           	.BYTE 0x1
                 ;      43 static BYTE shift_rate   = 0; 
                 _shift_rate_G1:
00016f           	.BYTE 0x1
                 ;      44 static BYTE shift_step   = 0;     
                 _shift_step_G1:
000170           	.BYTE 0x1
                 ;      45 static BYTE sys_mode     = 0;    
                 _sys_mode_G1:
000171           	.BYTE 0x1
                 ;      46 
                 ;      47 static UINT  tick_count  = 0;
                 _tick_count_G1:
000172           	.BYTE 0x2
                 ;      48 static UINT  count_shift = 0;       
                 _count_shift_G1:
000174           	.BYTE 0x2
                 ;      49 static UINT  char_count  = 0;
                 _char_count_G1:
000176           	.BYTE 0x2
                 ;      50 static UINT  text_length = 0;
                 _text_length_G1:
000178           	.BYTE 0x2
                 ;      51 
                 ;      52 static UINT  char_width[256];    
                 _char_width_G1:
00017a           	.BYTE 0x200
                 ;      53 static UINT  columeH = 0;
                 _columeH_G1:
00037a           	.BYTE 0x2
                 ;      54 static UINT  columeL = 0;
                 _columeL_G1:
00037c           	.BYTE 0x2
                 ;      55 static UINT  char_index = 0;    
                 _char_index_G1:
00037e           	.BYTE 0x2
                 ;      56 static UINT  next_char_width = 0;
                 _next_char_width_G1:
000380           	.BYTE 0x2
                 ;      57 static UINT  current_char_width = 0;  
                 _current_char_width_G1:
000382           	.BYTE 0x2
                 ;      58 
                 ;      59 static char  szText[] = "-= 3iGROUP :: HTTP://WWW.3IHUT.NET =-";                    
                 _szText_G1:
000384           	.BYTE 0x26
                 ;      60 
                 ;      61 #pragma warn-                      
                 ;      62 eeprom BYTE _cfg_frm_delay =100;
                 
                 	.ESEG
                 __cfg_frm_delay:
000000 64        	.DB  0x64
                 ;      63 eeprom BYTE _cfg_sys_mode =MODE_POWER;
                 __cfg_sys_mode:
000001 20        	.DB  0x20
                 ;      64 eeprom BYTE _cfg_shift_rate =20;
                 __cfg_shift_rate:
000002 14        	.DB  0x14
                 ;      65 eeprom BYTE _cfg_shift_step =1;
                 __cfg_shift_step:
000003 01        	.DB  0x1
                 ;      66 eeprom UINT _save_text_length =0;   
                 __save_text_length:
000004 00 00     	.DW  0x0
                 ;      67 eeprom UINT _save_char_width[250];       
                 __save_char_width:
000006 00 00     	.DW  0x0
000008 00 00     	.DW  0x0
00000a 00 00     	.DW  0x0
00000c 00 00     	.DW  0x0
00000e 00 00     	.DW  0x0
000010 00 00     	.DW  0x0
000012 00 00     	.DW  0x0
000014 00 00     	.DW  0x0
000016 00 00     	.DW  0x0
000018 00 00     	.DW  0x0
00001a 00 00     	.DW  0x0
00001c 00 00     	.DW  0x0
00001e 00 00     	.DW  0x0
000020 00 00     	.DW  0x0
000022 00 00     	.DW  0x0
000024 00 00     	.DW  0x0
000026 00 00     	.DW  0x0
000028 00 00     	.DW  0x0
00002a 00 00     	.DW  0x0
00002c 00 00     	.DW  0x0
00002e 00 00     	.DW  0x0
000030 00 00     	.DW  0x0
000032 00 00     	.DW  0x0
000034 00 00     	.DW  0x0
000036 00 00     	.DW  0x0
000038 00 00     	.DW  0x0
00003a 00 00     	.DW  0x0
00003c 00 00     	.DW  0x0
00003e 00 00     	.DW  0x0
000040 00 00     	.DW  0x0
000042 00 00     	.DW  0x0
000044 00 00     	.DW  0x0
000046 00 00     	.DW  0x0
000048 00 00     	.DW  0x0
00004a 00 00     	.DW  0x0
00004c 00 00     	.DW  0x0
00004e 00 00     	.DW  0x0
000050 00 00     	.DW  0x0
000052 00 00     	.DW  0x0
000054 00 00     	.DW  0x0
000056 00 00     	.DW  0x0
000058 00 00     	.DW  0x0
00005a 00 00     	.DW  0x0
00005c 00 00     	.DW  0x0
00005e 00 00     	.DW  0x0
000060 00 00     	.DW  0x0
000062 00 00     	.DW  0x0
000064 00 00     	.DW  0x0
000066 00 00     	.DW  0x0
000068 00 00     	.DW  0x0
00006a 00 00     	.DW  0x0
00006c 00 00     	.DW  0x0
00006e 00 00     	.DW  0x0
000070 00 00     	.DW  0x0
000072 00 00     	.DW  0x0
000074 00 00     	.DW  0x0
000076 00 00     	.DW  0x0
000078 00 00     	.DW  0x0
00007a 00 00     	.DW  0x0
00007c 00 00     	.DW  0x0
00007e 00 00     	.DW  0x0
000080 00 00     	.DW  0x0
000082 00 00     	.DW  0x0
000084 00 00     	.DW  0x0
000086 00 00     	.DW  0x0
000088 00 00     	.DW  0x0
00008a 00 00     	.DW  0x0
00008c 00 00     	.DW  0x0
00008e 00 00     	.DW  0x0
000090 00 00     	.DW  0x0
000092 00 00     	.DW  0x0
000094 00 00     	.DW  0x0
000096 00 00     	.DW  0x0
000098 00 00     	.DW  0x0
00009a 00 00     	.DW  0x0
00009c 00 00     	.DW  0x0
00009e 00 00     	.DW  0x0
0000a0 00 00     	.DW  0x0
0000a2 00 00     	.DW  0x0
0000a4 00 00     	.DW  0x0
0000a6 00 00     	.DW  0x0
0000a8 00 00     	.DW  0x0
0000aa 00 00     	.DW  0x0
0000ac 00 00     	.DW  0x0
0000ae 00 00     	.DW  0x0
0000b0 00 00     	.DW  0x0
0000b2 00 00     	.DW  0x0
0000b4 00 00     	.DW  0x0
0000b6 00 00     	.DW  0x0
0000b8 00 00     	.DW  0x0
0000ba 00 00     	.DW  0x0
0000bc 00 00     	.DW  0x0
0000be 00 00     	.DW  0x0
0000c0 00 00     	.DW  0x0
0000c2 00 00     	.DW  0x0
0000c4 00 00     	.DW  0x0
0000c6 00 00     	.DW  0x0
0000c8 00 00     	.DW  0x0
0000ca 00 00     	.DW  0x0
0000cc 00 00     	.DW  0x0
0000ce 00 00     	.DW  0x0
0000d0 00 00     	.DW  0x0
0000d2 00 00     	.DW  0x0
0000d4 00 00     	.DW  0x0
0000d6 00 00     	.DW  0x0
0000d8 00 00     	.DW  0x0
0000da 00 00     	.DW  0x0
0000dc 00 00     	.DW  0x0
0000de 00 00     	.DW  0x0
0000e0 00 00     	.DW  0x0
0000e2 00 00     	.DW  0x0
0000e4 00 00     	.DW  0x0
0000e6 00 00     	.DW  0x0
0000e8 00 00     	.DW  0x0
0000ea 00 00     	.DW  0x0
0000ec 00 00     	.DW  0x0
0000ee 00 00     	.DW  0x0
0000f0 00 00     	.DW  0x0
0000f2 00 00     	.DW  0x0
0000f4 00 00     	.DW  0x0
0000f6 00 00     	.DW  0x0
0000f8 00 00     	.DW  0x0
0000fa 00 00     	.DW  0x0
0000fc 00 00     	.DW  0x0
0000fe 00 00     	.DW  0x0
000100 00 00     	.DW  0x0
000102 00 00     	.DW  0x0
000104 00 00     	.DW  0x0
000106 00 00     	.DW  0x0
000108 00 00     	.DW  0x0
00010a 00 00     	.DW  0x0
00010c 00 00     	.DW  0x0
00010e 00 00     	.DW  0x0
000110 00 00     	.DW  0x0
000112 00 00     	.DW  0x0
000114 00 00     	.DW  0x0
000116 00 00     	.DW  0x0
000118 00 00     	.DW  0x0
00011a 00 00     	.DW  0x0
00011c 00 00     	.DW  0x0
00011e 00 00     	.DW  0x0
000120 00 00     	.DW  0x0
000122 00 00     	.DW  0x0
000124 00 00     	.DW  0x0
000126 00 00     	.DW  0x0
000128 00 00     	.DW  0x0
00012a 00 00     	.DW  0x0
00012c 00 00     	.DW  0x0
00012e 00 00     	.DW  0x0
000130 00 00     	.DW  0x0
000132 00 00     	.DW  0x0
000134 00 00     	.DW  0x0
000136 00 00     	.DW  0x0
000138 00 00     	.DW  0x0
00013a 00 00     	.DW  0x0
00013c 00 00     	.DW  0x0
00013e 00 00     	.DW  0x0
000140 00 00     	.DW  0x0
000142 00 00     	.DW  0x0
000144 00 00     	.DW  0x0
000146 00 00     	.DW  0x0
000148 00 00     	.DW  0x0
00014a 00 00     	.DW  0x0
00014c 00 00     	.DW  0x0
00014e 00 00     	.DW  0x0
000150 00 00     	.DW  0x0
000152 00 00     	.DW  0x0
000154 00 00     	.DW  0x0
000156 00 00     	.DW  0x0
000158 00 00     	.DW  0x0
00015a 00 00     	.DW  0x0
00015c 00 00     	.DW  0x0
00015e 00 00     	.DW  0x0
000160 00 00     	.DW  0x0
000162 00 00     	.DW  0x0
000164 00 00     	.DW  0x0
000166 00 00     	.DW  0x0
000168 00 00     	.DW  0x0
00016a 00 00     	.DW  0x0
00016c 00 00     	.DW  0x0
00016e 00 00     	.DW  0x0
000170 00 00     	.DW  0x0
000172 00 00     	.DW  0x0
000174 00 00     	.DW  0x0
000176 00 00     	.DW  0x0
000178 00 00     	.DW  0x0
00017a 00 00     	.DW  0x0
00017c 00 00     	.DW  0x0
00017e 00 00     	.DW  0x0
000180 00 00     	.DW  0x0
000182 00 00     	.DW  0x0
000184 00 00     	.DW  0x0
000186 00 00     	.DW  0x0
000188 00 00     	.DW  0x0
00018a 00 00     	.DW  0x0
00018c 00 00     	.DW  0x0
00018e 00 00     	.DW  0x0
000190 00 00     	.DW  0x0
000192 00 00     	.DW  0x0
000194 00 00     	.DW  0x0
000196 00 00     	.DW  0x0
000198 00 00     	.DW  0x0
00019a 00 00     	.DW  0x0
00019c 00 00     	.DW  0x0
00019e 00 00     	.DW  0x0
0001a0 00 00     	.DW  0x0
0001a2 00 00     	.DW  0x0
0001a4 00 00     	.DW  0x0
0001a6 00 00     	.DW  0x0
0001a8 00 00     	.DW  0x0
0001aa 00 00     	.DW  0x0
0001ac 00 00     	.DW  0x0
0001ae 00 00     	.DW  0x0
0001b0 00 00     	.DW  0x0
0001b2 00 00     	.DW  0x0
0001b4 00 00     	.DW  0x0
0001b6 00 00     	.DW  0x0
0001b8 00 00     	.DW  0x0
0001ba 00 00     	.DW  0x0
0001bc 00 00     	.DW  0x0
0001be 00 00     	.DW  0x0
0001c0 00 00     	.DW  0x0
0001c2 00 00     	.DW  0x0
0001c4 00 00     	.DW  0x0
0001c6 00 00     	.DW  0x0
0001c8 00 00     	.DW  0x0
0001ca 00 00     	.DW  0x0
0001cc 00 00     	.DW  0x0
0001ce 00 00     	.DW  0x0
0001d0 00 00     	.DW  0x0
0001d2 00 00     	.DW  0x0
0001d4 00 00     	.DW  0x0
0001d6 00 00     	.DW  0x0
0001d8 00 00     	.DW  0x0
0001da 00 00     	.DW  0x0
0001dc 00 00     	.DW  0x0
0001de 00 00     	.DW  0x0
0001e0 00 00     	.DW  0x0
0001e2 00 00     	.DW  0x0
0001e4 00 00     	.DW  0x0
0001e6 00 00     	.DW  0x0
0001e8 00 00     	.DW  0x0
0001ea 00 00     	.DW  0x0
0001ec 00 00     	.DW  0x0
0001ee 00 00     	.DW  0x0
0001f0 00 00     	.DW  0x0
0001f2 00 00     	.DW  0x0
0001f4 00 00     	.DW  0x0
0001f6 00 00     	.DW  0x0
0001f8 00 00     	.DW  0x0
                 ;      68 #pragma warn+
                 ;      69                                    
                 ;      70 /************************************/
                 ;      71 /* short delay with nop instruction */
                 ;      72 /************************************/
                 ;      73 /* Crys 16Mhz, 1 cycle = 0.0625 u_sec
                 ;      74 /* total: 9 cycle = 0.5625 us per call
                 ;      75 _delay_ex:
                 ;      76 	LDS  R30,_frm_delay_G1  ; 2 cycles
                 ;      77 	SUBI R30,LOW(1)         ; 1 cycle
                 ;      78 	STS  _frm_delay_G1,R30  ; 2 cycles
                 ;      79 	CPI  R30,0              ; 1 cycle
                 ;      80 	BRNE _delay_ex	        ; 1 cycle
                 ;      81 **************************************/
                 ;      82 #define _delay_ex(x) {\
                 ;      83     while(--x);\
                 ;      84 }\
                 ;      85 
                 ;      86              
                 ;      87 // Global variables for message control
                 ;      88 BYTE  rx_message = UNKNOWN_MSG;
                 ;      89 WORD  rx_wparam  = 0;
                 ;      90 WORD  rx_lparam  = 0;
                 ;      91 // [0x55][0x55][0x55][rx_message][rx_wparam][rx_lparam]
                 ;      92                             
                 ;      93 extern void reset_serial();         
                 ;      94 extern void send_echo_msg();    
                 ;      95 extern BYTE eeprom_read(BYTE deviceID, WORD address);
                 ;      96 extern void eeprom_write(BYTE deviceID, WORD address, BYTE data);
                 ;      97 extern WORD eeprom_read_w(BYTE deviceID, WORD address);
                 ;      98 extern void eeprom_write_w(BYTE deviceID, WORD address, WORD data);
                 ;      99 extern void eeprom_write_page(BYTE deviceID, WORD address, PBYTE buffer, BYTE page_size);
                 ;     100 extern void eeprom_read_page(BYTE deviceID, WORD address, PBYTE buffer, BYTE page_size);
                 ;     101 
                 ;     102 static void _displayFrame();
                 ;     103 static void _doScroll();
                 ;     104 ///////////////////////////////////////////////////////////////
                 ;     105 // Timer 0 overflow interrupt service routine , 40.5 us per tick                 
                 ;     106 ///////////////////////////////////////////////////////////////
                 ;     107 interrupt [TIM0_OVF] void timer0_ovf_isr(void)
                 ;     108 {       
                 
                 	.CSEG
                 _timer0_ovf_isr:
00008a 93ea      	ST   -Y,R30
00008b 93fa      	ST   -Y,R31
00008c b7ef      	IN   R30,SREG
00008d 93ea      	ST   -Y,R30
                 ;     109     TCNT0 = 0x05;       // 1ms = 4*250 = 1000 us
00008e e0e5      	LDI  R30,LOW(5)
00008f bfe2      	OUT  0x32,R30
                 ;     110     if (is_flipping_bk){
000090 fe21      	SBRS R2,1
000091 c009      	RJMP _0x3
                 ;     111         ++tick_count;
000092 91e0 0172 	LDS  R30,_tick_count_G1
000094 91f0 0173 	LDS  R31,_tick_count_G1+1
000096 9631      	ADIW R30,1
000097 93e0 0172 	STS  _tick_count_G1,R30
000099 93f0 0173 	STS  _tick_count_G1+1,R31
                 ;     112     }
                 ;     113     count_shift++;
                 _0x3:
00009b 91e0 0174 	LDS  R30,_count_shift_G1
00009d 91f0 0175 	LDS  R31,_count_shift_G1+1
00009f 9631      	ADIW R30,1
0000a0 93e0 0174 	STS  _count_shift_G1,R30
0000a2 93f0 0175 	STS  _count_shift_G1+1,R31
                 ;     114 }
0000a4 91e9      	LD   R30,Y+
0000a5 bfef      	OUT  SREG,R30
0000a6 91f9      	LD   R31,Y+
0000a7 91e9      	LD   R30,Y+
0000a8 9518      	RETI
                 ;     115 
                 ;     116 
                 ;     117 ///////////////////////////////////////////////////////////////
                 ;     118 // static function(s) for led matrix display panel
                 ;     119 ///////////////////////////////////////////////////////////////
                 ;     120 static void _setRow()
                 ;     121 {
                 __setRow_G1:
                 ;     122     BYTE i=0;      
                 ;     123     for (i=0; i<8; i++){            
0000a9 930a      	ST   -Y,R16
                 ;	i -> R16
0000aa e000      	LDI  R16,0
0000ab e000      	LDI  R16,LOW(0)
                 _0x5:
0000ac 3008      	CPI  R16,8
0000ad f480      	BRSH _0x6
                 ;     124         if (i==(7-count_row)) SCAN_DAT = ON;        
0000ae e0e7      	LDI  R30,LOW(7)
0000af e0f0      	LDI  R31,HIGH(7)
0000b0 19e4      	SUB  R30,R4
0000b1 09f5      	SBC  R31,R5
0000b2 2fa0      	MOV  R26,R16
0000b3 e0b0      	LDI  R27,0
0000b4 17ea      	CP   R30,R26
0000b5 07fb      	CPC  R31,R27
0000b6 f411      	BRNE _0x7
0000b7 9895      	CBI  0x12,5
                 ;     125         else SCAN_DAT = OFF;        
0000b8 c001      	RJMP _0x8
                 _0x7:
0000b9 9a95      	SBI  0x12,5
                 ;     126         SCAN_CLK = 1;
                 _0x8:
0000ba 9a93      	SBI  0x12,3
                 ;     127         SCAN_CLK = 0;            
0000bb 9893      	CBI  0x12,3
                 ;     128     }
0000bc 5f0f      	SUBI R16,-1
0000bd cfee      	RJMP _0x5
                 _0x6:
                 ;     129 }
0000be c00c      	RJMP _0xDF
                 ;     130             
                 ;     131 static void _powerOff()
                 ;     132 {
                 __powerOff_G1:
                 ;     133     BYTE i =0;               
                 ;     134     SCAN_DAT = OFF;  // data scan low        
0000bf 930a      	ST   -Y,R16
                 ;	i -> R16
0000c0 e000      	LDI  R16,0
0000c1 9a95      	SBI  0x12,5
                 ;     135     for (i=0; i< 8; i++)    
0000c2 e000      	LDI  R16,LOW(0)
                 _0xA:
0000c3 3008      	CPI  R16,8
0000c4 f420      	BRSH _0xB
                 ;     136     {                                              
                 ;     137         SCAN_CLK = 1;    // clock scan high
0000c5 9a93      	SBI  0x12,3
                 ;     138         SCAN_CLK = 0;    // clock scan low            
0000c6 9893      	CBI  0x12,3
                 ;     139     }                                         
0000c7 5f0f      	SUBI R16,-1
0000c8 cffa      	RJMP _0xA
                 _0xB:
                 ;     140     SCAN_STB = 1;    // strobe scan high
0000c9 9a94      	SBI  0x12,4
                 ;     141     SCAN_STB = 0;    // strobe scan low                    
0000ca 9894      	CBI  0x12,4
                 ;     142 }
                 _0xDF:
0000cb 9109      	LD   R16,Y+
0000cc 9508      	RET
                 ;     143 
                 ;     144 static void _displayFrame()
                 ;     145 {                   
                 __displayFrame_G1:
                 ;     146     count_col = 0;
0000cd 2466      	CLR  R6
0000ce 2477      	CLR  R7
                 ;     147     count_row = 0;         
0000cf 2444      	CLR  R4
0000d0 2455      	CLR  R5
                 ;     148          
                 ;     149     columeL = current_char_width + (START_RAM_TEXT + SCREEN_WIDTH) - start_mem;
0000d1 91e0 0382 	LDS  R30,_current_char_width_G1
0000d3 91f0 0383 	LDS  R31,_current_char_width_G1+1
0000d5 5fe8      	SUBI R30,LOW(-3080)
0000d6 4ff3      	SBCI R31,HIGH(-3080)
0000d7 91a0 0164 	LDS  R26,_start_mem_G1
0000d9 91b0 0165 	LDS  R27,_start_mem_G1+1
0000db 1bea      	SUB  R30,R26
0000dc 0bfb      	SBC  R31,R27
0000dd 93e0 037c 	STS  _columeL_G1,R30
0000df 93f0 037d 	STS  _columeL_G1+1,R31
                 ;     150     columeH = next_char_width + (START_RAM_TEXT + SCREEN_WIDTH) - start_mem;         	                                           
0000e1 91e0 0380 	LDS  R30,_next_char_width_G1
0000e3 91f0 0381 	LDS  R31,_next_char_width_G1+1
0000e5 5fe8      	SUBI R30,LOW(-3080)
0000e6 4ff3      	SBCI R31,HIGH(-3080)
0000e7 1bea      	SUB  R30,R26
0000e8 0bfb      	SBC  R31,R27
0000e9 93e0 037a 	STS  _columeH_G1,R30
0000eb 93f0 037b 	STS  _columeH_G1+1,R31
                 ;     151 
                 ;     152     // display one frame in the screen at the specific time 
                 ;     153     for (buffer = start_mem;buffer < (END_RAM); buffer++)  
0000ed 91e0 0164 	LDS  R30,_start_mem_G1
0000ef 91f0 0165 	LDS  R31,_start_mem_G1+1
0000f1 93e0 0168 	STS  _buffer_G1,R30
0000f3 93f0 0169 	STS  _buffer_G1+1,R31
                 _0xD:
0000f5 91a0 0168 	LDS  R26,_buffer_G1
0000f7 91b0 0169 	LDS  R27,_buffer_G1+1
0000f9 30a0      	CPI  R26,LOW(0x8000)
0000fa e8e0      	LDI  R30,HIGH(0x8000)
0000fb 07be      	CPC  R27,R30
0000fc f010      	BRLO PC+3
0000fd 940c 01d2 	JMP _0xE
                 ;     154     {                     
                 ;     155     #ifdef __FLYING_TEXT_
                 ;     156         if (current_char_width < SCREEN_WIDTH)
0000ff 91a0 0382 	LDS  R26,_current_char_width_G1
000101 91b0 0383 	LDS  R27,_current_char_width_G1+1
000103 3ca8      	CPI  R26,LOW(0xC8)
000104 e0e0      	LDI  R30,HIGH(0xC8)
000105 07be      	CPC  R27,R30
000106 f010      	BRLO PC+3
000107 940c 0187 	JMP _0xF
                 ;     157 		{                                  		        
                 ;     158 			if (count_col < current_char_width){				
000109 91e0 0382 	LDS  R30,_current_char_width_G1
00010b 91f0 0383 	LDS  R31,_current_char_width_G1+1
00010d 166e      	CP   R6,R30
00010e 067f      	CPC  R7,R31
00010f f5a0      	BRSH _0x10
                 ;     159 				if (is_show_bkgnd){
000110 fe20      	SBRS R2,0
000111 c020      	RJMP _0x11
                 ;     160                     DATA_PORT = org_mem[count_row*DATA_LENGTH + SCREEN_WIDTH + count_col]&
                 ;     161                             (bkgnd_mem[count_col+SCREEN_WIDTH*count_row]);	
000112 01d2      	MOVW R26,R4
000113 e9e8      	LDI  R30,LOW(3736)
000114 e0fe      	LDI  R31,HIGH(3736)
000115 940e 0d18 	CALL __MULW12U
000117 53e8      	SUBI R30,LOW(-200)
000118 4fff      	SBCI R31,HIGH(-200)
000119 0de6      	ADD  R30,R6
00011a 1df7      	ADC  R31,R7
00011b 91a0 016c 	LDS  R26,_org_mem_G1
00011d 91b0 016d 	LDS  R27,_org_mem_G1+1
00011f 0fae      	ADD  R26,R30
000120 1fbf      	ADC  R27,R31
000121 918c      	LD   R24,X
000122 01f2      	MOVW R30,R4
000123 eca8      	LDI  R26,LOW(200)
000124 e0b0      	LDI  R27,HIGH(200)
000125 940e 0d18 	CALL __MULW12U
000127 0de6      	ADD  R30,R6
000128 1df7      	ADC  R31,R7
000129 91a0 016a 	LDS  R26,_bkgnd_mem_G1
00012b 91b0 016b 	LDS  R27,_bkgnd_mem_G1+1
00012d 0fae      	ADD  R26,R30
00012e 1fbf      	ADC  R27,R31
00012f 91ec      	LD   R30,X
000130 23e8      	AND  R30,R24
000131 c010      	RJMP _0xE0
                 ;     162                 }                               
                 ;     163                 else{
                 _0x11:
                 ;     164                     DATA_PORT = org_mem[count_row*DATA_LENGTH + SCREEN_WIDTH + count_col];
000132 01d2      	MOVW R26,R4
000133 e9e8      	LDI  R30,LOW(3736)
000134 e0fe      	LDI  R31,HIGH(3736)
000135 940e 0d18 	CALL __MULW12U
000137 53e8      	SUBI R30,LOW(-200)
000138 4fff      	SBCI R31,HIGH(-200)
000139 0de6      	ADD  R30,R6
00013a 1df7      	ADC  R31,R7
00013b 91a0 016c 	LDS  R26,_org_mem_G1
00013d 91b0 016d 	LDS  R27,_org_mem_G1+1
00013f 0fae      	ADD  R26,R30
000140 1fbf      	ADC  R27,R31
000141 91ec      	LD   R30,X
                 _0xE0:
000142 bbe8      	OUT  0x18,R30
                 ;     165                 }
                 ;     166 			}
                 ;     167 			else if ((count_col > columeL) && (count_col < columeH)){				
000143 c040      	RJMP _0x13
                 _0x10:
000144 91e0 037c 	LDS  R30,_columeL_G1
000146 91f0 037d 	LDS  R31,_columeL_G1+1
000148 15e6      	CP   R30,R6
000149 05f7      	CPC  R31,R7
00014a f438      	BRSH _0x15
00014b 91e0 037a 	LDS  R30,_columeH_G1
00014d 91f0 037b 	LDS  R31,_columeH_G1+1
00014f 166e      	CP   R6,R30
000150 067f      	CPC  R7,R31
000151 f008      	BRLO _0x16
                 _0x15:
000152 c01e      	RJMP _0x14
                 _0x16:
                 ;     168 				if (is_show_bkgnd){
000153 fe20      	SBRS R2,0
000154 c015      	RJMP _0x17
                 ;     169 				    DATA_PORT = (*buffer)&(bkgnd_mem[count_col+SCREEN_WIDTH*count_row]);								
000155 91a0 0168 	LDS  R26,_buffer_G1
000157 91b0 0169 	LDS  R27,_buffer_G1+1
000159 918c      	LD   R24,X
00015a 01f2      	MOVW R30,R4
00015b eca8      	LDI  R26,LOW(200)
00015c e0b0      	LDI  R27,HIGH(200)
00015d 940e 0d18 	CALL __MULW12U
00015f 0de6      	ADD  R30,R6
000160 1df7      	ADC  R31,R7
000161 91a0 016a 	LDS  R26,_bkgnd_mem_G1
000163 91b0 016b 	LDS  R27,_bkgnd_mem_G1+1
000165 0fae      	ADD  R26,R30
000166 1fbf      	ADC  R27,R31
000167 91ec      	LD   R30,X
000168 23e8      	AND  R30,R24
000169 c005      	RJMP _0xE1
                 ;     170 				}                                                    
                 ;     171 				else{
                 _0x17:
                 ;     172 				    DATA_PORT = (*buffer);
00016a 91a0 0168 	LDS  R26,_buffer_G1
00016c 91b0 0169 	LDS  R27,_buffer_G1+1
00016e 91ec      	LD   R30,X
                 _0xE1:
00016f bbe8      	OUT  0x18,R30
                 ;     173 				}
                 ;     174 			}
                 ;     175 			else{                  
000170 c013      	RJMP _0x19
                 _0x14:
                 ;     176 			    if (is_show_bkgnd){
000171 fe20      	SBRS R2,0
000172 c00f      	RJMP _0x1A
                 ;     177     	    		DATA_PORT = (bkgnd_mem[count_col+SCREEN_WIDTH*count_row]);                				
000173 01f2      	MOVW R30,R4
000174 eca8      	LDI  R26,LOW(200)
000175 e0b0      	LDI  R27,HIGH(200)
000176 940e 0d18 	CALL __MULW12U
000178 0de6      	ADD  R30,R6
000179 1df7      	ADC  R31,R7
00017a 91a0 016a 	LDS  R26,_bkgnd_mem_G1
00017c 91b0 016b 	LDS  R27,_bkgnd_mem_G1+1
00017e 0fae      	ADD  R26,R30
00017f 1fbf      	ADC  R27,R31
000180 91ec      	LD   R30,X
000181 c001      	RJMP _0xE2
                 ;     178     	        }
                 ;     179     	        else{
                 _0x1A:
                 ;     180     	            DATA_PORT = 0xFF;
000182 efef      	LDI  R30,LOW(255)
                 _0xE2:
000183 bbe8      	OUT  0x18,R30
                 ;     181     	        }
                 ;     182 			}                                                               			
                 _0x19:
                 _0x13:
                 ;     183         #ifdef ENABLE_MASK_ROW  
                 ;     184             DATA_PORT |= ENABLE_MASK_ROW;
000184 b3e8      	IN   R30,0x18
000185 6fe0      	ORI  R30,LOW(0xF0)
000186 c01c      	RJMP _0xE3
                 ;     185         #endif //ENABLE_MASK_ROW
                 ;     186         }
                 ;     187         else		 
                 _0xF:
                 ;     188    #endif
                 ;     189    	    {  
                 ;     190    	        if (is_show_bkgnd){           
000187 fe20      	SBRS R2,0
000188 c015      	RJMP _0x1D
                 ;     191                 DATA_PORT = (*buffer)&(bkgnd_mem[count_col+SCREEN_WIDTH*count_row]);
000189 91a0 0168 	LDS  R26,_buffer_G1
00018b 91b0 0169 	LDS  R27,_buffer_G1+1
00018d 918c      	LD   R24,X
00018e 01f2      	MOVW R30,R4
00018f eca8      	LDI  R26,LOW(200)
000190 e0b0      	LDI  R27,HIGH(200)
000191 940e 0d18 	CALL __MULW12U
000193 0de6      	ADD  R30,R6
000194 1df7      	ADC  R31,R7
000195 91a0 016a 	LDS  R26,_bkgnd_mem_G1
000197 91b0 016b 	LDS  R27,_bkgnd_mem_G1+1
000199 0fae      	ADD  R26,R30
00019a 1fbf      	ADC  R27,R31
00019b 91ec      	LD   R30,X
00019c 23e8      	AND  R30,R24
00019d c005      	RJMP _0xE3
                 ;     192             }
                 ;     193             else{                    
                 _0x1D:
                 ;     194                 DATA_PORT = (*buffer);
00019e 91a0 0168 	LDS  R26,_buffer_G1
0001a0 91b0 0169 	LDS  R27,_buffer_G1+1
0001a2 91ec      	LD   R30,X
                 _0xE3:
0001a3 bbe8      	OUT  0x18,R30
                 ;     195             }                         
                 ;     196         }              
                 ;     197 
                 ;     198         DATA_CLK = 1;    // clock high
0001a4 9a3a      	SBI  0x7,2
                 ;     199         DATA_CLK = 0;    // clock low   
0001a5 983a      	CBI  0x7,2
                 ;     200         if ( ++count_col >= SCREEN_WIDTH)
0001a6 01f3      	MOVW R30,R6
0001a7 9631      	ADIW R30,1
0001a8 013f      	MOVW R6,R30
0001a9 3ce8      	CPI  R30,LOW(0xC8)
0001aa e0a0      	LDI  R26,HIGH(0xC8)
0001ab 07fa      	CPC  R31,R26
0001ac f0d8      	BRLO _0x1F
                 ;     201         {                                            
                 ;     202             count_col = 0;      // reset for next            
0001ad 2466      	CLR  R6
0001ae 2477      	CLR  R7
                 ;     203             
                 ;     204 #ifndef __ANTI_SHADOW_
                 ;     205             SCAN_CLK = 1;       // clock scan high
                 ;     206             SCAN_CLK = 0;       // clock scan low
                 ;     207                                                                           
                 ;     208             SCAN_STB = 1;       // strobe scan high
                 ;     209             DATA_STB = 1;       // strobe high            
                 ;     210             SCAN_STB = 0;       // strobe scan low
                 ;     211             DATA_STB = 0;       // strobe low                        
                 ;     212                 
                 ;     213             SCAN_DAT = OFF;     // data scan low            
                 ;     214 #else                      
                 ;     215                                                                                                
                 ;     216             _powerOff();        // turn all led off            
0001af 940e 00bf 	CALL __powerOff_G1
                 ;     217             _setRow();          // turn row-led on
0001b1 940e 00a9 	CALL __setRow_G1
                 ;     218                                                               
                 ;     219             SCAN_STB = 1;       // strobe high            
0001b3 9a94      	SBI  0x12,4
                 ;     220             SCAN_STB = 0;       // strobe low        
0001b4 9894      	CBI  0x12,4
                 ;     221             DATA_STB = 1;       // strobe high            
0001b5 9a38      	SBI  0x7,0
                 ;     222             DATA_STB = 0;       // strobe low            
0001b6 9838      	CBI  0x7,0
                 ;     223                         
                 ;     224 #endif          
                 ;     225             if (++count_row >= 8)
0001b7 01f2      	MOVW R30,R4
0001b8 9631      	ADIW R30,1
0001b9 012f      	MOVW R4,R30
0001ba 9738      	SBIW R30,8
0001bb f010      	BRLO _0x20
                 ;     226             { 
                 ;     227                 count_row = 0;
0001bc 2444      	CLR  R4
0001bd 2455      	CLR  R5
                 ;     228             #ifndef __ANTI_SHADOW_       
                 ;     229                 SCAN_DAT = ON;                
                 ;     230                 if ((sys_mode&MODE_POWER)==0){
                 ;     231                     SCAN_DAT = OFF;                                
                 ;     232                 }                    
                 ;     233             #endif
                 ;     234             }                                                                 
                 ;     235                         
                 ;     236             buffer += (DATA_LENGTH - SCREEN_WIDTH);                 
                 _0x20:
0001be 91e0 0168 	LDS  R30,_buffer_G1
0001c0 91f0 0169 	LDS  R31,_buffer_G1+1
0001c2 53e0      	SUBI R30,LOW(-3536)
0001c3 4ff2      	SBCI R31,HIGH(-3536)
0001c4 93e0 0168 	STS  _buffer_G1,R30
0001c6 93f0 0169 	STS  _buffer_G1+1,R31
                 ;     237         }           
                 ;     238     }                         	
                 _0x1F:
0001c8 91e0 0168 	LDS  R30,_buffer_G1
0001ca 91f0 0169 	LDS  R31,_buffer_G1+1
0001cc 9631      	ADIW R30,1
0001cd 93e0 0168 	STS  _buffer_G1,R30
0001cf 93f0 0169 	STS  _buffer_G1+1,R31
0001d1 cf23      	RJMP _0xD
                 _0xE:
                 ;     239 }     
0001d2 9508      	RET
                 ;     240                                   
                 ;     241 static void _doScroll()
                 ;     242 {
                 __doScroll_G1:
                 ;     243     // init state                         
                 ;     244     DATA_STB = 0;
0001d3 9838      	CBI  0x7,0
                 ;     245     DATA_CLK = 0;   
0001d4 983a      	CBI  0x7,2
                 ;     246                         
                 ;     247     // check power off state ...
                 ;     248     if ((sys_mode & MODE_POWER)==0) {
0001d5 91e0 0171 	LDS  R30,_sys_mode_G1
0001d7 72e0      	ANDI R30,LOW(0x20)
0001d8 f419      	BRNE _0x21
                 ;     249         _powerOff();return;
0001d9 940e 00bf 	CALL __powerOff_G1
0001db 9508      	RET
                 ;     250     }
                 ;     251     if ((sys_mode & MODE_STOP)==MODE_STOP) return;
                 _0x21:
0001dc 91e0 0171 	LDS  R30,_sys_mode_G1
0001de 71e0      	ANDI R30,LOW(0x10)
0001df 31e0      	CPI  R30,LOW(0x10)
0001e0 f409      	BRNE _0x22
0001e1 9508      	RET
                 ;     252                         
                 ;     253     // scroll left with shift_step bit(s)
                 ;     254     if(count_shift >= shift_rate)
                 _0x22:
0001e2 91e0 016f 	LDS  R30,_shift_rate_G1
0001e4 91a0 0174 	LDS  R26,_count_shift_G1
0001e6 91b0 0175 	LDS  R27,_count_shift_G1+1
0001e8 e0f0      	LDI  R31,0
0001e9 17ae      	CP   R26,R30
0001ea 07bf      	CPC  R27,R31
0001eb f410      	BRSH PC+3
0001ec 940c 03ac 	JMP _0x23
                 ;     255     {                             
                 ;     256         count_shift = 0;          
0001ee e0e0      	LDI  R30,0
0001ef 93e0 0174 	STS  _count_shift_G1,R30
0001f1 93e0 0175 	STS  _count_shift_G1+1,R30
                 ;     257     #ifdef __FLYING_TEXT_
                 ;     258         if ((sys_mode&MASK_MODE)==FLYING_TEXT || (sys_mode&MASK_MODE)==ALL_IN_ONE)
0001f3 91e0 0171 	LDS  R30,_sys_mode_G1
0001f5 70ef      	ANDI R30,LOW(0xF)
0001f6 30e1      	CPI  R30,LOW(0x1)
0001f7 f031      	BREQ _0x25
0001f8 91e0 0171 	LDS  R30,_sys_mode_G1
0001fa 70ef      	ANDI R30,LOW(0xF)
0001fb 30ef      	CPI  R30,LOW(0xF)
0001fc f009      	BREQ _0x25
0001fd c05a      	RJMP _0x24
                 _0x25:
                 ;     259         {
                 ;     260             if (current_char_width >= SCREEN_WIDTH)
0001fe 91a0 0382 	LDS  R26,_current_char_width_G1
000200 91b0 0383 	LDS  R27,_current_char_width_G1+1
000202 3ca8      	CPI  R26,LOW(0xC8)
000203 e0e0      	LDI  R30,HIGH(0xC8)
000204 07be      	CPC  R27,R30
000205 f050      	BRLO _0x27
                 ;     261     		{     		       
                 ;     262 			   start_mem += shift_step;		
000206 91e0 0170 	LDS  R30,_shift_step_G1
000208 91a0 0164 	LDS  R26,_start_mem_G1
00020a 91b0 0165 	LDS  R27,_start_mem_G1+1
00020c e0f0      	LDI  R31,0
00020d 0fea      	ADD  R30,R26
00020e 1ffb      	ADC  R31,R27
00020f c043      	RJMP _0xE4
                 ;     263 	    	}
                 ;     264 		    else
                 _0x27:
                 ;     265 		    if (is_flipping_bk==0)
000210 fc21      	SBRC R2,1
000211 c045      	RJMP _0x29
                 ;     266 		    {
                 ;     267 			    start_mem += (SCREEN_WIDTH/20);
000212 91e0 0164 	LDS  R30,_start_mem_G1
000214 91f0 0165 	LDS  R31,_start_mem_G1+1
000216 963a      	ADIW R30,10
000217 93e0 0164 	STS  _start_mem_G1,R30
000219 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     268     			if (start_mem > (START_RAM_TEXT + SCREEN_WIDTH) - current_char_width)
00021b 91a0 0382 	LDS  R26,_current_char_width_G1
00021d 91b0 0383 	LDS  R27,_current_char_width_G1+1
00021f e0e8      	LDI  R30,LOW(3080)
000220 e0fc      	LDI  R31,HIGH(3080)
000221 1bea      	SUB  R30,R26
000222 0bfb      	SBC  R31,R27
000223 91a0 0164 	LDS  R26,_start_mem_G1
000225 91b0 0165 	LDS  R27,_start_mem_G1+1
000227 17ea      	CP   R30,R26
000228 07fb      	CPC  R31,R27
000229 f568      	BRSH _0x2A
                 ;     269 	    		{
                 ;     270 		    		char_index++;				 
00022a 91e0 037e 	LDS  R30,_char_index_G1
00022c 91f0 037f 	LDS  R31,_char_index_G1+1
00022e 9631      	ADIW R30,1
00022f 93e0 037e 	STS  _char_index_G1,R30
000231 93f0 037f 	STS  _char_index_G1+1,R31
                 ;     271 			    	current_char_width = char_width[char_index];
000233 e7aa      	LDI  R26,LOW(_char_width_G1)
000234 e0b1      	LDI  R27,HIGH(_char_width_G1)
000235 0fee      	LSL  R30
000236 1fff      	ROL  R31
000237 0fae      	ADD  R26,R30
000238 1fbf      	ADC  R27,R31
000239 940e 0d46 	CALL __GETW1P
00023b 93e0 0382 	STS  _current_char_width_G1,R30
00023d 93f0 0383 	STS  _current_char_width_G1+1,R31
                 ;     272 				    next_char_width = char_width[char_index+1];				
00023f 91a0 037e 	LDS  R26,_char_index_G1
000241 91b0 037f 	LDS  R27,_char_index_G1+1
000243 0faa      	LSL  R26
000244 1fbb      	ROL  R27
000245 58a4
000246 4fbe      	__ADDW2MN _char_width_G1,2
000247 940e 0d46 	CALL __GETW1P
000249 93e0 0380 	STS  _next_char_width_G1,R30
00024b 93f0 0381 	STS  _next_char_width_G1+1,R31
                 ;     273     				start_mem = START_RAM_TEXT + current_char_width;
00024d 91e0 0382 	LDS  R30,_current_char_width_G1
00024f 91f0 0383 	LDS  R31,_current_char_width_G1+1
000251 5ce0      	SUBI R30,LOW(-2880)
000252 4ff4      	SBCI R31,HIGH(-2880)
                 _0xE4:
000253 93e0 0164 	STS  _start_mem_G1,R30
000255 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     274 	    		}
                 ;     275 		    }
                 _0x2A:
                 ;     276         }
                 _0x29:
                 ;     277         else
000257 c00d      	RJMP _0x2B
                 _0x24:
                 ;     278     #endif //__FLYING_TEXT_
                 ;     279     #ifdef __SCROLL_TEXT_
                 ;     280         {
                 ;     281             start_mem += shift_step;
000258 91e0 0170 	LDS  R30,_shift_step_G1
00025a 91a0 0164 	LDS  R26,_start_mem_G1
00025c 91b0 0165 	LDS  R27,_start_mem_G1+1
00025e e0f0      	LDI  R31,0
00025f 0fea      	ADD  R30,R26
000260 1ffb      	ADC  R31,R27
000261 93e0 0164 	STS  _start_mem_G1,R30
000263 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     282         } 
                 _0x2B:
                 ;     283     #endif //__SCROLL_TEXT_      		
                 ;     284         if (start_mem >= (START_RAM_TEXT + SCREEN_WIDTH + SCREEN_HIDE)+ text_length)          
000265 91e0 0178 	LDS  R30,_text_length_G1
000267 91f0 0179 	LDS  R31,_text_length_G1+1
000269 5ee8      	SUBI R30,LOW(-3096)
00026a 4ff3      	SBCI R31,HIGH(-3096)
00026b 91a0 0164 	LDS  R26,_start_mem_G1
00026d 91b0 0165 	LDS  R27,_start_mem_G1+1
00026f 17ae      	CP   R26,R30
000270 07bf      	CPC  R27,R31
000271 f410      	BRSH PC+3
000272 940c 03ac 	JMP _0x2C
                 ;     285         {   
                 ;     286         #ifdef __FLYING_TEXT_                                                                                      
                 ;     287             if ((sys_mode&MASK_MODE)==FLYING_TEXT || (sys_mode&MASK_MODE)==ALL_IN_ONE){                
000274 91e0 0171 	LDS  R30,_sys_mode_G1
000276 70ef      	ANDI R30,LOW(0xF)
000277 30e1      	CPI  R30,LOW(0x1)
000278 f029      	BREQ _0x2E
000279 91e0 0171 	LDS  R30,_sys_mode_G1
00027b 70ef      	ANDI R30,LOW(0xF)
00027c 30ef      	CPI  R30,LOW(0xF)
00027d f5a9      	BRNE _0x2D
                 _0x2E:
                 ;     288                 char_index = 0;              
00027e e0e0      	LDI  R30,0
00027f 93e0 037e 	STS  _char_index_G1,R30
000281 93e0 037f 	STS  _char_index_G1+1,R30
                 ;     289                 shift_rate = _cfg_shift_rate;
000283 e0a2      	LDI  R26,LOW(__cfg_shift_rate)
000284 e0b0      	LDI  R27,HIGH(__cfg_shift_rate)
000285 940e 0d4e 	CALL __EEPROMRDB
000287 93e0 016f 	STS  _shift_rate_G1,R30
                 ;     290                 shift_step = _cfg_shift_step;
000289 e0a3      	LDI  R26,LOW(__cfg_shift_step)
00028a e0b0      	LDI  R27,HIGH(__cfg_shift_step)
00028b 940e 0d4e 	CALL __EEPROMRDB
00028d 93e0 0170 	STS  _shift_step_G1,R30
                 ;     291                 current_char_width = char_width[char_index];
00028f 91e0 037e 	LDS  R30,_char_index_G1
000291 91f0 037f 	LDS  R31,_char_index_G1+1
000293 e7aa      	LDI  R26,LOW(_char_width_G1)
000294 e0b1      	LDI  R27,HIGH(_char_width_G1)
000295 0fee      	LSL  R30
000296 1fff      	ROL  R31
000297 0fae      	ADD  R26,R30
000298 1fbf      	ADC  R27,R31
000299 940e 0d46 	CALL __GETW1P
00029b 93e0 0382 	STS  _current_char_width_G1,R30
00029d 93f0 0383 	STS  _current_char_width_G1+1,R31
                 ;     292     		    next_char_width = char_width[char_index+1];	  
00029f 91a0 037e 	LDS  R26,_char_index_G1
0002a1 91b0 037f 	LDS  R27,_char_index_G1+1
0002a3 0faa      	LSL  R26
0002a4 1fbb      	ROL  R27
0002a5 58a4
0002a6 4fbe      	__ADDW2MN _char_width_G1,2
0002a7 940e 0d46 	CALL __GETW1P
0002a9 93e0 0380 	STS  _next_char_width_G1,R30
0002ab 93f0 0381 	STS  _next_char_width_G1+1,R31
                 ;     293                 start_mem = START_RAM_TEXT;                    		    
0002ad e4e0      	LDI  R30,LOW(2880)
0002ae e0fb      	LDI  R31,HIGH(2880)
0002af 93e0 0164 	STS  _start_mem_G1,R30
0002b1 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     294             }    
                 ;     295         #ifndef __ALL_IN_ONE_
                 ;     296             else
                 ;     297         #endif //__ALL_IN_ONE_
                 ;     298         #endif //__FLYING_TEXT_
                 ;     299         #ifdef __FLIPPING_BK_  
                 ;     300             if ((sys_mode&MASK_MODE)==FLIPPING_BK || (sys_mode&MASK_MODE)==ALL_IN_ONE){                              
                 _0x2D:
0002b3 91e0 0171 	LDS  R30,_sys_mode_G1
0002b5 70ef      	ANDI R30,LOW(0xF)
0002b6 30e2      	CPI  R30,LOW(0x2)
0002b7 f031      	BREQ _0x31
0002b8 91e0 0171 	LDS  R30,_sys_mode_G1
0002ba 70ef      	ANDI R30,LOW(0xF)
0002bb 30ef      	CPI  R30,LOW(0xF)
0002bc f009      	BREQ _0x31
0002bd c0d2      	RJMP _0x30
                 _0x31:
                 ;     301                 if (tick_count <= MAX_SHOW_TIME){
0002be 91a0 0172 	LDS  R26,_tick_count_G1
0002c0 91b0 0173 	LDS  R27,_tick_count_G1+1
0002c2 3ea9      	CPI  R26,LOW(0x3E9)
0002c3 e0e3      	LDI  R30,HIGH(0x3E9)
0002c4 07be      	CPC  R27,R30
0002c5 f450      	BRSH _0x33
                 ;     302                     is_show_bkgnd = 1;
0002c6 9468      	SET
0002c7 f820      	BLD  R2,0
                 ;     303                     is_flipping_bk = 1;
0002c8 f821      	BLD  R2,1
                 ;     304                     start_mem = (START_RAM_TEXT + SCREEN_WIDTH + SCREEN_HIDE)+ text_length;                       
0002c9 91e0 0178 	LDS  R30,_text_length_G1
0002cb 91f0 0179 	LDS  R31,_text_length_G1+1
0002cd 5ee8      	SUBI R30,LOW(-3096)
0002ce 4ff3      	SBCI R31,HIGH(-3096)
0002cf c0bb      	RJMP _0xE5
                 ;     305                 }
                 ;     306                 else
                 _0x33:
                 ;     307                 if ((MAX_SHOW_TIME < tick_count) && (tick_count <= 5*MAX_SHOW_TIME/3)){
0002d0 91e0 0172 	LDS  R30,_tick_count_G1
0002d2 91f0 0173 	LDS  R31,_tick_count_G1+1
0002d4 3ee9      	CPI  R30,LOW(0x3E9)
0002d5 e0a3      	LDI  R26,HIGH(0x3E9)
0002d6 07fa      	CPC  R31,R26
0002d7 f040      	BRLO _0x36
0002d8 91a0 0172 	LDS  R26,_tick_count_G1
0002da 91b0 0173 	LDS  R27,_tick_count_G1+1
0002dc 38a3      	CPI  R26,LOW(0x683)
0002dd e0e6      	LDI  R30,HIGH(0x683)
0002de 07be      	CPC  R27,R30
0002df f008      	BRLO _0x37
                 _0x36:
0002e0 c00b      	RJMP _0x35
                 _0x37:
                 ;     308                     is_show_bkgnd = 0;
0002e1 94e8      	CLT
0002e2 f820      	BLD  R2,0
                 ;     309                     is_flipping_bk = 1;
0002e3 9468      	SET
0002e4 f821      	BLD  R2,1
                 ;     310                     start_mem = (START_RAM_TEXT + SCREEN_WIDTH + SCREEN_HIDE)+ text_length;
0002e5 91e0 0178 	LDS  R30,_text_length_G1
0002e7 91f0 0179 	LDS  R31,_text_length_G1+1
0002e9 5ee8      	SUBI R30,LOW(-3096)
0002ea 4ff3      	SBCI R31,HIGH(-3096)
0002eb c09f      	RJMP _0xE5
                 ;     311                 }
                 ;     312                 else
                 _0x35:
                 ;     313                 if ((5*MAX_SHOW_TIME/3 < tick_count) && (tick_count <= 6*MAX_SHOW_TIME/3)){
0002ec 91e0 0172 	LDS  R30,_tick_count_G1
0002ee 91f0 0173 	LDS  R31,_tick_count_G1+1
0002f0 38e3      	CPI  R30,LOW(0x683)
0002f1 e0a6      	LDI  R26,HIGH(0x683)
0002f2 07fa      	CPC  R31,R26
0002f3 f040      	BRLO _0x3A
0002f4 91a0 0172 	LDS  R26,_tick_count_G1
0002f6 91b0 0173 	LDS  R27,_tick_count_G1+1
0002f8 3da1      	CPI  R26,LOW(0x7D1)
0002f9 e0e7      	LDI  R30,HIGH(0x7D1)
0002fa 07be      	CPC  R27,R30
0002fb f008      	BRLO _0x3B
                 _0x3A:
0002fc c00a      	RJMP _0x39
                 _0x3B:
                 ;     314                     is_show_bkgnd = 1;
0002fd 9468      	SET
0002fe f820      	BLD  R2,0
                 ;     315                     is_flipping_bk = 1;
0002ff f821      	BLD  R2,1
                 ;     316                     start_mem = (START_RAM_TEXT + SCREEN_WIDTH + SCREEN_HIDE)+ text_length;
000300 91e0 0178 	LDS  R30,_text_length_G1
000302 91f0 0179 	LDS  R31,_text_length_G1+1
000304 5ee8      	SUBI R30,LOW(-3096)
000305 4ff3      	SBCI R31,HIGH(-3096)
000306 c084      	RJMP _0xE5
                 ;     317                 }
                 ;     318                 else
                 _0x39:
                 ;     319                 if ((6*MAX_SHOW_TIME/3 < tick_count) && (tick_count <= 7*MAX_SHOW_TIME/3)){
000307 91e0 0172 	LDS  R30,_tick_count_G1
000309 91f0 0173 	LDS  R31,_tick_count_G1+1
00030b 3de1      	CPI  R30,LOW(0x7D1)
00030c e0a7      	LDI  R26,HIGH(0x7D1)
00030d 07fa      	CPC  R31,R26
00030e f040      	BRLO _0x3E
00030f 91a0 0172 	LDS  R26,_tick_count_G1
000311 91b0 0173 	LDS  R27,_tick_count_G1+1
000313 31ae      	CPI  R26,LOW(0x91E)
000314 e0e9      	LDI  R30,HIGH(0x91E)
000315 07be      	CPC  R27,R30
000316 f008      	BRLO _0x3F
                 _0x3E:
000317 c00b      	RJMP _0x3D
                 _0x3F:
                 ;     320                     is_show_bkgnd = 0;
000318 94e8      	CLT
000319 f820      	BLD  R2,0
                 ;     321                     is_flipping_bk = 1;
00031a 9468      	SET
00031b f821      	BLD  R2,1
                 ;     322                     start_mem = (START_RAM_TEXT + SCREEN_WIDTH + SCREEN_HIDE)+ text_length;
00031c 91e0 0178 	LDS  R30,_text_length_G1
00031e 91f0 0179 	LDS  R31,_text_length_G1+1
000320 5ee8      	SUBI R30,LOW(-3096)
000321 4ff3      	SBCI R31,HIGH(-3096)
000322 c068      	RJMP _0xE5
                 ;     323                 }
                 ;     324                 else
                 _0x3D:
                 ;     325                 if ((7*MAX_SHOW_TIME/3 < tick_count) && (tick_count <= 8*MAX_SHOW_TIME/3)){
000323 91e0 0172 	LDS  R30,_tick_count_G1
000325 91f0 0173 	LDS  R31,_tick_count_G1+1
000327 31ee      	CPI  R30,LOW(0x91E)
000328 e0a9      	LDI  R26,HIGH(0x91E)
000329 07fa      	CPC  R31,R26
00032a f040      	BRLO _0x42
00032b 91a0 0172 	LDS  R26,_tick_count_G1
00032d 91b0 0173 	LDS  R27,_tick_count_G1+1
00032f 36ab      	CPI  R26,LOW(0xA6B)
000330 e0ea      	LDI  R30,HIGH(0xA6B)
000331 07be      	CPC  R27,R30
000332 f008      	BRLO _0x43
                 _0x42:
000333 c00a      	RJMP _0x41
                 _0x43:
                 ;     326                     is_show_bkgnd = 1;
000334 9468      	SET
000335 f820      	BLD  R2,0
                 ;     327                     is_flipping_bk = 1;
000336 f821      	BLD  R2,1
                 ;     328                     start_mem = (START_RAM_TEXT + SCREEN_WIDTH + SCREEN_HIDE)+ text_length;
000337 91e0 0178 	LDS  R30,_text_length_G1
000339 91f0 0179 	LDS  R31,_text_length_G1+1
00033b 5ee8      	SUBI R30,LOW(-3096)
00033c 4ff3      	SBCI R31,HIGH(-3096)
00033d c04d      	RJMP _0xE5
                 ;     329                 }
                 ;     330                 else
                 _0x41:
                 ;     331                 if ((8*MAX_SHOW_TIME/3 < tick_count) && (tick_count <= 9*MAX_SHOW_TIME/3)){
00033e 91e0 0172 	LDS  R30,_tick_count_G1
000340 91f0 0173 	LDS  R31,_tick_count_G1+1
000342 36eb      	CPI  R30,LOW(0xA6B)
000343 e0aa      	LDI  R26,HIGH(0xA6B)
000344 07fa      	CPC  R31,R26
000345 f040      	BRLO _0x46
000346 91a0 0172 	LDS  R26,_tick_count_G1
000348 91b0 0173 	LDS  R27,_tick_count_G1+1
00034a 3ba9      	CPI  R26,LOW(0xBB9)
00034b e0eb      	LDI  R30,HIGH(0xBB9)
00034c 07be      	CPC  R27,R30
00034d f008      	BRLO _0x47
                 _0x46:
00034e c00b      	RJMP _0x45
                 _0x47:
                 ;     332                     is_show_bkgnd = 0;
00034f 94e8      	CLT
000350 f820      	BLD  R2,0
                 ;     333                     is_flipping_bk = 1;
000351 9468      	SET
000352 f821      	BLD  R2,1
                 ;     334                     start_mem = (START_RAM_TEXT + SCREEN_WIDTH + SCREEN_HIDE)+ text_length;
000353 91e0 0178 	LDS  R30,_text_length_G1
000355 91f0 0179 	LDS  R31,_text_length_G1+1
000357 5ee8      	SUBI R30,LOW(-3096)
000358 4ff3      	SBCI R31,HIGH(-3096)
000359 c031      	RJMP _0xE5
                 ;     335                 }
                 ;     336                 else
                 _0x45:
                 ;     337                 if ((9*MAX_SHOW_TIME/3 < tick_count) && (tick_count <= 10*MAX_SHOW_TIME/3)){
00035a 91e0 0172 	LDS  R30,_tick_count_G1
00035c 91f0 0173 	LDS  R31,_tick_count_G1+1
00035e 3be9      	CPI  R30,LOW(0xBB9)
00035f e0ab      	LDI  R26,HIGH(0xBB9)
000360 07fa      	CPC  R31,R26
000361 f040      	BRLO _0x4A
000362 91a0 0172 	LDS  R26,_tick_count_G1
000364 91b0 0173 	LDS  R27,_tick_count_G1+1
000366 30a6      	CPI  R26,LOW(0xD06)
000367 e0ed      	LDI  R30,HIGH(0xD06)
000368 07be      	CPC  R27,R30
000369 f008      	BRLO _0x4B
                 _0x4A:
00036a c00a      	RJMP _0x49
                 _0x4B:
                 ;     338                     is_show_bkgnd = 1;
00036b 9468      	SET
00036c f820      	BLD  R2,0
                 ;     339                     is_flipping_bk = 1;
00036d f821      	BLD  R2,1
                 ;     340                     start_mem = (START_RAM_TEXT + SCREEN_WIDTH + SCREEN_HIDE)+ text_length;
00036e 91e0 0178 	LDS  R30,_text_length_G1
000370 91f0 0179 	LDS  R31,_text_length_G1+1
000372 5ee8      	SUBI R30,LOW(-3096)
000373 4ff3      	SBCI R31,HIGH(-3096)
000374 c016      	RJMP _0xE5
                 ;     341                 }     
                 ;     342                 else{ 
                 _0x49:
                 ;     343                     tick_count = 0;
000375 e0e0      	LDI  R30,0
000376 93e0 0172 	STS  _tick_count_G1,R30
000378 93e0 0173 	STS  _tick_count_G1+1,R30
                 ;     344                     is_show_bkgnd = 0;
00037a 94e8      	CLT
00037b f820      	BLD  R2,0
                 ;     345                     is_flipping_bk = 0;      
00037c f821      	BLD  R2,1
                 ;     346                     shift_rate = _cfg_shift_rate;
00037d e0a2      	LDI  R26,LOW(__cfg_shift_rate)
00037e e0b0      	LDI  R27,HIGH(__cfg_shift_rate)
00037f 940e 0d4e 	CALL __EEPROMRDB
000381 93e0 016f 	STS  _shift_rate_G1,R30
                 ;     347                     shift_step = _cfg_shift_step;
000383 e0a3      	LDI  R26,LOW(__cfg_shift_step)
000384 e0b0      	LDI  R27,HIGH(__cfg_shift_step)
000385 940e 0d4e 	CALL __EEPROMRDB
000387 93e0 0170 	STS  _shift_step_G1,R30
                 ;     348                     start_mem = START_RAM_TEXT;
000389 e4e0      	LDI  R30,LOW(2880)
00038a e0fb      	LDI  R31,HIGH(2880)
                 _0xE5:
00038b 93e0 0164 	STS  _start_mem_G1,R30
00038d 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     349                 }
                 ;     350             }
                 ;     351             else
00038f c01c      	RJMP _0x4D
                 _0x30:
                 ;     352         #endif //__FLIPPING_BK_              
                 ;     353         #ifdef __ALWAY_BKGND_
                 ;     354             if ((sys_mode&MASK_MODE)==ALWAY_BKGND){   
000390 91e0 0171 	LDS  R30,_sys_mode_G1
000392 70ef      	ANDI R30,LOW(0xF)
000393 30e3      	CPI  R30,LOW(0x3)
000394 f419      	BRNE _0x4E
                 ;     355                 is_show_bkgnd = 1;  // alway show the bakgnd
000395 9468      	SET
000396 f820      	BLD  R2,0
                 ;     356                 shift_rate = _cfg_shift_rate;
000397 c002      	RJMP _0xE6
                 ;     357                 shift_step = _cfg_shift_step;
                 ;     358                 start_mem = START_RAM_TEXT;
                 ;     359             }
                 ;     360         #ifdef __SCROLL_TEXT_
                 ;     361             else                
                 _0x4E:
                 ;     362         #endif //__SCROLL_TEXT_
                 ;     363         #endif //__ALWAY_BKGND_    
                 ;     364         #ifdef __SCROLL_TEXT_
                 ;     365             {                              
                 ;     366                 is_show_bkgnd = 0;  // disable background
000398 94e8      	CLT
000399 f820      	BLD  R2,0
                 ;     367                 shift_rate = _cfg_shift_rate;
                 _0xE6:
00039a e0a2      	LDI  R26,LOW(__cfg_shift_rate)
00039b e0b0      	LDI  R27,HIGH(__cfg_shift_rate)
00039c 940e 0d4e 	CALL __EEPROMRDB
00039e 93e0 016f 	STS  _shift_rate_G1,R30
                 ;     368                 shift_step = _cfg_shift_step;
0003a0 e0a3      	LDI  R26,LOW(__cfg_shift_step)
0003a1 e0b0      	LDI  R27,HIGH(__cfg_shift_step)
0003a2 940e 0d4e 	CALL __EEPROMRDB
0003a4 93e0 0170 	STS  _shift_step_G1,R30
                 ;     369                 start_mem = START_RAM_TEXT;
0003a6 e4e0      	LDI  R30,LOW(2880)
0003a7 e0fb      	LDI  R31,HIGH(2880)
0003a8 93e0 0164 	STS  _start_mem_G1,R30
0003aa 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     370             }                   
                 _0x4D:
                 ;     371         #endif //__SCROLL_TEXT_
                 ;     372         }
                 ;     373     }        
                 _0x2C:
                 ;     374 
                 ;     375 }          
                 _0x23:
0003ac 9508      	RET
                 ;     376 ////////////////////////////////////////////////////////////////////
                 ;     377 // General functions
                 ;     378 //////////////////////////////////////////////////////////////////// 
                 ;     379 #define RESET_WATCHDOG()    #asm("WDR");
                 ;     380 
                 ;     381 void SerialToRAM(WORD address,WORD length, BYTE type)                                             
                 ;     382 {
                 _SerialToRAM:
                 ;     383     PBYTE temp = 0;          
                 ;     384     UINT i =0, row =0;     				
                 ;     385     temp   = address;    
0003ad 940e 0d71 	CALL __SAVELOCR6
                 ;	address -> Y+9
                 ;	length -> Y+7
                 ;	type -> Y+6
                 ;	*temp -> R16,R17
                 ;	i -> R18,R19
                 ;	row -> R20,R21
0003af e000      	LDI  R16,LOW(0x00)
0003b0 e010      	LDI  R17,HIGH(0x00)
0003b1 e020      	LDI  R18,0
0003b2 e030      	LDI  R19,0
0003b3 e040      	LDI  R20,0
0003b4 e050      	LDI  R21,0
0003b5 8509
0003b6 851a      	__GETWRS 16,17,9
                 ;     386     LED_STATUS = 0;
0003b7 98c4      	CBI  0x18,4
                 ;     387     for (row =0; row < 8; row++)
0003b8 e040
0003b9 e050      	__GETWRN 20,21,0
                 _0x51:
0003ba 3048
0003bb e0e0
0003bc 075e      	__CPWRN 20,21,8
0003bd f010      	BRLO PC+3
0003be 940c 03e7 	JMP _0x52
                 ;     388     {
                 ;     389         for (i =0; i< length; i++) 
0003c0 e020
0003c1 e030      	__GETWRN 18,19,0
                 _0x54:
0003c2 81ef      	LDD  R30,Y+7
0003c3 85f8      	LDD  R31,Y+7+1
0003c4 172e      	CP   R18,R30
0003c5 073f      	CPC  R19,R31
0003c6 f010      	BRLO PC+3
0003c7 940c 03d8 	JMP _0x55
                 ;     390         {
                 ;     391             *temp++ = ~getchar();
0003c9 931f      	PUSH R17
0003ca 930f      	PUSH R16
0003cb 5f0f
0003cc 4f1f      	__ADDWRN 16,17,1
0003cd 940e 0c3f 	CALL _getchar
0003cf 95e0      	COM  R30
0003d0 91af      	POP  R26
0003d1 91bf      	POP  R27
0003d2 93ec      	ST   X,R30
                 ;     392             RESET_WATCHDOG();
0003d3 95a8      	WDR
                 ;     393         }                               
0003d4 5f2f
0003d5 4f3f      	__ADDWRN 18,19,1
0003d6 940c 03c2 	JMP  _0x54
                 _0x55:
                 ;     394         if (type == FRAME_TEXT)   
0003d8 81ee      	LDD  R30,Y+6
0003d9 30e0      	CPI  R30,0
0003da f441      	BRNE _0x56
                 ;     395             temp += DATA_LENGTH - length;        
0003db 81af      	LDD  R26,Y+7
0003dc 85b8      	LDD  R27,Y+7+1
0003dd e9e8      	LDI  R30,LOW(3736)
0003de e0fe      	LDI  R31,HIGH(3736)
0003df 1bea      	SUB  R30,R26
0003e0 0bfb      	SBC  R31,R27
0003e1 0f0e
0003e2 1f1f      	__ADDWRR 16,17,30,31
                 ;     396     }              
                 _0x56:
0003e3 5f4f
0003e4 4f5f      	__ADDWRN 20,21,1
0003e5 940c 03ba 	JMP  _0x51
                 _0x52:
                 ;     397     LED_STATUS = 1;
0003e7 9ac4      	SBI  0x18,4
                 ;     398 }
0003e8 940e 0d78 	CALL __LOADLOCR6
0003ea 962b      	ADIW R28,11
0003eb 9508      	RET
                 ;     399 
                 ;     400 void LoadCharWidth(WORD length)
                 ;     401 {                               
                 _LoadCharWidth:
                 ;     402     UINT i =0;  
                 ;     403     LED_STATUS = 0;   
0003ec 931a      	ST   -Y,R17
0003ed 930a      	ST   -Y,R16
                 ;	length -> Y+2
                 ;	i -> R16,R17
0003ee e000      	LDI  R16,0
0003ef e010      	LDI  R17,0
0003f0 98c4      	CBI  0x18,4
                 ;     404     for (i =0; i < length; i++)
0003f1 e000
0003f2 e010      	__GETWRN 16,17,0
                 _0x58:
0003f3 81ea      	LDD  R30,Y+2
0003f4 81fb      	LDD  R31,Y+2+1
0003f5 170e      	CP   R16,R30
0003f6 071f      	CPC  R17,R31
0003f7 f010      	BRLO PC+3
0003f8 940c 0431 	JMP _0x59
                 ;     405     {                           
                 ;     406         WORD data = 0;
                 ;     407         data = getchar();                       // LOBYTE 
0003fa 9722      	SBIW R28,2
0003fb e082      	LDI  R24,2
0003fc e0a0      	LDI  R26,LOW(0)
0003fd e0b0      	LDI  R27,HIGH(0)
0003fe e7e0      	LDI  R30,LOW(_0x5A*2)
0003ff e0f0      	LDI  R31,HIGH(_0x5A*2)
000400 940e 0d7f 	CALL __INITLOCB
                 ;	length -> Y+4
                 ;	data -> Y+0
000402 940e 0c3f 	CALL _getchar
000404 e0f0      	LDI  R31,0
000405 83e8      	ST   Y,R30
000406 83f9      	STD  Y+1,R31
                 ;     408         RESET_WATCHDOG();       
000407 95a8      	WDR
                 ;     409         char_width[i] = data;        
000408 01f8      	MOVW R30,R16
000409 e7aa      	LDI  R26,LOW(_char_width_G1)
00040a e0b1      	LDI  R27,HIGH(_char_width_G1)
00040b 0fee      	LSL  R30
00040c 1fff      	ROL  R31
00040d 0fea      	ADD  R30,R26
00040e 1ffb      	ADC  R31,R27
00040f 81a8      	LD   R26,Y
000410 81b9      	LDD  R27,Y+1
000411 83a0      	STD  Z+0,R26
000412 83b1      	STD  Z+1,R27
                 ;     410         data = getchar();                       // HIBYTE
000413 940e 0c3f 	CALL _getchar
000415 e0f0      	LDI  R31,0
000416 83e8      	ST   Y,R30
000417 83f9      	STD  Y+1,R31
                 ;     411         RESET_WATCHDOG();
000418 95a8      	WDR
                 ;     412         char_width[i] |= (data<<8)&0xFF00;
000419 01f8      	MOVW R30,R16
00041a e7aa      	LDI  R26,LOW(_char_width_G1)
00041b e0b1      	LDI  R27,HIGH(_char_width_G1)
00041c 0fee      	LSL  R30
00041d 1fff      	ROL  R31
00041e 0fea      	ADD  R30,R26
00041f 1ffb      	ADC  R31,R27
000420 010f      	MOVW R0,R30
000421 01df      	MOVW R26,R30
000422 940e 0d46 	CALL __GETW1P
000424 01df      	MOVW R26,R30
000425 81f8      	LD   R31,Y
000426 e0e0      	LDI  R30,LOW(0)
000427 2bea      	OR   R30,R26
000428 2bfb      	OR   R31,R27
000429 01d0      	MOVW R26,R0
00042a 93ed      	ST   X+,R30
00042b 93fc      	ST   X,R31
                 ;     413     }                  
00042c 9622      	ADIW R28,2
00042d 5f0f
00042e 4f1f      	__ADDWRN 16,17,1
00042f 940c 03f3 	JMP  _0x58
                 _0x59:
                 ;     414     current_char_width = 0xFFFF;
000431 efef      	LDI  R30,LOW(65535)
000432 efff      	LDI  R31,HIGH(65535)
000433 93e0 0382 	STS  _current_char_width_G1,R30
000435 93f0 0383 	STS  _current_char_width_G1+1,R31
                 ;     415     
                 ;     416     LED_STATUS = 1;
000437 9ac4      	SBI  0x18,4
                 ;     417 }
000438 8119      	LDD  R17,Y+1
000439 8108      	LDD  R16,Y+0
00043a 9624      	ADIW R28,4
00043b 9508      	RET
                 ;     418 
                 ;     419 void SaveCharWidth(WORD length)
                 ;     420 {
                 _SaveCharWidth:
                 ;     421     UINT i =0;  
                 ;     422     LED_STATUS = 0;   
00043c 931a      	ST   -Y,R17
00043d 930a      	ST   -Y,R16
                 ;	length -> Y+2
                 ;	i -> R16,R17
00043e e000      	LDI  R16,0
00043f e010      	LDI  R17,0
000440 98c4      	CBI  0x18,4
                 ;     423     for (i =0; i < length; i++)
000441 e000
000442 e010      	__GETWRN 16,17,0
                 _0x5C:
000443 81ea      	LDD  R30,Y+2
000444 81fb      	LDD  R31,Y+2+1
000445 170e      	CP   R16,R30
000446 071f      	CPC  R17,R31
000447 f010      	BRLO PC+3
000448 940c 0463 	JMP _0x5D
                 ;     424     {                           
                 ;     425         _save_char_width[i] = char_width[i];
00044a 01f8      	MOVW R30,R16
00044b e0a6      	LDI  R26,LOW(__save_char_width)
00044c e0b0      	LDI  R27,HIGH(__save_char_width)
00044d 0fee      	LSL  R30
00044e 1fff      	ROL  R31
00044f 0fea      	ADD  R30,R26
000450 1ffb      	ADC  R31,R27
000451 010f      	MOVW R0,R30
000452 01f8      	MOVW R30,R16
000453 e7aa      	LDI  R26,LOW(_char_width_G1)
000454 e0b1      	LDI  R27,HIGH(_char_width_G1)
000455 0fee      	LSL  R30
000456 1fff      	ROL  R31
000457 0fae      	ADD  R26,R30
000458 1fbf      	ADC  R27,R31
000459 940e 0d46 	CALL __GETW1P
00045b 01d0      	MOVW R26,R0
00045c 940e 0d5a 	CALL __EEPROMWRW
                 ;     426         RESET_WATCHDOG();
00045e 95a8      	WDR
                 ;     427     }              
00045f 5f0f
000460 4f1f      	__ADDWRN 16,17,1
000461 940c 0443 	JMP  _0x5C
                 _0x5D:
                 ;     428     LED_STATUS = 1;
000463 9ac4      	SBI  0x18,4
                 ;     429 }
000464 8119      	LDD  R17,Y+1
000465 8108      	LDD  R16,Y+0
000466 9624      	ADIW R28,4
000467 9508      	RET
                 ;     430 
                 ;     431 void GetCharWidth(WORD length)
                 ;     432 {                               
                 _GetCharWidth:
                 ;     433     UINT i =0;  
                 ;     434     LED_STATUS = 0;   
000468 931a      	ST   -Y,R17
000469 930a      	ST   -Y,R16
                 ;	length -> Y+2
                 ;	i -> R16,R17
00046a e000      	LDI  R16,0
00046b e010      	LDI  R17,0
00046c 98c4      	CBI  0x18,4
                 ;     435     for (i =0; i < length; i++)
00046d e000
00046e e010      	__GETWRN 16,17,0
                 _0x5F:
00046f 81ea      	LDD  R30,Y+2
000470 81fb      	LDD  R31,Y+2+1
000471 170e      	CP   R16,R30
000472 071f      	CPC  R17,R31
000473 f010      	BRLO PC+3
000474 940c 048f 	JMP _0x60
                 ;     436     {                           
                 ;     437         char_width[i] = _save_char_width[i];
000476 01f8      	MOVW R30,R16
000477 e7aa      	LDI  R26,LOW(_char_width_G1)
000478 e0b1      	LDI  R27,HIGH(_char_width_G1)
000479 0fee      	LSL  R30
00047a 1fff      	ROL  R31
00047b 0fea      	ADD  R30,R26
00047c 1ffb      	ADC  R31,R27
00047d 010f      	MOVW R0,R30
00047e 01f8      	MOVW R30,R16
00047f e0a6      	LDI  R26,LOW(__save_char_width)
000480 e0b0      	LDI  R27,HIGH(__save_char_width)
000481 0fee      	LSL  R30
000482 1fff      	ROL  R31
000483 0fae      	ADD  R26,R30
000484 1fbf      	ADC  R27,R31
000485 940e 0d4a 	CALL __EEPROMRDW
000487 01d0      	MOVW R26,R0
000488 93ed      	ST   X+,R30
000489 93fc      	ST   X,R31
                 ;     438         RESET_WATCHDOG();
00048a 95a8      	WDR
                 ;     439     }              
00048b 5f0f
00048c 4f1f      	__ADDWRN 16,17,1
00048d 940c 046f 	JMP  _0x5F
                 _0x60:
                 ;     440     LED_STATUS = 1;
00048f 9ac4      	SBI  0x18,4
                 ;     441 }
000490 8119      	LDD  R17,Y+1
000491 8108      	LDD  R16,Y+0
000492 9624      	ADIW R28,4
000493 9508      	RET
                 ;     442                                           
                 ;     443 void SaveFontHeader(WORD length)
                 ;     444 {   
                 _SaveFontHeader:
                 ;     445     UINT i =0;  
                 ;     446     LED_STATUS = 0;    
000494 931a      	ST   -Y,R17
000495 930a      	ST   -Y,R16
                 ;	length -> Y+2
                 ;	i -> R16,R17
000496 e000      	LDI  R16,0
000497 e010      	LDI  R17,0
000498 98c4      	CBI  0x18,4
                 ;     447     // init I2C bus
                 ;     448     i2c_init();
000499 940e 0c8e 	CALL _i2c_init
                 ;     449     for (i =0; i < length; i++)
00049b e000
00049c e010      	__GETWRN 16,17,0
                 _0x62:
00049d 81ea      	LDD  R30,Y+2
00049e 81fb      	LDD  R31,Y+2+1
00049f 170e      	CP   R16,R30
0004a0 071f      	CPC  R17,R31
0004a1 f010      	BRLO PC+3
0004a2 940c 04ba 	JMP _0x63
                 ;     450     {                           
                 ;     451         eeprom_write_w(EEPROM_DEVICE_FONT,i,char_width[i]);
0004a4 eae4      	LDI  R30,LOW(164)
0004a5 93ea      	ST   -Y,R30
0004a6 931a      	ST   -Y,R17
0004a7 930a      	ST   -Y,R16
0004a8 01f8      	MOVW R30,R16
0004a9 e7aa      	LDI  R26,LOW(_char_width_G1)
0004aa e0b1      	LDI  R27,HIGH(_char_width_G1)
0004ab 0fee      	LSL  R30
0004ac 1fff      	ROL  R31
0004ad 0fae      	ADD  R26,R30
0004ae 1fbf      	ADC  R27,R31
0004af 940e 0d46 	CALL __GETW1P
0004b1 93fa      	ST   -Y,R31
0004b2 93ea      	ST   -Y,R30
0004b3 940e 0bab 	CALL _eeprom_write_w
                 ;     452         RESET_WATCHDOG();        
0004b5 95a8      	WDR
                 ;     453     }                 
0004b6 5f0f
0004b7 4f1f      	__ADDWRN 16,17,1
0004b8 940c 049d 	JMP  _0x62
                 _0x63:
                 ;     454   
                 ;     455     LED_STATUS = 1;
0004ba 9ac4      	SBI  0x18,4
                 ;     456 }
0004bb 8119      	LDD  R17,Y+1
0004bc 8108      	LDD  R16,Y+0
0004bd 9624      	ADIW R28,4
0004be 9508      	RET
                 ;     457 
                 ;     458 void SaveToEEPROM(WORD address,WORD length,BYTE type)
                 ;     459 {                             
                 _SaveToEEPROM:
                 ;     460     PBYTE temp = 0;    
                 ;     461 #ifndef EEPROM_PAGE     
                 ;     462     UINT i =0, row =0;  
                 ;     463 #endif    
                 ;     464     PBYTE end  = START_RAM_TEXT;     
                 ;     465     BYTE devID = EEPROM_DEVICE_32;      				
                 ;     466     temp   = address;         
0004bf 940e 0d72 	CALL __SAVELOCR5
                 ;	address -> Y+8
                 ;	length -> Y+6
                 ;	type -> Y+5
                 ;	*temp -> R16,R17
                 ;	*end -> R18,R19
                 ;	devID -> R20
0004c1 e000      	LDI  R16,LOW(0x00)
0004c2 e010      	LDI  R17,HIGH(0x00)
0004c3 e420      	LDI  R18,LOW(0xB40)
0004c4 e03b      	LDI  R19,HIGH(0xB40)
0004c5 ea40      	LDI  R20,160
0004c6 8508
0004c7 8519      	__GETWRS 16,17,8
                 ;     467         
                 ;     468     if (length > DATA_LENGTH)    
0004c8 81ae      	LDD  R26,Y+6
0004c9 81bf      	LDD  R27,Y+6+1
0004ca 39a9      	CPI  R26,LOW(0xE99)
0004cb e0ee      	LDI  R30,HIGH(0xE99)
0004cc 07be      	CPC  R27,R30
0004cd f020      	BRLO _0x64
                 ;     469         return; // invalid param          
0004ce 940e 0d79 	CALL __LOADLOCR5
0004d0 962a      	ADIW R28,10
0004d1 9508      	RET
                 ;     470 #ifdef EEPROM_PAGE
                 ;     471     if (length%EEPROM_PAGE)
                 _0x64:
0004d2 81ee      	LDD  R30,Y+6
0004d3 81ff      	LDD  R31,Y+6+1
0004d4 73ef      	ANDI R30,LOW(0x3F)
0004d5 f071      	BREQ _0x65
                 ;     472         length = EEPROM_PAGE*(length/EEPROM_PAGE) + EEPROM_PAGE;        
0004d6 81ae      	LDD  R26,Y+6
0004d7 81bf      	LDD  R27,Y+6+1
0004d8 e4e0      	LDI  R30,LOW(64)
0004d9 e0f0      	LDI  R31,HIGH(64)
0004da 940e 0d25 	CALL __DIVW21U
0004dc 940e 0d13 	CALL __LSLW2
0004de 940e 0d0f 	CALL __LSLW4
0004e0 5ce0      	SUBI R30,LOW(-64)
0004e1 4fff      	SBCI R31,HIGH(-64)
0004e2 83ee      	STD  Y+6,R30
0004e3 83ff      	STD  Y+6+1,R31
                 ;     473 #endif       
                 ;     474     
                 ;     475     // init I2C bus
                 ;     476     i2c_init();
                 _0x65:
0004e4 940e 0c8e 	CALL _i2c_init
                 ;     477     LED_STATUS = 0;        
0004e6 98c4      	CBI  0x18,4
                 ;     478     
                 ;     479        
                 ;     480 #ifdef EEPROM_PAGE            
                 ;     481     if ((type == FRAME_TEXT) || (type == FRAME_FONT)) end = END_RAM;
0004e7 81ad      	LDD  R26,Y+5
0004e8 30a0      	CPI  R26,LOW(0x0)
0004e9 f011      	BREQ _0x67
0004ea 30a2      	CPI  R26,LOW(0x2)
0004eb f411      	BRNE _0x66
                 _0x67:
0004ec e020
0004ed e830      	__GETWRN 18,19,32768
                 ;     482     if (type == FRAME_FONT) devID = EEPROM_DEVICE_FONT;
                 _0x66:
0004ee 81ad      	LDD  R26,Y+5
0004ef 30a2      	CPI  R26,LOW(0x2)
0004f0 f409      	BRNE _0x69
0004f1 ea44      	LDI  R20,LOW(164)
                 ;     483     
                 ;     484     for (temp = address; temp < end; temp+= EEPROM_PAGE) 
                 _0x69:
0004f2 8508
0004f3 8519      	__GETWRS 16,17,8
                 _0x6B:
0004f4 1702
0004f5 0713      	__CPWRR 16,17,18,19
0004f6 f010      	BRLO PC+3
0004f7 940c 050c 	JMP _0x6C
                 ;     485     {   
                 ;     486         RESET_WATCHDOG();               
0004f9 95a8      	WDR
                 ;     487         if (temp >= END_RAM32) devID = EEPROM_DEVICE_64;            	                                              
0004fa 3000
0004fb e8e0
0004fc 071e      	__CPWRN 16,17,32768
0004fd f008      	BRLO _0x6D
0004fe ea42      	LDI  R20,LOW(162)
                 ;     488         eeprom_write_page( devID, temp, temp, EEPROM_PAGE);	      
                 _0x6D:
0004ff 934a      	ST   -Y,R20
000500 931a      	ST   -Y,R17
000501 930a      	ST   -Y,R16
000502 931a      	ST   -Y,R17
000503 930a      	ST   -Y,R16
000504 e4e0      	LDI  R30,LOW(64)
000505 93ea      	ST   -Y,R30
000506 940e 0c0d 	CALL _eeprom_write_page
                 ;     489     }       
000508 5c00
000509 4f1f      	__ADDWRN 16,17,64
00050a 940c 04f4 	JMP  _0x6B
                 _0x6C:
                 ;     490 #else // NONE PAGING
                 ;     491     for (row =0; row < 8; row++)   
                 ;     492     {
                 ;     493         for (i =0; i< length; i++) 
                 ;     494         {                  
                 ;     495             if (i >= DATA_LENGTH32) devID = EEPROM_DEVICE_64;            	                                              
                 ;     496             eeprom_write( devID, temp, *temp++ );RESET_WATCHDOG();	    
                 ;     497         }           
                 ;     498         if ((type == FRAME_TEXT) || (type == FRAME_FONT))  
                 ;     499             temp += DATA_LENGTH - length;   
                 ;     500     }
                 ;     501 #endif
                 ;     502         
                 ;     503     LED_STATUS = 1;   
00050c 9ac4      	SBI  0x18,4
                 ;     504 }
00050d 940e 0d79 	CALL __LOADLOCR5
00050f 962a      	ADIW R28,10
000510 9508      	RET
                 ;     505                       
                 ;     506 void LoadToRAM(WORD address,WORD length,BYTE type)
                 ;     507 {                         
                 _LoadToRAM:
                 ;     508     PBYTE temp = 0;          
                 ;     509     UINT i =0, row =0;
                 ;     510     BYTE devID = EEPROM_DEVICE_32;      				
                 ;     511     temp   = address;                 
000511 9721      	SBIW R28,1
000512 e081      	LDI  R24,1
000513 e0a0      	LDI  R26,LOW(0)
000514 e0b0      	LDI  R27,HIGH(0)
000515 e7e2      	LDI  R30,LOW(_0x6E*2)
000516 e0f0      	LDI  R31,HIGH(_0x6E*2)
000517 940e 0d7f 	CALL __INITLOCB
000519 940e 0d71 	CALL __SAVELOCR6
                 ;	address -> Y+10
                 ;	length -> Y+8
                 ;	type -> Y+7
                 ;	*temp -> R16,R17
                 ;	i -> R18,R19
                 ;	row -> R20,R21
                 ;	devID -> Y+6
00051b e000      	LDI  R16,LOW(0x00)
00051c e010      	LDI  R17,HIGH(0x00)
00051d e020      	LDI  R18,0
00051e e030      	LDI  R19,0
00051f e040      	LDI  R20,0
000520 e050      	LDI  R21,0
000521 850a
000522 851b      	__GETWRS 16,17,10
                 ;     512 
                 ;     513     if (length > DATA_LENGTH)    
000523 85a8      	LDD  R26,Y+8
000524 85b9      	LDD  R27,Y+8+1
000525 39a9      	CPI  R26,LOW(0xE99)
000526 e0ee      	LDI  R30,HIGH(0xE99)
000527 07be      	CPC  R27,R30
000528 f020      	BRLO _0x6F
                 ;     514         return; // invalid param
000529 940e 0d78 	CALL __LOADLOCR6
00052b 962c      	ADIW R28,12
00052c 9508      	RET
                 ;     515 #ifdef EEPROM_PAGE
                 ;     516     if (length%EEPROM_PAGE)
                 _0x6F:
00052d 85e8      	LDD  R30,Y+8
00052e 85f9      	LDD  R31,Y+8+1
00052f 73ef      	ANDI R30,LOW(0x3F)
000530 f071      	BREQ _0x70
                 ;     517         length = EEPROM_PAGE*(length/EEPROM_PAGE) + EEPROM_PAGE;        
000531 85a8      	LDD  R26,Y+8
000532 85b9      	LDD  R27,Y+8+1
000533 e4e0      	LDI  R30,LOW(64)
000534 e0f0      	LDI  R31,HIGH(64)
000535 940e 0d25 	CALL __DIVW21U
000537 940e 0d13 	CALL __LSLW2
000539 940e 0d0f 	CALL __LSLW4
00053b 5ce0      	SUBI R30,LOW(-64)
00053c 4fff      	SBCI R31,HIGH(-64)
00053d 87e8      	STD  Y+8,R30
00053e 87f9      	STD  Y+8+1,R31
                 ;     518 #endif       
                 ;     519     // init I2C bus
                 ;     520     i2c_init();
                 _0x70:
00053f 940e 0c8e 	CALL _i2c_init
                 ;     521     LED_STATUS = 0;             
000541 98c4      	CBI  0x18,4
                 ;     522     if (type == FRAME_FONT) devID = EEPROM_DEVICE_FONT;      
000542 81af      	LDD  R26,Y+7
000543 30a2      	CPI  R26,LOW(0x2)
000544 f411      	BRNE _0x71
000545 eae4      	LDI  R30,LOW(164)
000546 83ee      	STD  Y+6,R30
                 ;     523     for (row =0; row < 8; row++)            
                 _0x71:
000547 e040
000548 e050      	__GETWRN 20,21,0
                 _0x73:
000549 3048
00054a e0e0
00054b 075e      	__CPWRN 20,21,8
00054c f010      	BRLO PC+3
00054d 940c 0580 	JMP _0x74
                 ;     524     {                           
                 ;     525 #ifdef EEPROM_PAGE          
                 ;     526         for (i =0; i< length; i+=EEPROM_PAGE) 
00054f e020
000550 e030      	__GETWRN 18,19,0
                 _0x76:
000551 85e8      	LDD  R30,Y+8
000552 85f9      	LDD  R31,Y+8+1
000553 172e      	CP   R18,R30
000554 073f      	CPC  R19,R31
000555 f010      	BRLO PC+3
000556 940c 056f 	JMP _0x77
                 ;     527         {                                 
                 ;     528             if (i >= DATA_LENGTH32) devID = EEPROM_DEVICE_64;
000558 3928
000559 e0ee
00055a 073e      	__CPWRN 18,19,3736
00055b f010      	BRLO _0x78
00055c eae2      	LDI  R30,LOW(162)
00055d 83ee      	STD  Y+6,R30
                 ;     529             eeprom_read_page( devID, temp, temp, EEPROM_PAGE );	                                   
                 _0x78:
00055e 81ee      	LDD  R30,Y+6
00055f 93ea      	ST   -Y,R30
000560 931a      	ST   -Y,R17
000561 930a      	ST   -Y,R16
000562 931a      	ST   -Y,R17
000563 930a      	ST   -Y,R16
000564 e4e0      	LDI  R30,LOW(64)
000565 93ea      	ST   -Y,R30
000566 940e 0bc9 	CALL _eeprom_read_page
                 ;     530             temp += EEPROM_PAGE;
000568 5c00
000569 4f1f      	__ADDWRN 16,17,64
                 ;     531             RESET_WATCHDOG();     
00056a 95a8      	WDR
                 ;     532         }         
00056b 5c20
00056c 4f3f      	__ADDWRN 18,19,64
00056d 940c 0551 	JMP  _0x76
                 _0x77:
                 ;     533 #else    
                 ;     534         for (i =0; i< length; i++) 
                 ;     535         {                                 
                 ;     536             if (i >= DATA_LENGTH32) devID = EEPROM_DEVICE_64;
                 ;     537             *temp = eeprom_read( devID, temp++ );
                 ;     538             RESET_WATCHDOG();	                      
                 ;     539         }
                 ;     540 #endif        
                 ;     541         if ((type == FRAME_TEXT) || (type == FRAME_FONT))  
00056f 81af      	LDD  R26,Y+7
000570 30a0      	CPI  R26,LOW(0x0)
000571 f011      	BREQ _0x7A
000572 30a2      	CPI  R26,LOW(0x2)
000573 f441      	BRNE _0x79
                 _0x7A:
                 ;     542             temp += DATA_LENGTH - length;  
000574 85a8      	LDD  R26,Y+8
000575 85b9      	LDD  R27,Y+8+1
000576 e9e8      	LDI  R30,LOW(3736)
000577 e0fe      	LDI  R31,HIGH(3736)
000578 1bea      	SUB  R30,R26
000579 0bfb      	SBC  R31,R27
00057a 0f0e
00057b 1f1f      	__ADDWRR 16,17,30,31
                 ;     543     }             
                 _0x79:
00057c 5f4f
00057d 4f5f      	__ADDWRN 20,21,1
00057e 940c 0549 	JMP  _0x73
                 _0x74:
                 ;     544 
                 ;     545     LED_STATUS = 1;  
000580 9ac4      	SBI  0x18,4
                 ;     546 }
000581 940e 0d78 	CALL __LOADLOCR6
000583 962c      	ADIW R28,12
000584 9508      	RET
                 ;     547 
                 ;     548 void LoadConfig()
                 ;     549 {                                
                 _LoadConfig:
                 ;     550     sys_mode   = _cfg_sys_mode;
000585 e0a1      	LDI  R26,LOW(__cfg_sys_mode)
000586 e0b0      	LDI  R27,HIGH(__cfg_sys_mode)
000587 940e 0d4e 	CALL __EEPROMRDB
000589 93e0 0171 	STS  _sys_mode_G1,R30
                 ;     551     shift_rate = _cfg_shift_rate;
00058b e0a2      	LDI  R26,LOW(__cfg_shift_rate)
00058c e0b0      	LDI  R27,HIGH(__cfg_shift_rate)
00058d 940e 0d4e 	CALL __EEPROMRDB
00058f 93e0 016f 	STS  _shift_rate_G1,R30
                 ;     552     shift_step = _cfg_shift_step;    
000591 e0a3      	LDI  R26,LOW(__cfg_shift_step)
000592 e0b0      	LDI  R27,HIGH(__cfg_shift_step)
000593 940e 0d4e 	CALL __EEPROMRDB
000595 93e0 0170 	STS  _shift_step_G1,R30
                 ;     553     frm_delay  = _cfg_frm_delay;
000597 e0a0      	LDI  R26,LOW(__cfg_frm_delay)
000598 e0b0      	LDI  R27,HIGH(__cfg_frm_delay)
000599 940e 0d4e 	CALL __EEPROMRDB
00059b 93e0 016e 	STS  _frm_delay_G1,R30
                 ;     554     
                 ;     555     if (_save_text_length > DATA_LENGTH)
00059d e0a4      	LDI  R26,LOW(__save_text_length)
00059e e0b0      	LDI  R27,HIGH(__save_text_length)
00059f 940e 0d4a 	CALL __EEPROMRDW
0005a1 39e9      	CPI  R30,LOW(0xE99)
0005a2 e0ae      	LDI  R26,HIGH(0xE99)
0005a3 07fa      	CPC  R31,R26
0005a4 f030      	BRLO _0x7C
                 ;     556         _save_text_length = 0; 
0005a5 e0e0      	LDI  R30,LOW(0)
0005a6 e0f0      	LDI  R31,HIGH(0)
0005a7 e0a4      	LDI  R26,LOW(__save_text_length)
0005a8 e0b0      	LDI  R27,HIGH(__save_text_length)
0005a9 940e 0d5a 	CALL __EEPROMWRW
                 ;     557     text_length = _save_text_length; 
                 _0x7C:
0005ab e0a4      	LDI  R26,LOW(__save_text_length)
0005ac e0b0      	LDI  R27,HIGH(__save_text_length)
0005ad 940e 0d4a 	CALL __EEPROMRDW
0005af 93e0 0178 	STS  _text_length_G1,R30
0005b1 93f0 0179 	STS  _text_length_G1+1,R31
                 ;     558 }
0005b3 9508      	RET
                 ;     559 
                 ;     560 void BlankRAM(PBYTE start_addr,PBYTE end_addr)
                 ;     561 {        
                 _BlankRAM:
                 ;     562     PBYTE temp = START_RAM;
                 ;     563     for (temp = start_addr; temp<= end_addr; temp++)    
0005b4 931a      	ST   -Y,R17
0005b5 930a      	ST   -Y,R16
                 ;	*start_addr -> Y+4
                 ;	*end_addr -> Y+2
                 ;	*temp -> R16,R17
0005b6 e000      	LDI  R16,LOW(0x500)
0005b7 e015      	LDI  R17,HIGH(0x500)
0005b8 810c
0005b9 811d      	__GETWRS 16,17,4
                 _0x7E:
0005ba 81ea      	LDD  R30,Y+2
0005bb 81fb      	LDD  R31,Y+2+1
0005bc 17e0      	CP   R30,R16
0005bd 07f1      	CPC  R31,R17
0005be f030      	BRLO _0x7F
                 ;     564         *temp = 0xFF;             
0005bf 01d8      	MOVW R26,R16
0005c0 efef      	LDI  R30,LOW(255)
0005c1 93ec      	ST   X,R30
                 ;     565 }
0005c2 5f0f
0005c3 4f1f      	__ADDWRN 16,17,1
0005c4 cff5      	RJMP _0x7E
                 _0x7F:
0005c5 8119      	LDD  R17,Y+1
0005c6 8108      	LDD  R16,Y+0
0005c7 9626      	ADIW R28,6
0005c8 9508      	RET
                 ;     566 
                 ;     567 void SetRTCDateTime()
                 ;     568 {
                 _SetRTCDateTime:
                 ;     569     i2c_init();
0005c9 940e 0c8e 	CALL _i2c_init
                 ;     570     LED_STATUS = 0;   
0005cb 98c4      	CBI  0x18,4
                 ;     571     rtc_set_date(getchar(),getchar(),getchar());
0005cc 940e 0c3f 	CALL _getchar
0005ce 93ea      	ST   -Y,R30
0005cf 940e 0c3f 	CALL _getchar
0005d1 93ea      	ST   -Y,R30
0005d2 940e 0c3f 	CALL _getchar
0005d4 93ea      	ST   -Y,R30
0005d5 940e 0c6b 	CALL _rtc_set_date
                 ;     572     rtc_set_time(getchar(),getchar(),getchar());    
0005d7 940e 0c3f 	CALL _getchar
0005d9 93ea      	ST   -Y,R30
0005da 940e 0c3f 	CALL _getchar
0005dc 93ea      	ST   -Y,R30
0005dd 940e 0c3f 	CALL _getchar
0005df 93ea      	ST   -Y,R30
0005e0 940e 0c49 	CALL _rtc_set_time
                 ;     573     LED_STATUS = 1;
0005e2 9ac4      	SBI  0x18,4
                 ;     574 }
0005e3 9508      	RET
                 ;     575 
                 ;     576 static void TextFromFont(char *szText, BYTE nColor, BYTE bGradient, PBYTE pBuffer, WORD length)
                 ;     577 {
                 _TextFromFont_G1:
                 ;     578 	int pos = 0,x=0,y=0;     
                 ;     579 	BYTE i =0, len;
                 ;     580 	BYTE ch = 0;
                 ;     581 	UINT nWidth = 0;   
                 ;     582 	UINT nCurWidth = 0, nNxtWidth = 0;		
                 ;     583     BYTE mask = 0x00, data = 0;
                 ;     584 	BYTE mask_clr[2] = {0x00};
                 ;     585 	
                 ;     586 	switch (nColor)
0005e4 972d      	SBIW R28,13
0005e5 e08d      	LDI  R24,13
0005e6 e0a0      	LDI  R26,LOW(0)
0005e7 e0b0      	LDI  R27,HIGH(0)
0005e8 e7e4      	LDI  R30,LOW(_0x80*2)
0005e9 e0f0      	LDI  R31,HIGH(_0x80*2)
0005ea 940e 0d7f 	CALL __INITLOCB
0005ec 940e 0d71 	CALL __SAVELOCR6
                 ;	*szText -> Y+25
                 ;	nColor -> Y+24
                 ;	bGradient -> Y+23
                 ;	*pBuffer -> Y+21
                 ;	length -> Y+19
                 ;	pos -> R16,R17
                 ;	x -> R18,R19
                 ;	y -> R20,R21
                 ;	i -> Y+18
                 ;	len -> Y+17
                 ;	ch -> Y+16
                 ;	nWidth -> Y+14
                 ;	nCurWidth -> Y+12
                 ;	nNxtWidth -> Y+10
                 ;	mask -> Y+9
                 ;	data -> Y+8
                 ;	mask_clr -> Y+6
0005ee e000      	LDI  R16,0
0005ef e010      	LDI  R17,0
0005f0 e020      	LDI  R18,0
0005f1 e030      	LDI  R19,0
0005f2 e040      	LDI  R20,0
0005f3 e050      	LDI  R21,0
0005f4 8de8      	LDD  R30,Y+24
                 ;     587 	{
                 ;     588 	case 0:
0005f5 30e0      	CPI  R30,0
0005f6 f429      	BRNE _0x84
                 ;     589 		mask = 0xFF;		// BLANK
0005f7 efef      	LDI  R30,LOW(255)
0005f8 87e9      	STD  Y+9,R30
                 ;     590 		mask_clr[0] = 0xFF;
0005f9 83ee      	STD  Y+6,R30
                 ;     591 		mask_clr[1] = 0xFF;
0005fa 83ef      	STD  Y+7,R30
                 ;     592 		break;
0005fb c01a      	RJMP _0x83
                 ;     593 	case 1:
                 _0x84:
0005fc 30e1      	CPI  R30,LOW(0x1)
0005fd f439      	BRNE _0x85
                 ;     594 		mask = 0xAA;		// RED			RRRR	
0005fe eaea      	LDI  R30,LOW(170)
0005ff 87e9      	STD  Y+9,R30
                 ;     595 		mask_clr[0] = 0x99;	// GREEN		RGRG
000600 e9e9      	LDI  R30,LOW(153)
000601 83ee      	STD  Y+6,R30
                 ;     596 		mask_clr[1] = 0x88;	// YELLOW		RYRY
000602 e8e8      	LDI  R30,LOW(136)
000603 83ef      	STD  Y+7,R30
                 ;     597 		break;
000604 c011      	RJMP _0x83
                 ;     598 	case 2:
                 _0x85:
000605 30e2      	CPI  R30,LOW(0x2)
000606 f439      	BRNE _0x86
                 ;     599 		mask = 0x55;		// GREEN		GGGG
000607 e5e5      	LDI  R30,LOW(85)
000608 87e9      	STD  Y+9,R30
                 ;     600 		mask_clr[0] = 0x44;	// YELLOW		GYGY
000609 e4e4      	LDI  R30,LOW(68)
00060a 83ee      	STD  Y+6,R30
                 ;     601 		mask_clr[1] = 0x66;	// RED			GRGR	
00060b e6e6      	LDI  R30,LOW(102)
00060c 83ef      	STD  Y+7,R30
                 ;     602 		break;
00060d c008      	RJMP _0x83
                 ;     603 	case 3:
                 _0x86:
00060e 30e3      	CPI  R30,LOW(0x3)
00060f f431      	BRNE _0x88
                 ;     604 		mask = 0x00;		// YELLOW		YYYY
000610 e0e0      	LDI  R30,LOW(0)
000611 87e9      	STD  Y+9,R30
                 ;     605 		mask_clr[0] = 0x22;	// RED			YRYR	
000612 e2e2      	LDI  R30,LOW(34)
000613 83ee      	STD  Y+6,R30
                 ;     606 		mask_clr[1] = 0x11;	// GREEN		YGYG
000614 e1e1      	LDI  R30,LOW(17)
000615 83ef      	STD  Y+7,R30
                 ;     607 		break;
                 ;     608 	default:
                 _0x88:
                 ;     609 		break;
                 ;     610 	}	
                 _0x83:
                 ;     611                            
                 ;     612 	LED_STATUS = 0;
000616 98c4      	CBI  0x18,4
                 ;     613 	i2c_init();
000617 940e 0c8e 	CALL _i2c_init
                 ;     614 	len = strlen(szText);
000619 8de9      	LDD  R30,Y+25
00061a 8dfa      	LDD  R31,Y+25+1
00061b 93fa      	ST   -Y,R31
00061c 93ea      	ST   -Y,R30
00061d 940e 0ce0 	CALL _strlen
00061f 8be9      	STD  Y+17,R30
                 ;     615     char_width[0] = 0;
000620 e0e0      	LDI  R30,LOW(0)
000621 e0f0      	LDI  R31,HIGH(0)
000622 93e0 017a 	STS  _char_width_G1,R30
000624 93f0 017b 	STS  _char_width_G1+1,R31
                 ;     616     
                 ;     617 	for (i=0; i< len; i++)
000626 8bea      	STD  Y+18,R30
                 _0x8A:
000627 89e9      	LDD  R30,Y+17
000628 89aa      	LDD  R26,Y+18
000629 17ae      	CP   R26,R30
00062a f010      	BRLO PC+3
00062b 940c 06cd 	JMP _0x8B
                 ;     618 	{				                                     
                 ;     619         ch = szText[i];             
00062d 89ea      	LDD  R30,Y+18
00062e 8da9      	LDD  R26,Y+25
00062f 8dba      	LDD  R27,Y+25+1
000630 e0f0      	LDI  R31,0
000631 0fae      	ADD  R26,R30
000632 1fbf      	ADC  R27,R31
000633 91ec      	LD   R30,X
000634 8be8      	STD  Y+16,R30
                 ;     620 		nCurWidth = eeprom_read_w(EEPROM_DEVICE_FONT,(WORD)ch);
000635 eae4      	LDI  R30,LOW(164)
000636 93ea      	ST   -Y,R30
000637 89e9      	LDD  R30,Y+17
000638 e0f0      	LDI  R31,0
000639 93fa      	ST   -Y,R31
00063a 93ea      	ST   -Y,R30
00063b 940e 0b82 	CALL _eeprom_read_w
00063d 87ec      	STD  Y+12,R30
00063e 87fd      	STD  Y+12+1,R31
                 ;     621 		nNxtWidth = eeprom_read_w(EEPROM_DEVICE_FONT,(WORD)ch+1);
00063f eae4      	LDI  R30,LOW(164)
000640 93ea      	ST   -Y,R30
000641 89e9      	LDD  R30,Y+17
000642 e0f0      	LDI  R31,0
000643 9631      	ADIW R30,1
000644 93fa      	ST   -Y,R31
000645 93ea      	ST   -Y,R30
000646 940e 0b82 	CALL _eeprom_read_w
000648 87ea      	STD  Y+10,R30
000649 87fb      	STD  Y+10+1,R31
                 ;     622 		nWidth = (nNxtWidth - nCurWidth); 
00064a 85ac      	LDD  R26,Y+12
00064b 85bd      	LDD  R27,Y+12+1
00064c 1bea      	SUB  R30,R26
00064d 0bfb      	SBC  R31,R27
00064e 87ee      	STD  Y+14,R30
00064f 87ff      	STD  Y+14+1,R31
                 ;     623 		
                 ;     624 		if ((pos + nWidth) >= length)  break;
000650 0fe0      	ADD  R30,R16
000651 1ff1      	ADC  R31,R17
000652 01df      	MOVW R26,R30
000653 89eb      	LDD  R30,Y+19
000654 89fc      	LDD  R31,Y+19+1
000655 17ae      	CP   R26,R30
000656 07bf      	CPC  R27,R31
000657 f010      	BRLO _0x8C
000658 940c 06cd 	JMP  _0x8B
                 ;     625 		
                 ;     626 		for (y=0; y< 8 ; y++)
                 _0x8C:
00065a e040
00065b e050      	__GETWRN 20,21,0
                 _0x8E:
00065c 3048
00065d e0e0
00065e 075e      	__CPWRN 20,21,8
00065f f014      	BRLT PC+3
000660 940c 06b6 	JMP _0x8F
                 ;     627 		{    		            
                 ;     628 		    if (bGradient) {
000662 89ef      	LDD  R30,Y+23
000663 30e0      	CPI  R30,0
000664 f0a9      	BREQ _0x90
                 ;     629 				if (y >=0 && y <4)	mask = mask_clr[0];
000665 5040      	SUBI R20,0
000666 4050      	SBCI R21,0
000667 f024      	BRLT _0x92
000668 3044
000669 e0e0
00066a 075e      	__CPWRN 20,21,4
00066b f00c      	BRLT _0x93
                 _0x92:
00066c c002      	RJMP _0x91
                 _0x93:
00066d 81ee      	LDD  R30,Y+6
00066e 87e9      	STD  Y+9,R30
                 ;     630 				if (y >=4 && y <8)	mask = mask_clr[1];	
                 _0x91:
00066f 3044
000670 e0e0
000671 075e      	__CPWRN 20,21,4
000672 f024      	BRLT _0x95
000673 3048
000674 e0e0
000675 075e      	__CPWRN 20,21,8
000676 f00c      	BRLT _0x96
                 _0x95:
000677 c002      	RJMP _0x94
                 _0x96:
000678 81ef      	LDD  R30,Y+7
000679 87e9      	STD  Y+9,R30
                 ;     631 			}
                 _0x94:
                 ;     632 			
                 ;     633 			for (x=0; x< nWidth; x++)
                 _0x90:
00067a e020
00067b e030      	__GETWRN 18,19,0
                 _0x98:
00067c 85ee      	LDD  R30,Y+14
00067d 85ff      	LDD  R31,Y+14+1
00067e 172e      	CP   R18,R30
00067f 073f      	CPC  R19,R31
000680 f010      	BRLO PC+3
000681 940c 06b2 	JMP _0x99
                 ;     634 			{                                 
                 ;     635 			    RESET_WATCHDOG();       
000683 95a8      	WDR
                 ;     636 			    data = eeprom_read(EEPROM_DEVICE_FONT, START_RAM_TEXT + y*DATA_LENGTH + nCurWidth + x);
000684 eae4      	LDI  R30,LOW(164)
000685 93ea      	ST   -Y,R30
000686 01da      	MOVW R26,R20
000687 e9e8      	LDI  R30,LOW(3736)
000688 e0fe      	LDI  R31,HIGH(3736)
000689 940e 0d20 	CALL __MULW12
00068b 5ce0      	SUBI R30,LOW(-2880)
00068c 4ff4      	SBCI R31,HIGH(-2880)
00068d 85ad      	LDD  R26,Y+13
00068e 85be      	LDD  R27,Y+13+1
00068f 0fea      	ADD  R30,R26
000690 1ffb      	ADC  R31,R27
000691 0fe2      	ADD  R30,R18
000692 1ff3      	ADC  R31,R19
000693 93fa      	ST   -Y,R31
000694 93ea      	ST   -Y,R30
000695 940e 0b40 	CALL _eeprom_read
000697 87e8      	STD  Y+8,R30
                 ;     637 			    data = (~data) & (~mask);
000698 95e0      	COM  R30
000699 2fae      	MOV  R26,R30
00069a 85e9      	LDD  R30,Y+9
00069b 95e0      	COM  R30
00069c 23ea      	AND  R30,R26
00069d 87e8      	STD  Y+8,R30
                 ;     638    				pBuffer[y*length + x + pos] = ~data;   				
00069e 89eb      	LDD  R30,Y+19
00069f 89fc      	LDD  R31,Y+19+1
0006a0 01da      	MOVW R26,R20
0006a1 940e 0d18 	CALL __MULW12U
0006a3 0fe2      	ADD  R30,R18
0006a4 1ff3      	ADC  R31,R19
0006a5 0fe0      	ADD  R30,R16
0006a6 1ff1      	ADC  R31,R17
0006a7 89ad      	LDD  R26,Y+21
0006a8 89be      	LDD  R27,Y+21+1
0006a9 0fae      	ADD  R26,R30
0006aa 1fbf      	ADC  R27,R31
0006ab 85e8      	LDD  R30,Y+8
0006ac 95e0      	COM  R30
0006ad 93ec      	ST   X,R30
                 ;     639 			}					
0006ae 5f2f
0006af 4f3f      	__ADDWRN 18,19,1
0006b0 940c 067c 	JMP  _0x98
                 _0x99:
                 ;     640 		}
0006b2 5f4f
0006b3 4f5f      	__ADDWRN 20,21,1
0006b4 940c 065c 	JMP  _0x8E
                 _0x8F:
                 ;     641 		pos += nWidth;	 
0006b6 85ee      	LDD  R30,Y+14
0006b7 85ff      	LDD  R31,Y+14+1
0006b8 0f0e
0006b9 1f1f      	__ADDWRR 16,17,30,31
                 ;     642 		if (length == DATA_LENGTH) 
0006ba 89ab      	LDD  R26,Y+19
0006bb 89bc      	LDD  R27,Y+19+1
0006bc 39a8      	CPI  R26,LOW(0xE98)
0006bd e0ee      	LDI  R30,HIGH(0xE98)
0006be 07be      	CPC  R27,R30
0006bf f441      	BRNE _0x9A
                 ;     643             char_width[(WORD)i+1] = pos;		
0006c0 89aa      	LDD  R26,Y+18
0006c1 27bb      	CLR  R27
0006c2 0faa      	LSL  R26
0006c3 1fbb      	ROL  R27
0006c4 58a4
0006c5 4fbe      	__ADDW2MN _char_width_G1,2
0006c6 930d      	ST   X+,R16
0006c7 931c      	ST   X,R17
                 ;     644 	}	                           
                 _0x9A:
0006c8 89ea      	LDD  R30,Y+18
0006c9 5fef      	SUBI R30,-LOW(1)
0006ca 8bea      	STD  Y+18,R30
0006cb 940c 0627 	JMP  _0x8A
                 _0x8B:
                 ;     645 	
                 ;     646     if (length == DATA_LENGTH)     
0006cd 89ab      	LDD  R26,Y+19
0006ce 89bc      	LDD  R27,Y+19+1
0006cf 39a8      	CPI  R26,LOW(0xE98)
0006d0 e0ee      	LDI  R30,HIGH(0xE98)
0006d1 07be      	CPC  R27,R30
0006d2 f421      	BRNE _0x9B
                 ;     647         text_length = pos;
0006d3 9300 0178
0006d5 9310 0179 	__PUTWMRN _text_length_G1,0,16,17
                 ;     648             
                 ;     649     LED_STATUS = 1;
                 _0x9B:
0006d7 9ac4      	SBI  0x18,4
                 ;     650 }
0006d8 940e 0d78 	CALL __LOADLOCR6
0006da 966b      	ADIW R28,27
0006db 9508      	RET
                 ;     651 
                 ;     652 void SaveTextToEEPROM()
                 ;     653 {                       
                 _SaveTextToEEPROM:
                 ;     654     UINT i =0;              
                 ;     655     UINT length = 0;
                 ;     656     length = strlen(szText);    
0006dc 940e 0d73 	CALL __SAVELOCR4
                 ;	i -> R16,R17
                 ;	length -> R18,R19
0006de e000      	LDI  R16,0
0006df e010      	LDI  R17,0
0006e0 e020      	LDI  R18,0
0006e1 e030      	LDI  R19,0
0006e2 e8e4      	LDI  R30,LOW(_szText_G1)
0006e3 e0f3      	LDI  R31,HIGH(_szText_G1)
0006e4 93fa      	ST   -Y,R31
0006e5 93ea      	ST   -Y,R30
0006e6 940e 0ce0 	CALL _strlen
0006e8 019f      	MOVW R18,R30
                 ;     657     
                 ;     658     if (length > sizeof(szText))    
0006e9 3227
0006ea e0e0
0006eb 073e      	__CPWRN 18,19,39
0006ec f020      	BRLO _0x9C
                 ;     659         return; // invalid value
0006ed 940e 0d7a 	CALL __LOADLOCR4
0006ef 9624      	ADIW R28,4
0006f0 9508      	RET
                 ;     660     
                 ;     661     eeprom_write_w(EEPROM_DEVICE_EXTRA,(WORD)0,(WORD)length);
                 _0x9C:
0006f1 eae6      	LDI  R30,LOW(166)
0006f2 93ea      	ST   -Y,R30
0006f3 e0e0      	LDI  R30,LOW(0)
0006f4 e0f0      	LDI  R31,HIGH(0)
0006f5 93fa      	ST   -Y,R31
0006f6 93ea      	ST   -Y,R30
0006f7 933a      	ST   -Y,R19
0006f8 932a      	ST   -Y,R18
0006f9 940e 0bab 	CALL _eeprom_write_w
                 ;     662     
                 ;     663 #ifdef EEPROM_PAGE
                 ;     664     if (length%EEPROM_PAGE)
0006fb 01f9      	MOVW R30,R18
0006fc 73ef      	ANDI R30,LOW(0x3F)
0006fd f061      	BREQ _0x9D
                 ;     665         length = EEPROM_PAGE*(length/EEPROM_PAGE) + EEPROM_PAGE;        
0006fe 01d9      	MOVW R26,R18
0006ff e4e0      	LDI  R30,LOW(64)
000700 e0f0      	LDI  R31,HIGH(64)
000701 940e 0d25 	CALL __DIVW21U
000703 940e 0d13 	CALL __LSLW2
000705 940e 0d0f 	CALL __LSLW4
000707 5ce0      	SUBI R30,LOW(-64)
000708 4fff      	SBCI R31,HIGH(-64)
000709 019f      	MOVW R18,R30
                 ;     666 #endif       
                 ;     667     // init I2C bus
                 ;     668     i2c_init();
                 _0x9D:
00070a 940e 0c8e 	CALL _i2c_init
                 ;     669     LED_STATUS = 0;             
00070c 98c4      	CBI  0x18,4
                 ;     670     
                 ;     671 #ifdef EEPROM_PAGE          
                 ;     672     for (i =0; i< length; i+=EEPROM_PAGE) 
00070d e000
00070e e010      	__GETWRN 16,17,0
                 _0x9F:
00070f 1702
000710 0713      	__CPWRR 16,17,18,19
000711 f010      	BRLO PC+3
000712 940c 0728 	JMP _0xA0
                 ;     673     {                                 
                 ;     674         eeprom_write_page( EEPROM_DEVICE_EXTRA, i+sizeof(UINT), &szText[i], EEPROM_PAGE );	                                   
000714 eae6      	LDI  R30,LOW(166)
000715 93ea      	ST   -Y,R30
000716 01f8      	MOVW R30,R16
000717 9632      	ADIW R30,2
000718 93fa      	ST   -Y,R31
000719 93ea      	ST   -Y,R30
00071a 01f8      	MOVW R30,R16
00071b 57ec      	SUBI R30,LOW(-_szText_G1)
00071c 4ffc      	SBCI R31,HIGH(-_szText_G1)
00071d 93fa      	ST   -Y,R31
00071e 93ea      	ST   -Y,R30
00071f e4e0      	LDI  R30,LOW(64)
000720 93ea      	ST   -Y,R30
000721 940e 0c0d 	CALL _eeprom_write_page
                 ;     675         RESET_WATCHDOG();     
000723 95a8      	WDR
                 ;     676     }         
000724 5c00
000725 4f1f      	__ADDWRN 16,17,64
000726 940c 070f 	JMP  _0x9F
                 _0xA0:
                 ;     677 #else    
                 ;     678     for (i =0; i< length; i++) 
                 ;     679     {                                       
                 ;     680         eeprom_write( EEPROM_DEVICE_EXTRA, i+sizeof(UINT) ,szText[i]);
                 ;     681         RESET_WATCHDOG();	                      
                 ;     682     }
                 ;     683 #endif                         
                 ;     684 
                 ;     685     LED_STATUS = 1;  
000728 9ac4      	SBI  0x18,4
                 ;     686     
                 ;     687 }                      
000729 940e 0d7a 	CALL __LOADLOCR4
00072b 9624      	ADIW R28,4
00072c 9508      	RET
                 ;     688 
                 ;     689 void GetTextFromEEPROM()
                 ;     690 {                         
                 _GetTextFromEEPROM:
                 ;     691     UINT i =0;              
                 ;     692     UINT length = 0, szLen=0;
                 ;     693     szLen = length = eeprom_read_w(EEPROM_DEVICE_EXTRA,(WORD)0);
00072d 940e 0d71 	CALL __SAVELOCR6
                 ;	i -> R16,R17
                 ;	length -> R18,R19
                 ;	szLen -> R20,R21
00072f e000      	LDI  R16,0
000730 e010      	LDI  R17,0
000731 e020      	LDI  R18,0
000732 e030      	LDI  R19,0
000733 e040      	LDI  R20,0
000734 e050      	LDI  R21,0
000735 eae6      	LDI  R30,LOW(166)
000736 93ea      	ST   -Y,R30
000737 e0e0      	LDI  R30,LOW(0)
000738 e0f0      	LDI  R31,HIGH(0)
000739 93fa      	ST   -Y,R31
00073a 93ea      	ST   -Y,R30
00073b 940e 0b82 	CALL _eeprom_read_w
00073d 019f      	MOVW R18,R30
00073e 01af      	MOVW R20,R30
                 ;     694     if (length > sizeof(szText))    
00073f 3227
000740 e0e0
000741 073e      	__CPWRN 18,19,39
000742 f020      	BRLO _0xA1
                 ;     695         return; // invalid param
000743 940e 0d78 	CALL __LOADLOCR6
000745 9626      	ADIW R28,6
000746 9508      	RET
                 ;     696 #ifdef EEPROM_PAGE
                 ;     697     if (length%EEPROM_PAGE)
                 _0xA1:
000747 01f9      	MOVW R30,R18
000748 73ef      	ANDI R30,LOW(0x3F)
000749 f061      	BREQ _0xA2
                 ;     698         length = EEPROM_PAGE*(length/EEPROM_PAGE) + EEPROM_PAGE;        
00074a 01d9      	MOVW R26,R18
00074b e4e0      	LDI  R30,LOW(64)
00074c e0f0      	LDI  R31,HIGH(64)
00074d 940e 0d25 	CALL __DIVW21U
00074f 940e 0d13 	CALL __LSLW2
000751 940e 0d0f 	CALL __LSLW4
000753 5ce0      	SUBI R30,LOW(-64)
000754 4fff      	SBCI R31,HIGH(-64)
000755 019f      	MOVW R18,R30
                 ;     699 #endif       
                 ;     700     // init I2C bus
                 ;     701     i2c_init();
                 _0xA2:
000756 940e 0c8e 	CALL _i2c_init
                 ;     702     LED_STATUS = 0;             
000758 98c4      	CBI  0x18,4
                 ;     703 
                 ;     704 #ifdef EEPROM_PAGE          
                 ;     705     for (i =0; i< length; i+=EEPROM_PAGE) 
000759 e000
00075a e010      	__GETWRN 16,17,0
                 _0xA4:
00075b 1702
00075c 0713      	__CPWRR 16,17,18,19
00075d f010      	BRLO PC+3
00075e 940c 0774 	JMP _0xA5
                 ;     706     {                                 
                 ;     707         eeprom_read_page( EEPROM_DEVICE_EXTRA, i+sizeof(UINT), &szText[i], EEPROM_PAGE );	                                   
000760 eae6      	LDI  R30,LOW(166)
000761 93ea      	ST   -Y,R30
000762 01f8      	MOVW R30,R16
000763 9632      	ADIW R30,2
000764 93fa      	ST   -Y,R31
000765 93ea      	ST   -Y,R30
000766 01f8      	MOVW R30,R16
000767 57ec      	SUBI R30,LOW(-_szText_G1)
000768 4ffc      	SBCI R31,HIGH(-_szText_G1)
000769 93fa      	ST   -Y,R31
00076a 93ea      	ST   -Y,R30
00076b e4e0      	LDI  R30,LOW(64)
00076c 93ea      	ST   -Y,R30
00076d 940e 0bc9 	CALL _eeprom_read_page
                 ;     708         RESET_WATCHDOG();     
00076f 95a8      	WDR
                 ;     709     }         
000770 5c00
000771 4f1f      	__ADDWRN 16,17,64
000772 940c 075b 	JMP  _0xA4
                 _0xA5:
                 ;     710 #else    
                 ;     711     for (i =0; i< length; i++) 
                 ;     712     {                                       
                 ;     713         szText[i] = eeprom_read( EEPROM_DEVICE_EXTRA, i+sizeof(UINT));
                 ;     714         RESET_WATCHDOG();	                      
                 ;     715     }
                 ;     716 #endif                         
                 ;     717     szText[szLen] = '\0';
000774 e8a4      	LDI  R26,LOW(_szText_G1)
000775 e0b3      	LDI  R27,HIGH(_szText_G1)
000776 0fa4      	ADD  R26,R20
000777 1fb5      	ADC  R27,R21
000778 e0e0      	LDI  R30,LOW(0)
000779 93ec      	ST   X,R30
                 ;     718     LED_STATUS = 1;  
00077a 9ac4      	SBI  0x18,4
                 ;     719 }
00077b 940e 0d78 	CALL __LOADLOCR6
00077d 9626      	ADIW R28,6
00077e 9508      	RET
                 ;     720 
                 ;     721 static void LoadTextASCII(WORD rx_wparam, WORD rx_lparam)
                 ;     722 {
                 _LoadTextASCII_G1:
                 ;     723     UINT i =0;                          
                 ;     724     for (i =0; i< (UINT)rx_wparam; i++)
00077f 931a      	ST   -Y,R17
000780 930a      	ST   -Y,R16
                 ;	rx_wparam -> Y+4
                 ;	rx_lparam -> Y+2
                 ;	i -> R16,R17
000781 e000      	LDI  R16,0
000782 e010      	LDI  R17,0
000783 e000
000784 e010      	__GETWRN 16,17,0
                 _0xA7:
000785 81ec      	LDD  R30,Y+4
000786 81fd      	LDD  R31,Y+4+1
000787 170e      	CP   R16,R30
000788 071f      	CPC  R17,R31
000789 f010      	BRLO PC+3
00078a 940c 079b 	JMP _0xA8
                 ;     725     {
                 ;     726         szText[i] = getchar();RESET_WATCHDOG();
00078c 01f8      	MOVW R30,R16
00078d 57ec      	SUBI R30,LOW(-_szText_G1)
00078e 4ffc      	SBCI R31,HIGH(-_szText_G1)
00078f 93ff      	PUSH R31
000790 93ef      	PUSH R30
000791 940e 0c3f 	CALL _getchar
000793 91af      	POP  R26
000794 91bf      	POP  R27
000795 93ec      	ST   X,R30
000796 95a8      	WDR
                 ;     727     }
000797 5f0f
000798 4f1f      	__ADDWRN 16,17,1
000799 940c 0785 	JMP  _0xA7
                 _0xA8:
                 ;     728     szText[rx_wparam] = '\0';          
00079b 81ac      	LDD  R26,Y+4
00079c 81bd      	LDD  R27,Y+4+1
00079d 57ac      	SUBI R26,LOW(-_szText_G1)
00079e 4fbc      	SBCI R27,HIGH(-_szText_G1)
00079f e0e0      	LDI  R30,LOW(0)
0007a0 93ec      	ST   X,R30
                 ;     729     SaveTextToEEPROM();
0007a1 940e 06dc 	CALL _SaveTextToEEPROM
                 ;     730            
                 ;     731     if ((rx_lparam>>8) == FRAME_TEXT)
0007a3 81eb      	LDD  R30,Y+3
0007a4 70f0      	ANDI R31,HIGH(0x0)
0007a5 9730      	SBIW R30,0
0007a6 f4f9      	BRNE _0xA9
                 ;     732     {        
                 ;     733         BlankRAM(START_RAM_TEXT,END_RAM);
0007a7 e4e0      	LDI  R30,LOW(2880)
0007a8 e0fb      	LDI  R31,HIGH(2880)
0007a9 93fa      	ST   -Y,R31
0007aa 93ea      	ST   -Y,R30
0007ab e0e0      	LDI  R30,LOW(32768)
0007ac e8f0      	LDI  R31,HIGH(32768)
0007ad 93fa      	ST   -Y,R31
0007ae 93ea      	ST   -Y,R30
0007af 940e 05b4 	CALL _BlankRAM
                 ;     734         TextFromFont(szText,rx_lparam&0x03,rx_lparam&0x04,START_RAM_TEXT+SCREEN_WIDTH,DATA_LENGTH); 
0007b1 e8e4      	LDI  R30,LOW(_szText_G1)
0007b2 e0f3      	LDI  R31,HIGH(_szText_G1)
0007b3 93fa      	ST   -Y,R31
0007b4 93ea      	ST   -Y,R30
0007b5 81ec      	LDD  R30,Y+4
0007b6 81fd      	LDD  R31,Y+4+1
0007b7 70e3      	ANDI R30,LOW(0x3)
0007b8 70f0      	ANDI R31,HIGH(0x3)
0007b9 93ea      	ST   -Y,R30
0007ba 81ed      	LDD  R30,Y+5
0007bb 81fe      	LDD  R31,Y+5+1
0007bc 70e4      	ANDI R30,LOW(0x4)
0007bd 70f0      	ANDI R31,HIGH(0x4)
0007be 93ea      	ST   -Y,R30
0007bf e0e8      	LDI  R30,LOW(3080)
0007c0 e0fc      	LDI  R31,HIGH(3080)
0007c1 93fa      	ST   -Y,R31
0007c2 93ea      	ST   -Y,R30
0007c3 e9e8      	LDI  R30,LOW(3736)
0007c4 e0fe      	LDI  R31,HIGH(3736)
0007c5 c01e      	RJMP _0xE7
                 ;     735     }   
                 ;     736     else
                 _0xA9:
                 ;     737     {                                    
                 ;     738         BlankRAM(START_RAM_BK,START_RAM_TEXT);                           
0007c6 e0e0      	LDI  R30,LOW(1280)
0007c7 e0f5      	LDI  R31,HIGH(1280)
0007c8 93fa      	ST   -Y,R31
0007c9 93ea      	ST   -Y,R30
0007ca e4e0      	LDI  R30,LOW(2880)
0007cb e0fb      	LDI  R31,HIGH(2880)
0007cc 93fa      	ST   -Y,R31
0007cd 93ea      	ST   -Y,R30
0007ce 940e 05b4 	CALL _BlankRAM
                 ;     739         TextFromFont(szText,rx_lparam&0x03,rx_lparam&0x04,START_RAM_BK,SCREEN_WIDTH);                           
0007d0 e8e4      	LDI  R30,LOW(_szText_G1)
0007d1 e0f3      	LDI  R31,HIGH(_szText_G1)
0007d2 93fa      	ST   -Y,R31
0007d3 93ea      	ST   -Y,R30
0007d4 81ec      	LDD  R30,Y+4
0007d5 81fd      	LDD  R31,Y+4+1
0007d6 70e3      	ANDI R30,LOW(0x3)
0007d7 70f0      	ANDI R31,HIGH(0x3)
0007d8 93ea      	ST   -Y,R30
0007d9 81ed      	LDD  R30,Y+5
0007da 81fe      	LDD  R31,Y+5+1
0007db 70e4      	ANDI R30,LOW(0x4)
0007dc 70f0      	ANDI R31,HIGH(0x4)
0007dd 93ea      	ST   -Y,R30
0007de e0e0      	LDI  R30,LOW(1280)
0007df e0f5      	LDI  R31,HIGH(1280)
0007e0 93fa      	ST   -Y,R31
0007e1 93ea      	ST   -Y,R30
0007e2 ece8      	LDI  R30,LOW(200)
0007e3 e0f0      	LDI  R31,HIGH(200)
                 _0xE7:
0007e4 93fa      	ST   -Y,R31
0007e5 93ea      	ST   -Y,R30
0007e6 940e 05e4 	CALL _TextFromFont_G1
                 ;     740     }    
                 ;     741     start_mem = START_RAM_TEXT + SCREEN_WIDTH;				
0007e8 e0e8      	LDI  R30,LOW(3080)
0007e9 e0fc      	LDI  R31,HIGH(3080)
0007ea 93e0 0164 	STS  _start_mem_G1,R30
0007ec 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     742   	bkgnd_mem = START_RAM_BK;	
0007ee e0e0      	LDI  R30,LOW(1280)
0007ef e0f5      	LDI  R31,HIGH(1280)
0007f0 93e0 016a 	STS  _bkgnd_mem_G1,R30
0007f2 93f0 016b 	STS  _bkgnd_mem_G1+1,R31
                 ;     743 }
0007f4 8119      	LDD  R17,Y+1
0007f5 8108      	LDD  R16,Y+0
0007f6 9626      	ADIW R28,6
0007f7 9508      	RET
                 ;     744 ///////////////////////////////////////////////////////////////
                 ;     745 // END static function(s)
                 ;     746 ///////////////////////////////////////////////////////////////
                 ;     747 
                 ;     748 ///////////////////////////////////////////////////////////////           
                 ;     749 
                 ;     750 void InitDevice()
                 ;     751 {
                 _InitDevice:
                 ;     752 // Declare your local variables here
                 ;     753 // Crystal Oscillator division factor: 1  
                 ;     754 #ifdef _MEGA162_INCLUDED_ 
                 ;     755 #pragma optsize-
                 ;     756 CLKPR=0x80;
0007f8 e8e0      	LDI  R30,LOW(128)
0007f9 93e0 0061 	STS  97,R30
                 ;     757 CLKPR=0x00;
0007fb e0e0      	LDI  R30,LOW(0)
0007fc 93e0 0061 	STS  97,R30
                 ;     758 #ifdef _OPTIMIZE_SIZE_
                 ;     759 #pragma optsize+
                 ;     760 #endif                    
                 ;     761 #endif
                 ;     762 
                 ;     763 PORTA=0x00;
0007fe bbeb      	OUT  0x1B,R30
                 ;     764 DDRA=0x00;
0007ff bbea      	OUT  0x1A,R30
                 ;     765 
                 ;     766 PORTB=0x00;
000800 bbe8      	OUT  0x18,R30
                 ;     767 DDRB=0xFF;
000801 efef      	LDI  R30,LOW(255)
000802 bbe7      	OUT  0x17,R30
                 ;     768 
                 ;     769 PORTC=0x00;
000803 e0e0      	LDI  R30,LOW(0)
000804 bbe5      	OUT  0x15,R30
                 ;     770 DDRC=0x00;
000805 bbe4      	OUT  0x14,R30
                 ;     771 
                 ;     772 PORTD = 0x00;
000806 bbe2      	OUT  0x12,R30
                 ;     773 DDRD = 0x00;
000807 bbe1      	OUT  0x11,R30
                 ;     774 
                 ;     775 PORTE=0x00;
000808 b9e7      	OUT  0x7,R30
                 ;     776 DDRE=0x05;
000809 e0e5      	LDI  R30,LOW(5)
00080a b9e6      	OUT  0x6,R30
                 ;     777 
                 ;     778 // Timer/Counter 0 initialization
                 ;     779 // Clock source: System Clock
                 ;     780 // Clock value: 250.000 kHz
                 ;     781 // Mode: Normal top=FFh
                 ;     782 // OC0 output: Disconnected
                 ;     783 TCCR0=0x03;     // 4 us per tick
00080b e0e3      	LDI  R30,LOW(3)
00080c bfe3      	OUT  0x33,R30
                 ;     784 TCNT0=0x05;     // 1ms = 4*250
00080d e0e5      	LDI  R30,LOW(5)
00080e bfe2      	OUT  0x32,R30
                 ;     785 OCR0=0x00;      // 255 -250 = TCNT0
00080f e0e0      	LDI  R30,LOW(0)
000810 bfe1      	OUT  0x31,R30
                 ;     786 
                 ;     787 #ifdef _MEGA162_INCLUDED_
                 ;     788 UCSR0A=0x00;
000811 b9eb      	OUT  0xB,R30
                 ;     789 UCSR0B=0x98;
000812 e9e8      	LDI  R30,LOW(152)
000813 b9ea      	OUT  0xA,R30
                 ;     790 UCSR0C=0x86;
000814 e8e6      	LDI  R30,LOW(134)
000815 bde0      	OUT  0x20,R30
                 ;     791 UBRR0H=0x00;
000816 e0e0      	LDI  R30,LOW(0)
000817 bde0      	OUT  0x20,R30
                 ;     792 UBRR0L=0x67;      //  16 MHz     
000818 e6e7      	LDI  R30,LOW(103)
000819 b9e9      	OUT  0x9,R30
                 ;     793 
                 ;     794 #else // _MEGA8515_INCLUDE_     
                 ;     795 UCSRA=0x00;
                 ;     796 UCSRB=0x98;
                 ;     797 UCSRC=0x86;
                 ;     798 UBRRH=0x00;
                 ;     799 UBRRL=0x33;       // 8 MHz
                 ;     800 #endif
                 ;     801 
                 ;     802 // Lower page wait state(s): None
                 ;     803 // Upper page wait state(s): None
                 ;     804 MCUCR=0x80;
00081a e8e0      	LDI  R30,LOW(128)
00081b bfe5      	OUT  0x35,R30
                 ;     805 EMCUCR=0x00;     
00081c e0e0      	LDI  R30,LOW(0)
00081d bfe6      	OUT  0x36,R30
                 ;     806 
                 ;     807 // Timer(s)/Counter(s) Interrupt(s) initialization
                 ;     808 TIMSK=0x02;
00081e e0e2      	LDI  R30,LOW(2)
00081f bfe9      	OUT  0x39,R30
                 ;     809 ETIMSK=0x00;
000820 e0e0      	LDI  R30,LOW(0)
000821 93e0 007d 	STS  125,R30
                 ;     810 
                 ;     811 // Load calibration byte for osc.  
                 ;     812 #ifdef _MEGA162_INCLUDED_
                 ;     813 OSCCAL = 0x5E; 
000823 e5ee      	LDI  R30,LOW(94)
000824 b9e4      	OUT  0x4,R30
                 ;     814 #else
                 ;     815 OSCCAL = 0xA7; 
                 ;     816 #endif            
                 ;     817 
                 ;     818 // I2C Bus initialization
                 ;     819 // i2c_init();
                 ;     820 
                 ;     821 // DS1307 Real Time Clock initialization
                 ;     822 // Square wave output on pin SQW/OUT: Off
                 ;     823 // SQW/OUT pin state: 1
                 ;     824 // rtc_init(0,0,1);
                 ;     825     
                 ;     826 // Watchdog Timer initialization
                 ;     827 // Watchdog Timer Prescaler: OSC/2048k     
                 ;     828 #ifdef __WATCH_DOG_
                 ;     829 WDTCR=0x1F;
000825 e1ef      	LDI  R30,LOW(31)
000826 bde1      	OUT  0x21,R30
                 ;     830 WDTCR=0x0F;
000827 e0ef      	LDI  R30,LOW(15)
000828 bde1      	OUT  0x21,R30
                 ;     831 #endif
                 ;     832 }
000829 9508      	RET
                 ;     833 
                 ;     834 void PowerReset()
                 ;     835 {   
                 _PowerReset:
                 ;     836     start_mem = START_RAM_TEXT;     
00082a e4e0      	LDI  R30,LOW(2880)
00082b e0fb      	LDI  R31,HIGH(2880)
00082c 93e0 0164 	STS  _start_mem_G1,R30
00082e 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     837     end_mem   = END_RAM;
000830 e0e0      	LDI  R30,LOW(32768)
000831 e8f0      	LDI  R31,HIGH(32768)
000832 93e0 0166 	STS  _end_mem_G1,R30
000834 93f0 0167 	STS  _end_mem_G1+1,R31
                 ;     838     bkgnd_mem = START_RAM_BK;
000836 e0e0      	LDI  R30,LOW(1280)
000837 e0f5      	LDI  R31,HIGH(1280)
000838 93e0 016a 	STS  _bkgnd_mem_G1,R30
00083a 93f0 016b 	STS  _bkgnd_mem_G1+1,R31
                 ;     839     org_mem   = START_RAM_TEXT;	                   
00083c e4e0      	LDI  R30,LOW(2880)
00083d e0fb      	LDI  R31,HIGH(2880)
00083e 93e0 016c 	STS  _org_mem_G1,R30
000840 93f0 016d 	STS  _org_mem_G1+1,R31
                 ;     840 
                 ;     841     InitDevice();
000842 940e 07f8 	CALL _InitDevice
                 ;     842        
                 ;     843     LED_STATUS = 0;
000844 98c4      	CBI  0x18,4
                 ;     844     BlankRAM(START_RAM,END_RAM);    
000845 e0e0      	LDI  R30,LOW(1280)
000846 e0f5      	LDI  R31,HIGH(1280)
000847 93fa      	ST   -Y,R31
000848 93ea      	ST   -Y,R30
000849 e0e0      	LDI  R30,LOW(32768)
00084a e8f0      	LDI  R31,HIGH(32768)
00084b 93fa      	ST   -Y,R31
00084c 93ea      	ST   -Y,R30
00084d 940e 05b4 	CALL _BlankRAM
                 ;     845     delay_ms(500);LED_STATUS = 1;
00084f efe4      	LDI  R30,LOW(500)
000850 e0f1      	LDI  R31,HIGH(500)
000851 93fa      	ST   -Y,R31
000852 93ea      	ST   -Y,R30
000853 940e 0cea 	CALL _delay_ms
000855 9ac4      	SBI  0x18,4
                 ;     846     LoadConfig();
000856 940e 0585 	CALL _LoadConfig
                 ;     847    
                 ;     848     GetCharWidth(250);
000858 efea      	LDI  R30,LOW(250)
000859 e0f0      	LDI  R31,HIGH(250)
00085a 93fa      	ST   -Y,R31
00085b 93ea      	ST   -Y,R30
00085c 940e 0468 	CALL _GetCharWidth
                 ;     849     current_char_width = 0xFFFF;
00085e efef      	LDI  R30,LOW(65535)
00085f efff      	LDI  R31,HIGH(65535)
000860 93e0 0382 	STS  _current_char_width_G1,R30
000862 93f0 0383 	STS  _current_char_width_G1+1,R31
                 ;     850     next_char_width = 0xFFFF;	 
000864 93e0 0380 	STS  _next_char_width_G1,R30
000866 93f0 0381 	STS  _next_char_width_G1+1,R31
                 ;     851 
                 ;     852     delay_ms(500);LED_STATUS = 0;
000868 efe4      	LDI  R30,LOW(500)
000869 e0f1      	LDI  R31,HIGH(500)
00086a 93fa      	ST   -Y,R31
00086b 93ea      	ST   -Y,R30
00086c 940e 0cea 	CALL _delay_ms
00086e 98c4      	CBI  0x18,4
                 ;     853     LoadToRAM(START_RAM_BK,SCREEN_WIDTH,FRAME_BKGND);  
00086f e0e0      	LDI  R30,LOW(1280)
000870 e0f5      	LDI  R31,HIGH(1280)
000871 93fa      	ST   -Y,R31
000872 93ea      	ST   -Y,R30
000873 ece8      	LDI  R30,LOW(200)
000874 e0f0      	LDI  R31,HIGH(200)
000875 93fa      	ST   -Y,R31
000876 93ea      	ST   -Y,R30
000877 e0e1      	LDI  R30,LOW(1)
000878 93ea      	ST   -Y,R30
000879 940e 0511 	CALL _LoadToRAM
                 ;     854     LoadToRAM(START_RAM_TEXT + SCREEN_WIDTH,_save_text_length,FRAME_TEXT);      
00087b e0e8      	LDI  R30,LOW(3080)
00087c e0fc      	LDI  R31,HIGH(3080)
00087d 93fa      	ST   -Y,R31
00087e 93ea      	ST   -Y,R30
00087f e0a4      	LDI  R26,LOW(__save_text_length)
000880 e0b0      	LDI  R27,HIGH(__save_text_length)
000881 940e 0d4a 	CALL __EEPROMRDW
000883 93fa      	ST   -Y,R31
000884 93ea      	ST   -Y,R30
000885 e0e0      	LDI  R30,LOW(0)
000886 93ea      	ST   -Y,R30
000887 940e 0511 	CALL _LoadToRAM
                 ;     855     LED_STATUS = 1;             
000889 9ac4      	SBI  0x18,4
                 ;     856         
                 ;     857     if (sys_mode&MODE_FONT)                 
00088a 91e0 0171 	LDS  R30,_sys_mode_G1
00088c 78e0      	ANDI R30,LOW(0x80)
00088d f119      	BREQ _0xAB
                 ;     858     {
                 ;     859         BlankRAM(START_RAM,END_RAM);   
00088e e0e0      	LDI  R30,LOW(1280)
00088f e0f5      	LDI  R31,HIGH(1280)
000890 93fa      	ST   -Y,R31
000891 93ea      	ST   -Y,R30
000892 e0e0      	LDI  R30,LOW(32768)
000893 e8f0      	LDI  R31,HIGH(32768)
000894 93fa      	ST   -Y,R31
000895 93ea      	ST   -Y,R30
000896 940e 05b4 	CALL _BlankRAM
                 ;     860         GetTextFromEEPROM();
000898 940e 072d 	CALL _GetTextFromEEPROM
                 ;     861         TextFromFont(szText, 1, 1, START_RAM_TEXT + SCREEN_WIDTH, DATA_LENGTH);
00089a e8e4      	LDI  R30,LOW(_szText_G1)
00089b e0f3      	LDI  R31,HIGH(_szText_G1)
00089c 93fa      	ST   -Y,R31
00089d 93ea      	ST   -Y,R30
00089e e0e1      	LDI  R30,LOW(1)
00089f 93ea      	ST   -Y,R30
0008a0 93ea      	ST   -Y,R30
0008a1 e0e8      	LDI  R30,LOW(3080)
0008a2 e0fc      	LDI  R31,HIGH(3080)
0008a3 93fa      	ST   -Y,R31
0008a4 93ea      	ST   -Y,R30
0008a5 e9e8      	LDI  R30,LOW(3736)
0008a6 e0fe      	LDI  R31,HIGH(3736)
0008a7 93fa      	ST   -Y,R31
0008a8 93ea      	ST   -Y,R30
0008a9 940e 05e4 	CALL _TextFromFont_G1
                 ;     862         start_mem = START_RAM_TEXT + SCREEN_WIDTH;        
0008ab e0e8      	LDI  R30,LOW(3080)
0008ac e0fc      	LDI  R31,HIGH(3080)
0008ad 93e0 0164 	STS  _start_mem_G1,R30
0008af 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     863     } 
                 ;     864                
                 ;     865     // reload configuration
                 ;     866     LED_STATUS = 0;
                 _0xAB:
0008b1 98c4      	CBI  0x18,4
                 ;     867     delay_ms(100);
0008b2 e6e4      	LDI  R30,LOW(100)
0008b3 e0f0      	LDI  R31,HIGH(100)
0008b4 93fa      	ST   -Y,R31
0008b5 93ea      	ST   -Y,R30
0008b6 940e 0cea 	CALL _delay_ms
                 ;     868     LED_STATUS = 1;  
0008b8 9ac4      	SBI  0x18,4
                 ;     869     PORTD = 0x00;
0008b9 e0e0      	LDI  R30,LOW(0)
0008ba bbe2      	OUT  0x12,R30
                 ;     870     DDRD = 0x3F;      
0008bb e3ef      	LDI  R30,LOW(63)
0008bc bbe1      	OUT  0x11,R30
                 ;     871 }
0008bd 9508      	RET
                 ;     872 
                 ;     873 void ProcessCommand()
                 ;     874 {
                 _ProcessCommand:
                 ;     875    	#asm("cli"); 
0008be 94f8      	cli
                 ;     876     RESET_WATCHDOG();
0008bf 95a8      	WDR
                 ;     877     // Turn off the scan board           
                 ;     878     _powerOff();
0008c0 940e 00bf 	CALL __powerOff_G1
                 ;     879     // serial message processing     
                 ;     880     switch (rx_message)
0008c2 2de8      	MOV  R30,R8
                 ;     881     {                  
                 ;     882     case LOAD_FONT_MSG:
0008c3 30e1      	CPI  R30,LOW(0x1)
0008c4 f5e1      	BRNE _0xAF
                 ;     883         {
                 ;     884             if (rx_wparam > DATA_LENGTH) rx_wparam = DATA_LENGTH;
0008c5 e9e8      	LDI  R30,LOW(3736)
0008c6 e0fe      	LDI  R31,HIGH(3736)
0008c7 15e9      	CP   R30,R9
0008c8 05fa      	CPC  R31,R10
0008c9 f410      	BRSH _0xB0
0008ca 2e9e
0008cb 2eaf      	__PUTW1R 9,10
                 ;     885             BlankRAM(START_RAM_TEXT,END_RAM);                       
                 _0xB0:
0008cc e4e0      	LDI  R30,LOW(2880)
0008cd e0fb      	LDI  R31,HIGH(2880)
0008ce 93fa      	ST   -Y,R31
0008cf 93ea      	ST   -Y,R30
0008d0 e0e0      	LDI  R30,LOW(32768)
0008d1 e8f0      	LDI  R31,HIGH(32768)
0008d2 93fa      	ST   -Y,R31
0008d3 93ea      	ST   -Y,R30
0008d4 940e 05b4 	CALL _BlankRAM
                 ;     886             char_count  = rx_lparam;                   
0008d6 92b0 0176
0008d8 92c0 0177 	__PUTWMRN _char_count_G1,0,11,12
                 ;     887             text_length = rx_wparam;   
0008da 9290 0178
0008dc 92a0 0179 	__PUTWMRN _text_length_G1,0,9,10
                 ;     888             SerialToRAM(START_RAM_TEXT,text_length,FRAME_TEXT);             
0008de e4e0      	LDI  R30,LOW(2880)
0008df e0fb      	LDI  R31,HIGH(2880)
0008e0 93fa      	ST   -Y,R31
0008e1 93ea      	ST   -Y,R30
0008e2 91e0 0178 	LDS  R30,_text_length_G1
0008e4 91f0 0179 	LDS  R31,_text_length_G1+1
0008e6 93fa      	ST   -Y,R31
0008e7 93ea      	ST   -Y,R30
0008e8 e0e0      	LDI  R30,LOW(0)
0008e9 93ea      	ST   -Y,R30
0008ea 940e 03ad 	CALL _SerialToRAM
                 ;     889             LoadCharWidth(char_count);                                                              
0008ec 91e0 0176 	LDS  R30,_char_count_G1
0008ee 91f0 0177 	LDS  R31,_char_count_G1+1
0008f0 93fa      	ST   -Y,R31
0008f1 93ea      	ST   -Y,R30
0008f2 940e 03ec 	CALL _LoadCharWidth
                 ;     890 			start_mem = START_RAM_TEXT;				
0008f4 e4e0      	LDI  R30,LOW(2880)
0008f5 e0fb      	LDI  R31,HIGH(2880)
0008f6 93e0 0164 	STS  _start_mem_G1,R30
0008f8 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     891 	    	bkgnd_mem = START_RAM_BK;										  
0008fa e0e0      	LDI  R30,LOW(1280)
0008fb e0f5      	LDI  R31,HIGH(1280)
0008fc 93e0 016a 	STS  _bkgnd_mem_G1,R30
0008fe 93f0 016b 	STS  _bkgnd_mem_G1+1,R31
                 ;     892         }				
                 ;     893         break;
000900 c191      	RJMP _0xAE
                 ;     894     case LOAD_TEXT_MSG:
                 _0xAF:
000901 30e2      	CPI  R30,LOW(0x2)
000902 f5e1      	BRNE _0xB1
                 ;     895         {
                 ;     896             if (rx_wparam > DATA_LENGTH) rx_wparam = DATA_LENGTH;
000903 e9e8      	LDI  R30,LOW(3736)
000904 e0fe      	LDI  R31,HIGH(3736)
000905 15e9      	CP   R30,R9
000906 05fa      	CPC  R31,R10
000907 f410      	BRSH _0xB2
000908 2e9e
000909 2eaf      	__PUTW1R 9,10
                 ;     897             BlankRAM(START_RAM_TEXT,END_RAM);                       
                 _0xB2:
00090a e4e0      	LDI  R30,LOW(2880)
00090b e0fb      	LDI  R31,HIGH(2880)
00090c 93fa      	ST   -Y,R31
00090d 93ea      	ST   -Y,R30
00090e e0e0      	LDI  R30,LOW(32768)
00090f e8f0      	LDI  R31,HIGH(32768)
000910 93fa      	ST   -Y,R31
000911 93ea      	ST   -Y,R30
000912 940e 05b4 	CALL _BlankRAM
                 ;     898             char_count  = rx_lparam;                   
000914 92b0 0176
000916 92c0 0177 	__PUTWMRN _char_count_G1,0,11,12
                 ;     899             text_length = rx_wparam;   
000918 9290 0178
00091a 92a0 0179 	__PUTWMRN _text_length_G1,0,9,10
                 ;     900             SerialToRAM(START_RAM_TEXT + SCREEN_WIDTH,text_length,FRAME_TEXT);                
00091c e0e8      	LDI  R30,LOW(3080)
00091d e0fc      	LDI  R31,HIGH(3080)
00091e 93fa      	ST   -Y,R31
00091f 93ea      	ST   -Y,R30
000920 91e0 0178 	LDS  R30,_text_length_G1
000922 91f0 0179 	LDS  R31,_text_length_G1+1
000924 93fa      	ST   -Y,R31
000925 93ea      	ST   -Y,R30
000926 e0e0      	LDI  R30,LOW(0)
000927 93ea      	ST   -Y,R30
000928 940e 03ad 	CALL _SerialToRAM
                 ;     901             LoadCharWidth(char_count);                                                              
00092a 91e0 0176 	LDS  R30,_char_count_G1
00092c 91f0 0177 	LDS  R31,_char_count_G1+1
00092e 93fa      	ST   -Y,R31
00092f 93ea      	ST   -Y,R30
000930 940e 03ec 	CALL _LoadCharWidth
                 ;     902 			start_mem = START_RAM_TEXT + SCREEN_WIDTH;				
000932 e0e8      	LDI  R30,LOW(3080)
000933 e0fc      	LDI  R31,HIGH(3080)
000934 93e0 0164 	STS  _start_mem_G1,R30
000936 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     903 	    	bkgnd_mem = START_RAM_BK;		    									  
000938 e0e0      	LDI  R30,LOW(1280)
000939 e0f5      	LDI  R31,HIGH(1280)
00093a 93e0 016a 	STS  _bkgnd_mem_G1,R30
00093c 93f0 016b 	STS  _bkgnd_mem_G1+1,R31
                 ;     904         }				
                 ;     905         break;
00093e c153      	RJMP _0xAE
                 ;     906     case LOAD_BKGND_MSG:
                 _0xB1:
00093f 30e3      	CPI  R30,LOW(0x3)
000940 f541      	BRNE _0xB3
                 ;     907         {
                 ;     908             if (rx_wparam > SCREEN_WIDTH) rx_wparam = SCREEN_WIDTH;
000941 ece8      	LDI  R30,LOW(200)
000942 e0f0      	LDI  R31,HIGH(200)
000943 15e9      	CP   R30,R9
000944 05fa      	CPC  R31,R10
000945 f410      	BRSH _0xB4
000946 2e9e
000947 2eaf      	__PUTW1R 9,10
                 ;     909             BlankRAM(START_RAM_BK,START_RAM_TEXT);                    
                 _0xB4:
000948 e0e0      	LDI  R30,LOW(1280)
000949 e0f5      	LDI  R31,HIGH(1280)
00094a 93fa      	ST   -Y,R31
00094b 93ea      	ST   -Y,R30
00094c e4e0      	LDI  R30,LOW(2880)
00094d e0fb      	LDI  R31,HIGH(2880)
00094e 93fa      	ST   -Y,R31
00094f 93ea      	ST   -Y,R30
000950 940e 05b4 	CALL _BlankRAM
                 ;     910             SerialToRAM(START_RAM_BK,rx_wparam,FRAME_BKGND);                                               
000952 e0e0      	LDI  R30,LOW(1280)
000953 e0f5      	LDI  R31,HIGH(1280)
000954 93fa      	ST   -Y,R31
000955 93ea      	ST   -Y,R30
000956 92aa      	ST   -Y,R10
000957 929a      	ST   -Y,R9
000958 e0e1      	LDI  R30,LOW(1)
000959 93ea      	ST   -Y,R30
00095a 940e 03ad 	CALL _SerialToRAM
                 ;     911 		    start_mem = START_RAM_TEXT + SCREEN_WIDTH;				
00095c e0e8      	LDI  R30,LOW(3080)
00095d e0fc      	LDI  R31,HIGH(3080)
00095e 93e0 0164 	STS  _start_mem_G1,R30
000960 93f0 0165 	STS  _start_mem_G1+1,R31
                 ;     912 		    bkgnd_mem = START_RAM_BK;				    
000962 e0e0      	LDI  R30,LOW(1280)
000963 e0f5      	LDI  R31,HIGH(1280)
000964 93e0 016a 	STS  _bkgnd_mem_G1,R30
000966 93f0 016b 	STS  _bkgnd_mem_G1+1,R31
                 ;     913 		}
                 ;     914         break;     
000968 c129      	RJMP _0xAE
                 ;     915     case EEPROM_LOAD_FONT_MSG:
                 _0xB3:
000969 30e4      	CPI  R30,LOW(0x4)
00096a f479      	BRNE _0xB5
                 ;     916         {
                 ;     917             LoadToRAM(START_RAM_TEXT,text_length,FRAME_FONT);                                                
00096b e4e0      	LDI  R30,LOW(2880)
00096c e0fb      	LDI  R31,HIGH(2880)
00096d 93fa      	ST   -Y,R31
00096e 93ea      	ST   -Y,R30
00096f 91e0 0178 	LDS  R30,_text_length_G1
000971 91f0 0179 	LDS  R31,_text_length_G1+1
000973 93fa      	ST   -Y,R31
000974 93ea      	ST   -Y,R30
000975 e0e2      	LDI  R30,LOW(2)
000976 93ea      	ST   -Y,R30
000977 940e 0511 	CALL _LoadToRAM
                 ;     918         }
                 ;     919         break;                
000979 c118      	RJMP _0xAE
                 ;     920     case EEPROM_SAVE_FONT_MSG:
                 _0xB5:
00097a 30e5      	CPI  R30,LOW(0x5)
00097b f4b9      	BRNE _0xB6
                 ;     921         {                               									                                          
                 ;     922             SaveToEEPROM(START_RAM_TEXT,text_length,FRAME_FONT);                 
00097c e4e0      	LDI  R30,LOW(2880)
00097d e0fb      	LDI  R31,HIGH(2880)
00097e 93fa      	ST   -Y,R31
00097f 93ea      	ST   -Y,R30
000980 91e0 0178 	LDS  R30,_text_length_G1
000982 91f0 0179 	LDS  R31,_text_length_G1+1
000984 93fa      	ST   -Y,R31
000985 93ea      	ST   -Y,R30
000986 e0e2      	LDI  R30,LOW(2)
000987 93ea      	ST   -Y,R30
000988 940e 04bf 	CALL _SaveToEEPROM
                 ;     923             SaveFontHeader(char_count);                      
00098a 91e0 0176 	LDS  R30,_char_count_G1
00098c 91f0 0177 	LDS  R31,_char_count_G1+1
00098e 93fa      	ST   -Y,R31
00098f 93ea      	ST   -Y,R30
000990 940e 0494 	CALL _SaveFontHeader
                 ;     924         }
                 ;     925         break;
000992 c0ff      	RJMP _0xAE
                 ;     926     case EEPROM_LOAD_TEXT_MSG:
                 _0xB6:
000993 30e6      	CPI  R30,LOW(0x6)
000994 f499      	BRNE _0xB7
                 ;     927         {          
                 ;     928             LoadToRAM(START_RAM_TEXT + SCREEN_WIDTH,text_length = _save_text_length,FRAME_TEXT);
000995 e0e8      	LDI  R30,LOW(3080)
000996 e0fc      	LDI  R31,HIGH(3080)
000997 93fa      	ST   -Y,R31
000998 93ea      	ST   -Y,R30
000999 e0a4      	LDI  R26,LOW(__save_text_length)
00099a e0b0      	LDI  R27,HIGH(__save_text_length)
00099b 940e 0d4a 	CALL __EEPROMRDW
00099d 93e0 0178 	STS  _text_length_G1,R30
00099f 93f0 0179 	STS  _text_length_G1+1,R31
0009a1 93fa      	ST   -Y,R31
0009a2 93ea      	ST   -Y,R30
0009a3 e0e0      	LDI  R30,LOW(0)
0009a4 93ea      	ST   -Y,R30
0009a5 940e 0511 	CALL _LoadToRAM
                 ;     929         }
                 ;     930         break;                   
0009a7 c0ea      	RJMP _0xAE
                 ;     931     case EEPROM_SAVE_TEXT_MSG:
                 _0xB7:
0009a8 30e7      	CPI  R30,LOW(0x7)
0009a9 f4d9      	BRNE _0xB8
                 ;     932         {                                                
                 ;     933             SaveToEEPROM(START_RAM_TEXT,_save_text_length = text_length,FRAME_TEXT);       
0009aa e4e0      	LDI  R30,LOW(2880)
0009ab e0fb      	LDI  R31,HIGH(2880)
0009ac 93fa      	ST   -Y,R31
0009ad 93ea      	ST   -Y,R30
0009ae 91e0 0178 	LDS  R30,_text_length_G1
0009b0 91f0 0179 	LDS  R31,_text_length_G1+1
0009b2 e0a4      	LDI  R26,LOW(__save_text_length)
0009b3 e0b0      	LDI  R27,HIGH(__save_text_length)
0009b4 940e 0d5a 	CALL __EEPROMWRW
0009b6 93fa      	ST   -Y,R31
0009b7 93ea      	ST   -Y,R30
0009b8 e0e0      	LDI  R30,LOW(0)
0009b9 93ea      	ST   -Y,R30
0009ba 940e 04bf 	CALL _SaveToEEPROM
                 ;     934             SaveCharWidth(char_count);   
0009bc 91e0 0176 	LDS  R30,_char_count_G1
0009be 91f0 0177 	LDS  R31,_char_count_G1+1
0009c0 93fa      	ST   -Y,R31
0009c1 93ea      	ST   -Y,R30
0009c2 940e 043c 	CALL _SaveCharWidth
                 ;     935         }
                 ;     936         break;
0009c4 c0cd      	RJMP _0xAE
                 ;     937     case EEPROM_LOAD_BKGND_MSG:
                 _0xB8:
0009c5 30e8      	CPI  R30,LOW(0x8)
0009c6 f469      	BRNE _0xB9
                 ;     938         {                                                                  
                 ;     939             LoadToRAM(START_RAM_BK,SCREEN_WIDTH,FRAME_BKGND);                                                                                                           
0009c7 e0e0      	LDI  R30,LOW(1280)
0009c8 e0f5      	LDI  R31,HIGH(1280)
0009c9 93fa      	ST   -Y,R31
0009ca 93ea      	ST   -Y,R30
0009cb ece8      	LDI  R30,LOW(200)
0009cc e0f0      	LDI  R31,HIGH(200)
0009cd 93fa      	ST   -Y,R31
0009ce 93ea      	ST   -Y,R30
0009cf e0e1      	LDI  R30,LOW(1)
0009d0 93ea      	ST   -Y,R30
0009d1 940e 0511 	CALL _LoadToRAM
                 ;     940         }  
                 ;     941         break;                 
0009d3 c0be      	RJMP _0xAE
                 ;     942     case EEPROM_SAVE_BKGND_MSG:
                 _0xB9:
0009d4 30e9      	CPI  R30,LOW(0x9)
0009d5 f469      	BRNE _0xBA
                 ;     943         {                                                                  
                 ;     944             SaveToEEPROM(START_RAM_BK,SCREEN_WIDTH,FRAME_BKGND);
0009d6 e0e0      	LDI  R30,LOW(1280)
0009d7 e0f5      	LDI  R31,HIGH(1280)
0009d8 93fa      	ST   -Y,R31
0009d9 93ea      	ST   -Y,R30
0009da ece8      	LDI  R30,LOW(200)
0009db e0f0      	LDI  R31,HIGH(200)
0009dc 93fa      	ST   -Y,R31
0009dd 93ea      	ST   -Y,R30
0009de e0e1      	LDI  R30,LOW(1)
0009df 93ea      	ST   -Y,R30
0009e0 940e 04bf 	CALL _SaveToEEPROM
                 ;     945         }
                 ;     946         break;
0009e2 c0af      	RJMP _0xAE
                 ;     947     case EEPROM_LOAD_ALL_MSG:
                 _0xBA:
0009e3 30ea      	CPI  R30,LOW(0xA)
0009e4 f4f9      	BRNE _0xBB
                 ;     948         {   
                 ;     949             LoadToRAM(START_RAM_BK,SCREEN_WIDTH,FRAME_BKGND);     
0009e5 e0e0      	LDI  R30,LOW(1280)
0009e6 e0f5      	LDI  R31,HIGH(1280)
0009e7 93fa      	ST   -Y,R31
0009e8 93ea      	ST   -Y,R30
0009e9 ece8      	LDI  R30,LOW(200)
0009ea e0f0      	LDI  R31,HIGH(200)
0009eb 93fa      	ST   -Y,R31
0009ec 93ea      	ST   -Y,R30
0009ed e0e1      	LDI  R30,LOW(1)
0009ee 93ea      	ST   -Y,R30
0009ef 940e 0511 	CALL _LoadToRAM
                 ;     950             LoadToRAM(START_RAM_TEXT + SCREEN_WIDTH,text_length = _save_text_length,FRAME_TEXT);
0009f1 e0e8      	LDI  R30,LOW(3080)
0009f2 e0fc      	LDI  R31,HIGH(3080)
0009f3 93fa      	ST   -Y,R31
0009f4 93ea      	ST   -Y,R30
0009f5 e0a4      	LDI  R26,LOW(__save_text_length)
0009f6 e0b0      	LDI  R27,HIGH(__save_text_length)
0009f7 940e 0d4a 	CALL __EEPROMRDW
0009f9 93e0 0178 	STS  _text_length_G1,R30
0009fb 93f0 0179 	STS  _text_length_G1+1,R31
0009fd 93fa      	ST   -Y,R31
0009fe 93ea      	ST   -Y,R30
0009ff e0e0      	LDI  R30,LOW(0)
000a00 93ea      	ST   -Y,R30
000a01 940e 0511 	CALL _LoadToRAM
                 ;     951         }
                 ;     952         break;                
000a03 c08e      	RJMP _0xAE
                 ;     953     case EEPROM_SAVE_ALL_MSG:
                 _0xBB:
000a04 30eb      	CPI  R30,LOW(0xB)
000a05 f539      	BRNE _0xBC
                 ;     954         {       
                 ;     955             SaveCharWidth(char_count);   
000a06 91e0 0176 	LDS  R30,_char_count_G1
000a08 91f0 0177 	LDS  R31,_char_count_G1+1
000a0a 93fa      	ST   -Y,R31
000a0b 93ea      	ST   -Y,R30
000a0c 940e 043c 	CALL _SaveCharWidth
                 ;     956             SaveToEEPROM(START_RAM_BK,SCREEN_WIDTH,FRAME_BKGND);
000a0e e0e0      	LDI  R30,LOW(1280)
000a0f e0f5      	LDI  R31,HIGH(1280)
000a10 93fa      	ST   -Y,R31
000a11 93ea      	ST   -Y,R30
000a12 ece8      	LDI  R30,LOW(200)
000a13 e0f0      	LDI  R31,HIGH(200)
000a14 93fa      	ST   -Y,R31
000a15 93ea      	ST   -Y,R30
000a16 e0e1      	LDI  R30,LOW(1)
000a17 93ea      	ST   -Y,R30
000a18 940e 04bf 	CALL _SaveToEEPROM
                 ;     957             SaveToEEPROM(START_RAM_TEXT,_save_text_length = text_length,FRAME_TEXT);
000a1a e4e0      	LDI  R30,LOW(2880)
000a1b e0fb      	LDI  R31,HIGH(2880)
000a1c 93fa      	ST   -Y,R31
000a1d 93ea      	ST   -Y,R30
000a1e 91e0 0178 	LDS  R30,_text_length_G1
000a20 91f0 0179 	LDS  R31,_text_length_G1+1
000a22 e0a4      	LDI  R26,LOW(__save_text_length)
000a23 e0b0      	LDI  R27,HIGH(__save_text_length)
000a24 940e 0d5a 	CALL __EEPROMWRW
000a26 93fa      	ST   -Y,R31
000a27 93ea      	ST   -Y,R30
000a28 e0e0      	LDI  R30,LOW(0)
000a29 93ea      	ST   -Y,R30
000a2a 940e 04bf 	CALL _SaveToEEPROM
                 ;     958         }            
                 ;     959         break;
000a2c c065      	RJMP _0xAE
                 ;     960     case SET_RTC_MSG:
                 _0xBC:
000a2d 30ec      	CPI  R30,LOW(0xC)
000a2e f419      	BRNE _0xBD
                 ;     961         {                                
                 ;     962             SetRTCDateTime();
000a2f 940e 05c9 	CALL _SetRTCDateTime
                 ;     963         }
                 ;     964         break;
000a31 c060      	RJMP _0xAE
                 ;     965     case SET_CFG_MSG:
                 _0xBD:
000a32 30ed      	CPI  R30,LOW(0xD)
000a33 f569      	BRNE _0xBE
                 ;     966         {
                 ;     967             _cfg_shift_rate  = shift_rate  = rx_wparam&0x00ff;
000a34 2de9
000a35 2dfa      	__GETW1R 9,10
000a36 70f0      	ANDI R31,HIGH(0xFF)
000a37 93e0 016f 	STS  _shift_rate_G1,R30
000a39 e0a2      	LDI  R26,LOW(__cfg_shift_rate)
000a3a e0b0      	LDI  R27,HIGH(__cfg_shift_rate)
000a3b 940e 0d62 	CALL __EEPROMWRB
                 ;     968             _cfg_shift_step  = shift_step  = rx_wparam>>8;                       
000a3d 2dea      	MOV  R30,R10
000a3e 70f0      	ANDI R31,HIGH(0x0)
000a3f 93e0 0170 	STS  _shift_step_G1,R30
000a41 e0a3      	LDI  R26,LOW(__cfg_shift_step)
000a42 e0b0      	LDI  R27,HIGH(__cfg_shift_step)
000a43 940e 0d62 	CALL __EEPROMWRB
                 ;     969             _cfg_frm_delay   = frm_delay   = rx_lparam&0x00ff;
000a45 2deb
000a46 2dfc      	__GETW1R 11,12
000a47 70f0      	ANDI R31,HIGH(0xFF)
000a48 93e0 016e 	STS  _frm_delay_G1,R30
000a4a e0a0      	LDI  R26,LOW(__cfg_frm_delay)
000a4b e0b0      	LDI  R27,HIGH(__cfg_frm_delay)
000a4c 940e 0d62 	CALL __EEPROMWRB
                 ;     970             _cfg_sys_mode    = sys_mode    = rx_lparam>>8;                     
000a4e 2dec      	MOV  R30,R12
000a4f 70f0      	ANDI R31,HIGH(0x0)
000a50 93e0 0171 	STS  _sys_mode_G1,R30
000a52 e0a1      	LDI  R26,LOW(__cfg_sys_mode)
000a53 e0b0      	LDI  R27,HIGH(__cfg_sys_mode)
000a54 940e 0d62 	CALL __EEPROMWRB
                 ;     971             // preset value for scrolling, must be set here
                 ;     972             current_char_width = next_char_width = 0xFFFF;
000a56 efef      	LDI  R30,LOW(65535)
000a57 efff      	LDI  R31,HIGH(65535)
000a58 93e0 0380 	STS  _next_char_width_G1,R30
000a5a 93f0 0381 	STS  _next_char_width_G1+1,R31
000a5c 93e0 0382 	STS  _current_char_width_G1,R30
000a5e 93f0 0383 	STS  _current_char_width_G1+1,R31
                 ;     973         }
                 ;     974         break;
000a60 c031      	RJMP _0xAE
                 ;     975     case LOAD_DEFAULT_MSG:
                 _0xBE:
000a61 30ee      	CPI  R30,LOW(0xE)
000a62 f539      	BRNE _0xBF
                 ;     976         {
                 ;     977             _cfg_shift_rate  = shift_rate  = 10;
000a63 e0ea      	LDI  R30,LOW(10)
000a64 93e0 016f 	STS  _shift_rate_G1,R30
000a66 e0a2      	LDI  R26,LOW(__cfg_shift_rate)
000a67 e0b0      	LDI  R27,HIGH(__cfg_shift_rate)
000a68 940e 0d62 	CALL __EEPROMWRB
                 ;     978             _cfg_shift_step  = shift_step  = 1;
000a6a e0e1      	LDI  R30,LOW(1)
000a6b 93e0 0170 	STS  _shift_step_G1,R30
000a6d e0a3      	LDI  R26,LOW(__cfg_shift_step)
000a6e e0b0      	LDI  R27,HIGH(__cfg_shift_step)
000a6f 940e 0d62 	CALL __EEPROMWRB
                 ;     979             _cfg_sys_mode    = sys_mode    = 0x0F;
000a71 e0ef      	LDI  R30,LOW(15)
000a72 93e0 0171 	STS  _sys_mode_G1,R30
000a74 e0a1      	LDI  R26,LOW(__cfg_sys_mode)
000a75 e0b0      	LDI  R27,HIGH(__cfg_sys_mode)
000a76 940e 0d62 	CALL __EEPROMWRB
                 ;     980             _cfg_frm_delay   = frm_delay   = 100; 
000a78 e6e4      	LDI  R30,LOW(100)
000a79 93e0 016e 	STS  _frm_delay_G1,R30
000a7b e0a0      	LDI  R26,LOW(__cfg_frm_delay)
000a7c e0b0      	LDI  R27,HIGH(__cfg_frm_delay)
000a7d 940e 0d62 	CALL __EEPROMWRB
                 ;     981             _save_text_length = text_length = SCREEN_WIDTH;
000a7f ece8      	LDI  R30,LOW(200)
000a80 e0f0      	LDI  R31,HIGH(200)
000a81 93e0 0178 	STS  _text_length_G1,R30
000a83 93f0 0179 	STS  _text_length_G1+1,R31
000a85 e0a4      	LDI  R26,LOW(__save_text_length)
000a86 e0b0      	LDI  R27,HIGH(__save_text_length)
000a87 940e 0d5a 	CALL __EEPROMWRW
                 ;     982         }	 	                 
                 ;     983         break;           
000a89 c008      	RJMP _0xAE
                 ;     984     case LOAD_TEXT_ASCII_MSG:
                 _0xBF:
000a8a 30ef      	CPI  R30,LOW(0xF)
000a8b f431      	BRNE _0xC1
                 ;     985         {                                                
                 ;     986             LoadTextASCII(rx_wparam,rx_lparam);
000a8c 92aa      	ST   -Y,R10
000a8d 929a      	ST   -Y,R9
000a8e 92ca      	ST   -Y,R12
000a8f 92ba      	ST   -Y,R11
000a90 940e 077f 	CALL _LoadTextASCII_G1
                 ;     987         }                    
                 ;     988         break;
                 ;     989     default:
                 _0xC1:
                 ;     990         break;
                 ;     991     }                 
                 _0xAE:
                 ;     992     send_echo_msg();            
000a92 d083      	RCALL _send_echo_msg
                 ;     993     rx_message = UNKNOWN_MSG;
000a93 2488      	CLR  R8
                 ;     994     #asm("sei");
000a94 9478      	sei
                 ;     995     PORTD = 0x00;
000a95 e0e0      	LDI  R30,LOW(0)
000a96 bbe2      	OUT  0x12,R30
                 ;     996     DDRD = 0x3F;     
000a97 e3ef      	LDI  R30,LOW(63)
000a98 bbe1      	OUT  0x11,R30
                 ;     997 
                 ;     998 }          
000a99 9508      	RET
                 ;     999 ////////////////////////////////////////////////////////////////////////////////
                 ;    1000 // MAIN PROGRAM
                 ;    1001 ////////////////////////////////////////////////////////////////////////////////
                 ;    1002 void main(void)
                 ;    1003 {         
                 _main:
                 ;    1004     if (MCUCSR & 8){
000a9a b7e4      	IN   R30,0x34
000a9b ffe3      	SBRS R30,3
000a9c c005      	RJMP _0xC2
                 ;    1005         // Watchdog Reset
                 ;    1006         MCUCSR&=0xE0;  
000a9d b7e4      	IN   R30,0x34
000a9e 7ee0      	ANDI R30,LOW(0xE0)
000a9f bfe4      	OUT  0x34,R30
                 ;    1007         reset_serial(); 
000aa0 d09b      	RCALL _reset_serial
                 ;    1008     }
                 ;    1009     else {      
000aa1 c003      	RJMP _0xC3
                 _0xC2:
                 ;    1010         MCUCSR&=0xE0;
000aa2 b7e4      	IN   R30,0x34
000aa3 7ee0      	ANDI R30,LOW(0xE0)
000aa4 bfe4      	OUT  0x34,R30
                 ;    1011     }                                     
                 _0xC3:
                 ;    1012      
                 ;    1013     PowerReset();                        
000aa5 940e 082a 	CALL _PowerReset
                 ;    1014     #asm("sei");     
000aa7 9478      	sei
                 ;    1015             
                 ;    1016     while (1){                     
                 _0xC4:
                 ;    1017         if (rx_message != UNKNOWN_MSG){   
000aa8 2088      	TST  R8
000aa9 f019      	BREQ _0xC7
                 ;    1018             ProcessCommand();   
000aaa 940e 08be 	CALL _ProcessCommand
                 ;    1019         }
                 ;    1020         else{           
000aac c004      	RJMP _0xC8
                 _0xC7:
                 ;    1021             _displayFrame();
000aad 940e 00cd 	CALL __displayFrame_G1
                 ;    1022             _doScroll();                        
000aaf 940e 01d3 	CALL __doScroll_G1
                 ;    1023         }
                 _0xC8:
                 ;    1024         RESET_WATCHDOG();
000ab1 95a8      	WDR
                 ;    1025     };
000ab2 940c 0aa8 	JMP  _0xC4
                 ;    1026 }
                 _0xC9:
000ab4 0000      	NOP
000ab5 cffe      	RJMP _0xC9
                 ;    1027                          
                 ;    1028 #include "define.h"
                 ;    1029 
                 ;    1030 ///////////////////////////////////////////////////////////////
                 ;    1031 // serial interrupt handle - processing serial message ...
                 ;    1032 ///////////////////////////////////////////////////////////////
                 ;    1033 // [0x55][0x55][0x55][rx_message][rx_wparam][rx_lparam]
                 ;    1034 ///////////////////////////////////////////////////////////////
                 ;    1035 BYTE rx_buffer[RX_BUFFER_SIZE];
                 
                 	.DSEG
                 _rx_buffer:
0003aa           	.BYTE 0x8
                 ;    1036 extern BYTE  rx_message;
                 ;    1037 extern WORD  rx_wparam;
                 ;    1038 extern WORD  rx_lparam;
                 ;    1039 
                 ;    1040 #if RX_BUFFER_SIZE<256
                 ;    1041 unsigned char rx_wr_index,rx_counter;
                 ;    1042 #else
                 ;    1043 unsigned int rx_wr_index,rx_counter;
                 ;    1044 #endif
                 ;    1045 
                 ;    1046 void send_echo_msg();
                 ;    1047 
                 ;    1048 // USART Receiver interrupt service routine
                 ;    1049 #ifdef _MEGA162_INCLUDED_                    
                 ;    1050 interrupt [USART0_RXC] void usart_rx_isr(void)
                 ;    1051 #else
                 ;    1052 interrupt [USART_RXC] void usart_rx_isr(void)
                 ;    1053 #endif
                 ;    1054 {
                 
                 	.CSEG
                 _usart_rx_isr:
000ab6 93aa      	ST   -Y,R26
000ab7 93ba      	ST   -Y,R27
000ab8 93ea      	ST   -Y,R30
000ab9 93fa      	ST   -Y,R31
000aba b7ef      	IN   R30,SREG
000abb 93ea      	ST   -Y,R30
                 ;    1055 char status,data;
                 ;    1056 #ifdef _MEGA162_INCLUDED_  
                 ;    1057 status=UCSR0A;
000abc 931a      	ST   -Y,R17
000abd 930a      	ST   -Y,R16
                 ;	status -> R16
                 ;	data -> R17
000abe b10b      	IN   R16,11
                 ;    1058 data=UDR0;
000abf b11c      	IN   R17,12
                 ;    1059 #else     
                 ;    1060 status=UCSRA;
                 ;    1061 data=UDR;
                 ;    1062 #endif          
                 ;    1063     if ((status & (FRAMING_ERROR | PARITY_ERROR | DATA_OVERRUN))==0)
000ac0 2fe0      	MOV  R30,R16
000ac1 71ec      	ANDI R30,LOW(0x1C)
000ac2 f011      	BREQ PC+3
000ac3 940c 0b0d 	JMP _0xCA
                 ;    1064     {
                 ;    1065         rx_buffer[rx_wr_index]=data; 
000ac5 2dad      	MOV  R26,R13
000ac6 e0b0      	LDI  R27,0
000ac7 55a6      	SUBI R26,LOW(-_rx_buffer)
000ac8 4fbc      	SBCI R27,HIGH(-_rx_buffer)
000ac9 931c      	ST   X,R17
                 ;    1066         if (++rx_wr_index == RX_BUFFER_SIZE) rx_wr_index=0;
000aca 94d3      	INC  R13
000acb e0e8      	LDI  R30,LOW(8)
000acc 15ed      	CP   R30,R13
000acd f409      	BRNE _0xCB
000ace 24dd      	CLR  R13
                 ;    1067         if (++rx_counter == RX_BUFFER_SIZE)
                 _0xCB:
000acf 94e3      	INC  R14
000ad0 e0e8      	LDI  R30,LOW(8)
000ad1 15ee      	CP   R30,R14
000ad2 f5d1      	BRNE _0xCC
                 ;    1068         {
                 ;    1069             rx_counter=0;
000ad3 24ee      	CLR  R14
                 ;    1070             if (
                 ;    1071                 rx_buffer[0]==WAKEUP_CHAR && rx_buffer[1]==WAKEUP_CHAR &&        
                 ;    1072                 rx_buffer[2]==WAKEUP_CHAR 
                 ;    1073                 )
000ad4 91a0 03aa 	LDS  R26,_rx_buffer
000ad6 35a5      	CPI  R26,LOW(0x55)
000ad7 f441      	BRNE _0xCE
000ad8 91e0 03ab 	__GETB1MN _rx_buffer,1
000ada 35e5      	CPI  R30,LOW(0x55)
000adb f421      	BRNE _0xCE
000adc 91e0 03ac 	__GETB1MN _rx_buffer,2
000ade 35e5      	CPI  R30,LOW(0x55)
000adf f009      	BREQ _0xCF
                 _0xCE:
000ae0 c01d      	RJMP _0xCD
                 _0xCF:
                 ;    1074             {
                 ;    1075                 rx_message  = rx_buffer[3];    // message value 
000ae1 9080 03ad 	__GETBRMN 8,_rx_buffer,3
                 ;    1076                 rx_wparam   = rx_buffer[4];    // wparam value
000ae3 9090 03ae 	__GETBRMN 9,_rx_buffer,4
000ae5 24aa      	CLR  R10
                 ;    1077                 rx_wparam   = (rx_wparam<<8)|rx_buffer[5]; 
000ae6 2df9      	MOV  R31,R9
000ae7 e0e0      	LDI  R30,LOW(0)
000ae8 01df      	MOVW R26,R30
000ae9 91e0 03af 	__GETB1MN _rx_buffer,5
000aeb e0f0      	LDI  R31,0
000aec 2bea      	OR   R30,R26
000aed 2bfb      	OR   R31,R27
000aee 2e9e
000aef 2eaf      	__PUTW1R 9,10
                 ;    1078                 rx_lparam   = rx_buffer[6];    // lparam value
000af0 90b0 03b0 	__GETBRMN 11,_rx_buffer,6
000af2 24cc      	CLR  R12
                 ;    1079                 rx_lparam   = (rx_lparam<<8)|rx_buffer[7];                           
000af3 2dfb      	MOV  R31,R11
000af4 e0e0      	LDI  R30,LOW(0)
000af5 01df      	MOVW R26,R30
000af6 91e0 03b1 	__GETB1MN _rx_buffer,7
000af8 e0f0      	LDI  R31,0
000af9 2bea      	OR   R30,R26
000afa 2bfb      	OR   R31,R27
000afb 2ebe
000afc 2ecf      	__PUTW1R 11,12
                 ;    1080             }
                 ;    1081             else if(
000afd c00f      	RJMP _0xD0
                 _0xCD:
                 ;    1082                 rx_buffer[0]==ESCAPE_CHAR && rx_buffer[1]==ESCAPE_CHAR &&        
                 ;    1083                 rx_buffer[2]==ESCAPE_CHAR 
                 ;    1084                 )
000afe 91a0 03aa 	LDS  R26,_rx_buffer
000b00 3faf      	CPI  R26,LOW(0xFF)
000b01 f441      	BRNE _0xD2
000b02 91e0 03ab 	__GETB1MN _rx_buffer,1
000b04 3fef      	CPI  R30,LOW(0xFF)
000b05 f421      	BRNE _0xD2
000b06 91e0 03ac 	__GETB1MN _rx_buffer,2
000b08 3fef      	CPI  R30,LOW(0xFF)
000b09 f009      	BREQ _0xD3
                 _0xD2:
000b0a c002      	RJMP _0xD1
                 _0xD3:
                 ;    1085             {
                 ;    1086                 rx_wr_index=0;
000b0b 24dd      	CLR  R13
                 ;    1087                 rx_counter =0;
000b0c 24ee      	CLR  R14
                 ;    1088             }      
                 ;    1089         };
                 _0xD1:
                 _0xD0:
                 _0xCC:
                 ;    1090     };
                 _0xCA:
                 ;    1091 }
000b0d 9109      	LD   R16,Y+
000b0e 9119      	LD   R17,Y+
000b0f 91e9      	LD   R30,Y+
000b10 bfef      	OUT  SREG,R30
000b11 91f9      	LD   R31,Y+
000b12 91e9      	LD   R30,Y+
000b13 91b9      	LD   R27,Y+
000b14 91a9      	LD   R26,Y+
000b15 9518      	RETI
                 ;    1092 
                 ;    1093 void send_echo_msg()
                 ;    1094 {
                 _send_echo_msg:
                 ;    1095     putchar(WAKEUP_CHAR);
000b16 e5e5      	LDI  R30,LOW(85)
000b17 93ea      	ST   -Y,R30
000b18 940e 0c43 	CALL _putchar
                 ;    1096     putchar(WAKEUP_CHAR);
000b1a e5e5      	LDI  R30,LOW(85)
000b1b 93ea      	ST   -Y,R30
000b1c 940e 0c43 	CALL _putchar
                 ;    1097     putchar(WAKEUP_CHAR);                
000b1e e5e5      	LDI  R30,LOW(85)
000b1f 93ea      	ST   -Y,R30
000b20 940e 0c43 	CALL _putchar
                 ;    1098     putchar(rx_message);
000b22 928a      	ST   -Y,R8
000b23 940e 0c43 	CALL _putchar
                 ;    1099     putchar(rx_wparam>>8);
000b25 2dea      	MOV  R30,R10
000b26 70f0      	ANDI R31,HIGH(0x0)
000b27 93ea      	ST   -Y,R30
000b28 940e 0c43 	CALL _putchar
                 ;    1100     putchar(rx_wparam&0x00FF);
000b2a 2de9
000b2b 2dfa      	__GETW1R 9,10
000b2c 70f0      	ANDI R31,HIGH(0xFF)
000b2d 93ea      	ST   -Y,R30
000b2e 940e 0c43 	CALL _putchar
                 ;    1101     putchar(rx_lparam>>8);        
000b30 2dec      	MOV  R30,R12
000b31 70f0      	ANDI R31,HIGH(0x0)
000b32 93ea      	ST   -Y,R30
000b33 940e 0c43 	CALL _putchar
                 ;    1102     putchar(rx_lparam&0x00FF);
000b35 2deb
000b36 2dfc      	__GETW1R 11,12
000b37 70f0      	ANDI R31,HIGH(0xFF)
000b38 93ea      	ST   -Y,R30
000b39 940e 0c43 	CALL _putchar
                 ;    1103 }  
000b3b 9508      	RET
                 ;    1104 
                 ;    1105 void reset_serial()
                 ;    1106 {
                 _reset_serial:
                 ;    1107     rx_wr_index=0;
000b3c 24dd      	CLR  R13
                 ;    1108     rx_counter =0;
000b3d 24ee      	CLR  R14
                 ;    1109     rx_message = UNKNOWN_MSG;
000b3e 2488      	CLR  R8
                 ;    1110 }
000b3f 9508      	RET
                 ;    1111 
                 ;    1112 ///////////////////////////////////////////////////////////////
                 ;    1113 // END serial interrupt handle
                 ;    1114 /////////////////////////////////////////////////////////////// 
                 ;    1115 /*****************************************************
                 ;    1116 This program was produced by the
                 ;    1117 CodeWizardAVR V1.24.4a Standard
                 ;    1118 Automatic Program Generator
                 ;    1119 © Copyright 1998-2004 Pavel Haiduc, HP InfoTech s.r.l.
                 ;    1120 http://www.hpinfotech.com
                 ;    1121 e-mail:office@hpinfotech.com
                 ;    1122 
                 ;    1123 Project : 
                 ;    1124 Version : 
                 ;    1125 Date    : 19/5/2005
                 ;    1126 Author  : 3iGROUP                
                 ;    1127 Company : http://www.3ihut.net   
                 ;    1128 Comments: 
                 ;    1129 
                 ;    1130 
                 ;    1131 Chip type           : ATmega8515
                 ;    1132 Program type        : Application
                 ;    1133 Clock frequency     : 8.000000 MHz
                 ;    1134 Memory model        : Small
                 ;    1135 External SRAM size  : 32768
                 ;    1136 Ext. SRAM wait state: 0
                 ;    1137 Data Stack size     : 128
                 ;    1138 *****************************************************/
                 ;    1139 
                 ;    1140 #include "define.h"                                           
                 ;    1141 
                 ;    1142 #define     ACK                 1
                 ;    1143 #define     NO_ACK              0
                 ;    1144 
                 ;    1145 // I2C Bus functions
                 ;    1146 #asm
                 ;    1147    .equ __i2c_port=0x12 ;PORTD
                    .equ __i2c_port=0x12 ;PORTD
                 ;    1148    .equ __sda_bit=3
                    .equ __sda_bit=3
                 ;    1149    .equ __scl_bit=2
                    .equ __scl_bit=2
                 ;    1150 #endasm                   
                 ;    1151 
                 ;    1152 #ifdef __EEPROM_WRITE_BYTE
                 ;    1153 BYTE eeprom_read(BYTE deviceID, WORD address) 
                 ;    1154 {
                 _eeprom_read:
                 ;    1155     BYTE data;
                 ;    1156     i2c_start();
000b40 930a      	ST   -Y,R16
                 ;	deviceID -> Y+3
                 ;	address -> Y+1
                 ;	data -> R16
000b41 940e 0c93 	CALL _i2c_start
                 ;    1157     i2c_write(deviceID);        // issued R/W = 0
000b43 81eb      	LDD  R30,Y+3
000b44 93ea      	ST   -Y,R30
000b45 940e 0cc7 	CALL _i2c_write
                 ;    1158     i2c_write(address>>8);      // high word address
000b47 81ea      	LDD  R30,Y+2
000b48 70f0      	ANDI R31,HIGH(0x0)
000b49 93ea      	ST   -Y,R30
000b4a 940e 0cc7 	CALL _i2c_write
                 ;    1159     i2c_write(address&0x0FF);   // low word address
000b4c 81e9      	LDD  R30,Y+1
000b4d 81fa      	LDD  R31,Y+1+1
000b4e 70f0      	ANDI R31,HIGH(0xFF)
000b4f 93ea      	ST   -Y,R30
000b50 940e 0cc7 	CALL _i2c_write
                 ;    1160     
                 ;    1161     i2c_start();
000b52 940e 0c93 	CALL _i2c_start
                 ;    1162     i2c_write(deviceID | 1);    // issued R/W = 1
000b54 81eb      	LDD  R30,Y+3
000b55 60e1      	ORI  R30,1
000b56 93ea      	ST   -Y,R30
000b57 940e 0cc7 	CALL _i2c_write
                 ;    1163     data=i2c_read(NO_ACK);      // read at current
000b59 e0e0      	LDI  R30,LOW(0)
000b5a 93ea      	ST   -Y,R30
000b5b 940e 0cac 	CALL _i2c_read
000b5d 2f0e      	MOV  R16,R30
                 ;    1164     i2c_stop();
000b5e 940e 0ca2 	CALL _i2c_stop
                 ;    1165     return data;
000b60 2fe0      	MOV  R30,R16
000b61 8108      	LDD  R16,Y+0
000b62 c01d      	RJMP _0xDE
                 ;    1166 }
                 ;    1167 
                 ;    1168 void eeprom_write(BYTE deviceID, WORD address, BYTE data) 
                 ;    1169 {
                 _eeprom_write:
                 ;    1170     i2c_start();
000b63 940e 0c93 	CALL _i2c_start
                 ;    1171     i2c_write(deviceID);        // device address
000b65 81eb      	LDD  R30,Y+3
000b66 93ea      	ST   -Y,R30
000b67 940e 0cc7 	CALL _i2c_write
                 ;    1172     i2c_write(address>>8);      // high word address
000b69 81ea      	LDD  R30,Y+2
000b6a 70f0      	ANDI R31,HIGH(0x0)
000b6b 93ea      	ST   -Y,R30
000b6c 940e 0cc7 	CALL _i2c_write
                 ;    1173     i2c_write(address&0x0FF);   // low word address
000b6e 81e9      	LDD  R30,Y+1
000b6f 81fa      	LDD  R31,Y+1+1
000b70 70f0      	ANDI R31,HIGH(0xFF)
000b71 93ea      	ST   -Y,R30
000b72 940e 0cc7 	CALL _i2c_write
                 ;    1174     i2c_write(data);
000b74 81e8      	LD   R30,Y
000b75 93ea      	ST   -Y,R30
000b76 940e 0cc7 	CALL _i2c_write
                 ;    1175     i2c_stop();
000b78 940e 0ca2 	CALL _i2c_stop
                 ;    1176 
                 ;    1177     /* 10ms delay to complete the write operation */
                 ;    1178     delay_ms(10);               // 2 ticks : 5x2 = 10 ms        
000b7a e0ea      	LDI  R30,LOW(10)
000b7b e0f0      	LDI  R31,HIGH(10)
000b7c 93fa      	ST   -Y,R31
000b7d 93ea      	ST   -Y,R30
000b7e 940e 0cea 	CALL _delay_ms
                 ;    1179 }                                 
                 _0xDE:
000b80 9624      	ADIW R28,4
000b81 9508      	RET
                 ;    1180 
                 ;    1181 WORD eeprom_read_w(BYTE deviceID, WORD address)
                 ;    1182 {
                 _eeprom_read_w:
                 ;    1183     WORD result = 0;
                 ;    1184     result = eeprom_read(deviceID,address*2);
000b82 931a      	ST   -Y,R17
000b83 930a      	ST   -Y,R16
                 ;	deviceID -> Y+4
                 ;	address -> Y+2
                 ;	result -> R16,R17
000b84 e000      	LDI  R16,0
000b85 e010      	LDI  R17,0
000b86 81ec      	LDD  R30,Y+4
000b87 93ea      	ST   -Y,R30
000b88 81eb      	LDD  R30,Y+3
000b89 81fc      	LDD  R31,Y+3+1
000b8a 0fee      	LSL  R30
000b8b 1fff      	ROL  R31
000b8c 93fa      	ST   -Y,R31
000b8d 93ea      	ST   -Y,R30
000b8e 940e 0b40 	CALL _eeprom_read
000b90 2f0e      	MOV  R16,R30
000b91 2711      	CLR  R17
                 ;    1185     result = (result<<8) | eeprom_read(deviceID,address*2+1);
000b92 2ff0      	MOV  R31,R16
000b93 e0e0      	LDI  R30,LOW(0)
000b94 93ff      	PUSH R31
000b95 93ef      	PUSH R30
000b96 81ec      	LDD  R30,Y+4
000b97 93ea      	ST   -Y,R30
000b98 81eb      	LDD  R30,Y+3
000b99 81fc      	LDD  R31,Y+3+1
000b9a 0fee      	LSL  R30
000b9b 1fff      	ROL  R31
000b9c 9631      	ADIW R30,1
000b9d 93fa      	ST   -Y,R31
000b9e 93ea      	ST   -Y,R30
000b9f 940e 0b40 	CALL _eeprom_read
000ba1 91af      	POP  R26
000ba2 91bf      	POP  R27
000ba3 e0f0      	LDI  R31,0
000ba4 2bea      	OR   R30,R26
000ba5 2bfb      	OR   R31,R27
000ba6 018f      	MOVW R16,R30
                 ;    1186     return result;
000ba7 01f8      	MOVW R30,R16
000ba8 8119      	LDD  R17,Y+1
000ba9 8108      	LDD  R16,Y+0
000baa c01c      	RJMP _0xDD
                 ;    1187 }
                 ;    1188 void eeprom_write_w(BYTE deviceID, WORD address, WORD data)
                 ;    1189 {
                 _eeprom_write_w:
                 ;    1190     eeprom_write(deviceID,address*2,data>>8);
000bab 81ec      	LDD  R30,Y+4
000bac 93ea      	ST   -Y,R30
000bad 81eb      	LDD  R30,Y+3
000bae 81fc      	LDD  R31,Y+3+1
000baf 0fee      	LSL  R30
000bb0 1fff      	ROL  R31
000bb1 93fa      	ST   -Y,R31
000bb2 93ea      	ST   -Y,R30
000bb3 81ec      	LDD  R30,Y+4
000bb4 70f0      	ANDI R31,HIGH(0x0)
000bb5 93ea      	ST   -Y,R30
000bb6 940e 0b63 	CALL _eeprom_write
                 ;    1191     eeprom_write(deviceID,address*2+1,data&0x0FF);    
000bb8 81ec      	LDD  R30,Y+4
000bb9 93ea      	ST   -Y,R30
000bba 81eb      	LDD  R30,Y+3
000bbb 81fc      	LDD  R31,Y+3+1
000bbc 0fee      	LSL  R30
000bbd 1fff      	ROL  R31
000bbe 9631      	ADIW R30,1
000bbf 93fa      	ST   -Y,R31
000bc0 93ea      	ST   -Y,R30
000bc1 81eb      	LDD  R30,Y+3
000bc2 81fc      	LDD  R31,Y+3+1
000bc3 70f0      	ANDI R31,HIGH(0xFF)
000bc4 93ea      	ST   -Y,R30
000bc5 940e 0b63 	CALL _eeprom_write
                 ;    1192 }
                 _0xDD:
000bc7 9625      	ADIW R28,5
000bc8 9508      	RET
                 ;    1193 
                 ;    1194 #endif // __EEPROM_WRITE_BYTE
                 ;    1195 void eeprom_read_page(BYTE deviceID, WORD address, PBYTE buffer, BYTE page_size)
                 ;    1196 {
                 _eeprom_read_page:
                 ;    1197     BYTE i = 0;
                 ;    1198     i2c_start();
000bc9 930a      	ST   -Y,R16
                 ;	deviceID -> Y+6
                 ;	address -> Y+4
                 ;	*buffer -> Y+2
                 ;	page_size -> Y+1
                 ;	i -> R16
000bca e000      	LDI  R16,0
000bcb 940e 0c93 	CALL _i2c_start
                 ;    1199     i2c_write(deviceID);            // issued R/W = 0
000bcd 81ee      	LDD  R30,Y+6
000bce 93ea      	ST   -Y,R30
000bcf 940e 0cc7 	CALL _i2c_write
                 ;    1200     i2c_write(address>>8);          // high word address
000bd1 81ed      	LDD  R30,Y+5
000bd2 70f0      	ANDI R31,HIGH(0x0)
000bd3 93ea      	ST   -Y,R30
000bd4 940e 0cc7 	CALL _i2c_write
                 ;    1201     i2c_write(address&0xFF);        // low word address
000bd6 81ec      	LDD  R30,Y+4
000bd7 81fd      	LDD  R31,Y+4+1
000bd8 70f0      	ANDI R31,HIGH(0xFF)
000bd9 93ea      	ST   -Y,R30
000bda 940e 0cc7 	CALL _i2c_write
                 ;    1202     
                 ;    1203     i2c_start();
000bdc 940e 0c93 	CALL _i2c_start
                 ;    1204     i2c_write(deviceID | 1);        // issued R/W = 1
000bde 81ee      	LDD  R30,Y+6
000bdf 60e1      	ORI  R30,1
000be0 93ea      	ST   -Y,R30
000be1 940e 0cc7 	CALL _i2c_write
                 ;    1205                                     
                 ;    1206     while ( i < page_size-1 )
                 _0xD4:
000be3 81e9      	LDD  R30,Y+1
000be4 50e1      	SUBI R30,LOW(1)
000be5 170e      	CP   R16,R30
000be6 f488      	BRSH _0xD6
                 ;    1207     {
                 ;    1208         buffer[i++] = i2c_read(ACK);   // read at current
000be7 2fe0      	MOV  R30,R16
000be8 5f0f      	SUBI R16,-1
000be9 81aa      	LDD  R26,Y+2
000bea 81bb      	LDD  R27,Y+2+1
000beb e0f0      	LDI  R31,0
000bec 0fea      	ADD  R30,R26
000bed 1ffb      	ADC  R31,R27
000bee 93ff      	PUSH R31
000bef 93ef      	PUSH R30
000bf0 e0e1      	LDI  R30,LOW(1)
000bf1 93ea      	ST   -Y,R30
000bf2 940e 0cac 	CALL _i2c_read
000bf4 91af      	POP  R26
000bf5 91bf      	POP  R27
000bf6 93ec      	ST   X,R30
                 ;    1209     }
000bf7 cfeb      	RJMP _0xD4
                 _0xD6:
                 ;    1210     buffer[page_size-1] = i2c_read(NO_ACK); // read last byte
000bf8 81e9      	LDD  R30,Y+1
000bf9 50e1      	SUBI R30,LOW(1)
000bfa 81aa      	LDD  R26,Y+2
000bfb 81bb      	LDD  R27,Y+2+1
000bfc e0f0      	LDI  R31,0
000bfd 0fea      	ADD  R30,R26
000bfe 1ffb      	ADC  R31,R27
000bff 93ff      	PUSH R31
000c00 93ef      	PUSH R30
000c01 e0e0      	LDI  R30,LOW(0)
000c02 93ea      	ST   -Y,R30
000c03 940e 0cac 	CALL _i2c_read
000c05 91af      	POP  R26
000c06 91bf      	POP  R27
000c07 93ec      	ST   X,R30
                 ;    1211          
                 ;    1212     i2c_stop();
000c08 940e 0ca2 	CALL _i2c_stop
                 ;    1213 }
000c0a 8108      	LDD  R16,Y+0
000c0b 9627      	ADIW R28,7
000c0c 9508      	RET
                 ;    1214 
                 ;    1215 void eeprom_write_page(BYTE deviceID, WORD address, PBYTE buffer, BYTE page_size)
                 ;    1216 {
                 _eeprom_write_page:
                 ;    1217     BYTE i = 0;
                 ;    1218     i2c_start();
000c0d 930a      	ST   -Y,R16
                 ;	deviceID -> Y+6
                 ;	address -> Y+4
                 ;	*buffer -> Y+2
                 ;	page_size -> Y+1
                 ;	i -> R16
000c0e e000      	LDI  R16,0
000c0f 940e 0c93 	CALL _i2c_start
                 ;    1219     i2c_write(deviceID);            // issued R/W = 0
000c11 81ee      	LDD  R30,Y+6
000c12 93ea      	ST   -Y,R30
000c13 940e 0cc7 	CALL _i2c_write
                 ;    1220     i2c_write(address>>8);          // high word address
000c15 81ed      	LDD  R30,Y+5
000c16 70f0      	ANDI R31,HIGH(0x0)
000c17 93ea      	ST   -Y,R30
000c18 940e 0cc7 	CALL _i2c_write
                 ;    1221     i2c_write(address&0xFF);        // low word address
000c1a 81ec      	LDD  R30,Y+4
000c1b 81fd      	LDD  R31,Y+4+1
000c1c 70f0      	ANDI R31,HIGH(0xFF)
000c1d 93ea      	ST   -Y,R30
000c1e 940e 0cc7 	CALL _i2c_write
                 ;    1222                                         
                 ;    1223     while ( i < page_size )
                 _0xD7:
000c20 81e9      	LDD  R30,Y+1
000c21 170e      	CP   R16,R30
000c22 f010      	BRLO PC+3
000c23 940c 0c34 	JMP _0xD9
                 ;    1224     {
                 ;    1225         i2c_write(buffer[i++]);
000c25 2fe0      	MOV  R30,R16
000c26 5f0f      	SUBI R16,-1
000c27 81aa      	LDD  R26,Y+2
000c28 81bb      	LDD  R27,Y+2+1
000c29 e0f0      	LDI  R31,0
000c2a 0fae      	ADD  R26,R30
000c2b 1fbf      	ADC  R27,R31
000c2c 91ec      	LD   R30,X
000c2d 93ea      	ST   -Y,R30
000c2e 940e 0cc7 	CALL _i2c_write
                 ;    1226         #asm("nop");#asm("nop");
000c30 0000      	nop
000c31 0000      	nop
                 ;    1227     }          
000c32 940c 0c20 	JMP  _0xD7
                 _0xD9:
                 ;    1228     i2c_stop(); 
000c34 940e 0ca2 	CALL _i2c_stop
                 ;    1229     delay_ms(10);
000c36 e0ea      	LDI  R30,LOW(10)
000c37 e0f0      	LDI  R31,HIGH(10)
000c38 93fa      	ST   -Y,R31
000c39 93ea      	ST   -Y,R30
000c3a 940e 0cea 	CALL _delay_ms
                 ;    1230 }
000c3c 8108      	LDD  R16,Y+0
000c3d 9627      	ADIW R28,7
000c3e 9508      	RET
                 ;    1231                                               
                 
                 _getchar:
000c3f 9b5f           sbis usr,rxc
000c40 cffe           rjmp _getchar
000c41 b1ec           in   r30,udr
000c42 9508      	RET
                 _putchar:
000c43 9b5d           sbis usr,udre
000c44 cffe           rjmp _putchar
000c45 81e8           ld   r30,y
000c46 b9ec           out  udr,r30
000c47 9621      	ADIW R28,1
000c48 9508      	RET
                 _rtc_set_time:
000c49 940e 0c93 	CALL _i2c_start
000c4b ede0      	LDI  R30,LOW(208)
000c4c 93ea      	ST   -Y,R30
000c4d 940e 0cc7 	CALL _i2c_write
000c4f e0e0      	LDI  R30,LOW(0)
000c50 93ea      	ST   -Y,R30
000c51 940e 0cc7 	CALL _i2c_write
000c53 81e8      	LD   R30,Y
000c54 93ea      	ST   -Y,R30
000c55 940e 0d02 	CALL _bin2bcd
000c57 93ea      	ST   -Y,R30
000c58 940e 0cc7 	CALL _i2c_write
000c5a 81e9      	LDD  R30,Y+1
000c5b 93ea      	ST   -Y,R30
000c5c 940e 0d02 	CALL _bin2bcd
000c5e 93ea      	ST   -Y,R30
000c5f 940e 0cc7 	CALL _i2c_write
000c61 81ea      	LDD  R30,Y+2
000c62 93ea      	ST   -Y,R30
000c63 940e 0d02 	CALL _bin2bcd
000c65 93ea      	ST   -Y,R30
000c66 940e 0cc7 	CALL _i2c_write
000c68 940e 0ca2 	CALL _i2c_stop
000c6a c021      	RJMP _0xDC
                 _rtc_set_date:
000c6b 940e 0c93 	CALL _i2c_start
000c6d ede0      	LDI  R30,LOW(208)
000c6e 93ea      	ST   -Y,R30
000c6f 940e 0cc7 	CALL _i2c_write
000c71 e0e4      	LDI  R30,LOW(4)
000c72 93ea      	ST   -Y,R30
000c73 940e 0cc7 	CALL _i2c_write
000c75 81ea      	LDD  R30,Y+2
000c76 93ea      	ST   -Y,R30
000c77 940e 0d02 	CALL _bin2bcd
000c79 93ea      	ST   -Y,R30
000c7a 940e 0cc7 	CALL _i2c_write
000c7c 81e9      	LDD  R30,Y+1
000c7d 93ea      	ST   -Y,R30
000c7e 940e 0d02 	CALL _bin2bcd
000c80 93ea      	ST   -Y,R30
000c81 940e 0cc7 	CALL _i2c_write
000c83 81e8      	LD   R30,Y
000c84 93ea      	ST   -Y,R30
000c85 940e 0d02 	CALL _bin2bcd
000c87 93ea      	ST   -Y,R30
000c88 940e 0cc7 	CALL _i2c_write
000c8a 940e 0ca2 	CALL _i2c_stop
                 _0xDC:
000c8c 9623      	ADIW R28,3
000c8d 9508      	RET
                 
                 	.equ __i2c_dir=__i2c_port-1
                 	.equ __i2c_pin=__i2c_port-2
                 _i2c_init:
000c8e 9892      	cbi  __i2c_port,__scl_bit
000c8f 9893      	cbi  __i2c_port,__sda_bit
000c90 9a8a      	sbi  __i2c_dir,__scl_bit
000c91 988b      	cbi  __i2c_dir,__sda_bit
000c92 c015      	rjmp __i2c_delay2
                 _i2c_start:
000c93 988b      	cbi  __i2c_dir,__sda_bit
000c94 988a      	cbi  __i2c_dir,__scl_bit
000c95 27ee      	clr  r30
000c96 0000      	nop
000c97 9b83      	sbis __i2c_pin,__sda_bit
000c98 9508      	ret
000c99 9b82      	sbis __i2c_pin,__scl_bit
000c9a 9508      	ret
000c9b d004      	rcall __i2c_delay1
000c9c 9a8b      	sbi  __i2c_dir,__sda_bit
000c9d d002      	rcall __i2c_delay1
000c9e 9a8a      	sbi  __i2c_dir,__scl_bit
000c9f e0e1      	ldi  r30,1
                 __i2c_delay1:
000ca0 e16b      	ldi  r22,27
000ca1 c007      	rjmp __i2c_delay2l
                 _i2c_stop:
000ca2 9a8b      	sbi  __i2c_dir,__sda_bit
000ca3 9a8a      	sbi  __i2c_dir,__scl_bit
000ca4 d003      	rcall __i2c_delay2
000ca5 988a      	cbi  __i2c_dir,__scl_bit
000ca6 dff9      	rcall __i2c_delay1
000ca7 988b      	cbi  __i2c_dir,__sda_bit
                 __i2c_delay2:
000ca8 e365      	ldi  r22,53
                 __i2c_delay2l:
000ca9 956a      	dec  r22
000caa f7f1      	brne __i2c_delay2l
000cab 9508      	ret
                 _i2c_read:
000cac e078      	ldi  r23,8
                 __i2c_read0:
000cad 988a      	cbi  __i2c_dir,__scl_bit
000cae dff1      	rcall __i2c_delay1
                 __i2c_read3:
000caf 9b82      	sbis __i2c_pin,__scl_bit
000cb0 cffe      	rjmp __i2c_read3
000cb1 dfee      	rcall __i2c_delay1
000cb2 9488      	clc
000cb3 9983      	sbic __i2c_pin,__sda_bit
000cb4 9408      	sec
000cb5 9a8a      	sbi  __i2c_dir,__scl_bit
000cb6 dff1      	rcall __i2c_delay2
000cb7 1fee      	rol  r30
000cb8 957a      	dec  r23
000cb9 f799      	brne __i2c_read0
000cba 9179      	ld   r23,y+
000cbb 2377      	tst  r23
000cbc f411      	brne __i2c_read1
000cbd 988b      	cbi  __i2c_dir,__sda_bit
000cbe c001      	rjmp __i2c_read2
                 __i2c_read1:
000cbf 9a8b      	sbi  __i2c_dir,__sda_bit
                 __i2c_read2:
000cc0 dfdf      	rcall __i2c_delay1
000cc1 988a      	cbi  __i2c_dir,__scl_bit
000cc2 dfe5      	rcall __i2c_delay2
000cc3 9a8a      	sbi  __i2c_dir,__scl_bit
000cc4 dfdb      	rcall __i2c_delay1
000cc5 988b      	cbi  __i2c_dir,__sda_bit
000cc6 cfd9      	rjmp __i2c_delay1
                 
                 _i2c_write:
000cc7 91e9      	ld   r30,y+
000cc8 e078      	ldi  r23,8
                 __i2c_write0:
000cc9 0fee      	lsl  r30
000cca f410      	brcc __i2c_write1
000ccb 988b      	cbi  __i2c_dir,__sda_bit
000ccc c001      	rjmp __i2c_write2
                 __i2c_write1:
000ccd 9a8b      	sbi  __i2c_dir,__sda_bit
                 __i2c_write2:
000cce dfd9      	rcall __i2c_delay2
000ccf 988a      	cbi  __i2c_dir,__scl_bit
000cd0 dfcf      	rcall __i2c_delay1
                 __i2c_write3:
000cd1 9b82      	sbis __i2c_pin,__scl_bit
000cd2 cffe      	rjmp __i2c_write3
000cd3 dfcc      	rcall __i2c_delay1
000cd4 9a8a      	sbi  __i2c_dir,__scl_bit
000cd5 957a      	dec  r23
000cd6 f791      	brne __i2c_write0
000cd7 988b      	cbi  __i2c_dir,__sda_bit
000cd8 dfc7      	rcall __i2c_delay1
000cd9 988a      	cbi  __i2c_dir,__scl_bit
000cda dfcd      	rcall __i2c_delay2
000cdb e0e1      	ldi  r30,1
000cdc 9983      	sbic __i2c_pin,__sda_bit
000cdd 27ee      	clr  r30
000cde 9a8a      	sbi  __i2c_dir,__scl_bit
000cdf 9508      	ret
                 
                 _strlen:
000ce0 91a9      	ld   r26,y+
000ce1 91b9      	ld   r27,y+
000ce2 27ee      	clr  r30
000ce3 27ff      	clr  r31
                 __strlen0:
000ce4 916d      	ld   r22,x+
000ce5 2366      	tst  r22
000ce6 f011      	breq __strlen1
000ce7 9631      	adiw r30,1
000ce8 cffb      	rjmp __strlen0
                 __strlen1:
000ce9 9508      	ret
                 
                 _delay_ms:
000cea 91e9      	ld   r30,y+
000ceb 91f9      	ld   r31,y+
000cec 9630      	adiw r30,0
000ced f039      	breq __delay_ms1
                 __delay_ms0:
000cee ea80
000cef e09f
000cf0 9701
000cf1 f7f1      	__DELAY_USW 0xFA0
000cf2 95a8      	wdr
000cf3 9731      	sbiw r30,1
000cf4 f7c9      	brne __delay_ms0
                 __delay_ms1:
000cf5 9508      	ret
                 
                 _bcd2bin:
000cf6 81e8      	ld   r30,y
000cf7 95e2      	swap r30
000cf8 70ef      	andi r30,0xf
000cf9 2fae      	mov  r26,r30
000cfa 0faa      	lsl  r26
000cfb 0faa      	lsl  r26
000cfc 0fea      	add  r30,r26
000cfd 0fee      	lsl  r30
000cfe 91a9      	ld   r26,y+
000cff 70af      	andi r26,0xf
000d00 0fea      	add  r30,r26
000d01 9508      	ret
                 
                 _bin2bcd:
000d02 91a9      	ld   r26,y+
000d03 27ee      	clr  r30
                 __bin2bcd0:
000d04 50aa      	subi r26,10
000d05 f012      	brmi __bin2bcd1
000d06 5fe0      	subi r30,-16
000d07 cffc      	rjmp __bin2bcd0
                 __bin2bcd1:
000d08 5fa6      	subi r26,-10
000d09 0fea      	add  r30,r26
000d0a 9508      	ret
                 
                 __ANEGW1:
000d0b 95e0      	COM  R30
000d0c 95f0      	COM  R31
000d0d 9631      	ADIW R30,1
000d0e 9508      	RET
                 
                 __LSLW4:
000d0f 0fee      	LSL  R30
000d10 1fff      	ROL  R31
                 __LSLW3:
000d11 0fee      	LSL  R30
000d12 1fff      	ROL  R31
                 __LSLW2:
000d13 0fee      	LSL  R30
000d14 1fff      	ROL  R31
000d15 0fee      	LSL  R30
000d16 1fff      	ROL  R31
000d17 9508      	RET
                 
                 __MULW12U:
000d18 9ffa      	MUL  R31,R26
000d19 2df0      	MOV  R31,R0
000d1a 9feb      	MUL  R30,R27
000d1b 0df0      	ADD  R31,R0
000d1c 9fea      	MUL  R30,R26
000d1d 2de0      	MOV  R30,R0
000d1e 0df1      	ADD  R31,R1
000d1f 9508      	RET
                 
                 __MULW12:
000d20 d017      	RCALL __CHKSIGNW
000d21 dff6      	RCALL __MULW12U
000d22 f40e      	BRTC __MULW121
000d23 dfe7      	RCALL __ANEGW1
                 __MULW121:
000d24 9508      	RET
                 
                 __DIVW21U:
000d25 2400      	CLR  R0
000d26 2411      	CLR  R1
000d27 e190      	LDI  R25,16
                 __DIVW21U1:
000d28 0faa      	LSL  R26
000d29 1fbb      	ROL  R27
000d2a 1c00      	ROL  R0
000d2b 1c11      	ROL  R1
000d2c 1a0e      	SUB  R0,R30
000d2d 0a1f      	SBC  R1,R31
000d2e f418      	BRCC __DIVW21U2
000d2f 0e0e      	ADD  R0,R30
000d30 1e1f      	ADC  R1,R31
000d31 c001      	RJMP __DIVW21U3
                 __DIVW21U2:
000d32 60a1      	SBR  R26,1
                 __DIVW21U3:
000d33 959a      	DEC  R25
000d34 f799      	BRNE __DIVW21U1
000d35 01fd      	MOVW R30,R26
000d36 01d0      	MOVW R26,R0
000d37 9508      	RET
                 
                 __CHKSIGNW:
000d38 94e8      	CLT
000d39 fff7      	SBRS R31,7
000d3a c002      	RJMP __CHKSW1
000d3b dfcf      	RCALL __ANEGW1
000d3c 9468      	SET
                 __CHKSW1:
000d3d ffb7      	SBRS R27,7
000d3e c006      	RJMP __CHKSW2
000d3f 95a0      	COM  R26
000d40 95b0      	COM  R27
000d41 9611      	ADIW R26,1
000d42 f800      	BLD  R0,0
000d43 9403      	INC  R0
000d44 fa00      	BST  R0,0
                 __CHKSW2:
000d45 9508      	RET
                 
                 __GETW1P:
000d46 91ed      	LD   R30,X+
000d47 91fc      	LD   R31,X
000d48 9711      	SBIW R26,1
000d49 9508      	RET
                 
                 __EEPROMRDW:
000d4a 9611      	ADIW R26,1
000d4b d002      	RCALL __EEPROMRDB
000d4c 2ffe      	MOV  R31,R30
000d4d 9711      	SBIW R26,1
                 
                 __EEPROMRDB:
000d4e 99e1      	SBIC EECR,EEWE
000d4f cffe      	RJMP __EEPROMRDB
000d50 93ff      	PUSH R31
000d51 b7ff      	IN   R31,SREG
000d52 94f8      	CLI
000d53 bbae      	OUT  EEARL,R26
000d54 bbbf      	OUT  EEARH,R27
000d55 9ae0      	SBI  EECR,EERE
000d56 b3ed      	IN   R30,EEDR
000d57 bfff      	OUT  SREG,R31
000d58 91ff      	POP  R31
000d59 9508      	RET
                 
                 __EEPROMWRW:
000d5a d007      	RCALL __EEPROMWRB
000d5b 9611      	ADIW R26,1
000d5c 93ef      	PUSH R30
000d5d 2fef      	MOV  R30,R31
000d5e d003      	RCALL __EEPROMWRB
000d5f 91ef      	POP  R30
000d60 9711      	SBIW R26,1
000d61 9508      	RET
                 
                 __EEPROMWRB:
000d62 99e1      	SBIC EECR,EEWE
000d63 cffe      	RJMP __EEPROMWRB
000d64 b79f      	IN   R25,SREG
000d65 94f8      	CLI
000d66 bbae      	OUT  EEARL,R26
000d67 bbbf      	OUT  EEARH,R27
000d68 9ae0      	SBI  EECR,EERE
000d69 b38d      	IN   R24,EEDR
000d6a 17e8      	CP   R30,R24
000d6b f019      	BREQ __EEPROMWRB0
000d6c bbed      	OUT  EEDR,R30
000d6d 9ae2      	SBI  EECR,EEMWE
000d6e 9ae1      	SBI  EECR,EEWE
                 __EEPROMWRB0:
000d6f bf9f      	OUT  SREG,R25
000d70 9508      	RET
                 
                 __SAVELOCR6:
000d71 935a      	ST   -Y,R21
                 __SAVELOCR5:
000d72 934a      	ST   -Y,R20
                 __SAVELOCR4:
000d73 933a      	ST   -Y,R19
                 __SAVELOCR3:
000d74 932a      	ST   -Y,R18
                 __SAVELOCR2:
000d75 931a      	ST   -Y,R17
000d76 930a      	ST   -Y,R16
000d77 9508      	RET
                 
                 __LOADLOCR6:
000d78 815d      	LDD  R21,Y+5
                 __LOADLOCR5:
000d79 814c      	LDD  R20,Y+4
                 __LOADLOCR4:
000d7a 813b      	LDD  R19,Y+3
                 __LOADLOCR3:
000d7b 812a      	LDD  R18,Y+2
                 __LOADLOCR2:
000d7c 8119      	LDD  R17,Y+1
000d7d 8108      	LD   R16,Y
000d7e 9508      	RET
                 
                 __INITLOCB:
                 __INITLOCW:
000d7f 0fac      	ADD R26,R28
000d80 1fbd      	ADC R27,R29
                 __INITLOC0:
000d81 9005      	LPM  R0,Z+
000d82 920d      	ST   X+,R0
000d83 958a      	DEC  R24
000d84 f7e1      	BRNE __INITLOC0
000d85 9508      	RET
                 
                 ;END OF CODE MARKER
                 __END_OF_CODE:


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

ATmega162 register use summary:
r0 :  23 r1 :   6 r2 :  24 r3 :   0 r4 :  11 r5 :   3 r6 :  13 r7 :  11 
r8 :   6 r9 :  15 r10:  16 r11:   8 r12:   9 r13:   6 r14:   5 r15:   0 
r16: 124 r17:  80 r18:  35 r19:  27 r20:  27 r21:  20 r22:   7 r23:   6 
r24:  21 r25:   7 r26: 242 r27: 173 r28:  28 r29:   2 r30:1009 r31: 480 
x  :  34 y  : 525 z  :  10 
Registers used: 33 out of 35 (94.3%)

ATmega162 instruction use summary:
adc   :  39 add   :  44 adiw  :  41 and   :   4 andi  :  46 asr   :   0 
bclr  :   0 bld   :  19 brbc  :   0 brbs  :   0 brcc  :   2 brcs  :   0 
break :   0 breq  :  21 brge  :   0 brhc  :   0 brhs  :   0 brid  :   0 
brie  :   0 brlo  :  42 brlt  :   5 brmi  :   1 brne  :  49 brpl  :   0 
brsh  :  12 brtc  :   1 brts  :   0 brvc  :   0 brvs  :   0 bset  :   0 
bst   :   1 call  : 216 cbi   :  38 cbr   :   0 clc   :   1 clh   :   0 
cli   :   4 cln   :   0 clr   :  29 cls   :   0 clt   :   6 clv   :   0 
clz   :   0 com   :   8 cp    :  29 cpc   :  55 cpi   :  75 cpse  :   0 
dec   :   6 eor   :   0 fmul  :   0 fmuls :   0 fmulsu:   0 icall :   0 
ijmp  :   0 in    :  13 inc   :   3 jmp   :  68 ld    :  42 ldd   : 163 
ldi   : 518 lds   : 160 lpm   :   8 lsl   :  25 lsr   :   0 mov   :  40 
movw  :  52 mul   :   3 muls  :   0 mulsu :   0 neg   :   0 nop   :   4 
or    :   8 ori   :   3 out   :  54 pop   :  12 push  :  12 rcall :  24 
ret   :  56 reti  :   2 rjmp  :  87 rol   :  24 ror   :   0 sbc   :   8 
sbci  :  45 sbi   :  37 sbic  :   4 sbis  :   6 sbiw  :  13 sbr   :   1 
sbrc  :   1 sbrs  :   8 sec   :   1 seh   :   0 sei   :   2 sen   :   0 
ser   :   0 ses   :   0 set   :   9 sev   :   0 sez   :   0 sleep :   0 
spm   :   0 st    : 320 std   :  36 sts   : 119 sub   :   8 subi  :  55 
swap  :   1 tst   :   3 wdr   :  15 
Instructions used: 69 out of 111 (62.2%)

ATmega162 memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x001b0c   6860     64   6924   16384  42.3%
[.dseg] 0x000100 0x0003b2      0    590    590    1024  57.6%
[.eseg] 0x000000 0x0001fa      0    506    506     512  98.8%

Assembly complete, 0 errors, 9 warnings
